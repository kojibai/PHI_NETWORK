import{C as e,Cr as t,D as n,O as r,S as i,Sr as a,T as o,Tr as s,_ as c,b as l,c as u,f as d,ft as f,l as p,m,p as h,u as g,vr as _,x as v,xr as y,y as b,yr as x}from"./index-BMsYuyrx.js";import{t as S}from"./SigilModal-ChE9vK0d.js";const C=17491.270421,w=[`Ignition Ark`,`Integration Ark`,`Harmonization Ark`,`Reflektion Ark`,`Purifikation Ark`,`Dream Ark`],T={"Ignition Ark":`#ff1559`,"Integration Ark":`#ff6d00`,"Harmonization Ark":`#ffd900`,"Reflektion Ark":`#00ff66`,"Purifikation Ark":`#05e6ff`,"Dream Ark":`#c300ff`},E={"Ignition Ark":`Ignite`,"Integration Ark":`Integrate`,"Harmonization Ark":`Harmony`,"Reflektion Ark":`Reflekt`,"Purifikation Ark":`Purify`,"Dream Ark":`Dream`},D=C/36,O=D/44,k=3+Math.sqrt(5);Math.round(k*1e3),1/k;var A=s(x(),1),j=s(f(),1),M=120,N=M/2,P=22,F=4.5,ee=2,te=N-.5,I=N-ee,L=36,R=-3,z=3,ne=I-2,B=(P+F+te)/2-4,re=e=>e*Math.PI/180,V=e=>e.toLowerCase().replace(/\s+/g,`-`);function ie(e,t,n){let r=parseInt(e.slice(1),16),i=parseInt(t.slice(1),16),a=r>>16,o=r>>8&255,s=r&255,c=i>>16,l=i>>8&255,u=i&255;return`rgb(${Math.round(a+(c-a)*n)},${Math.round(o+(l-o)*n)},${Math.round(s+(u-s)*n)})`}var H=(e,t,n)=>Math.max(t,Math.min(n,e)),ae=e=>{if(!e)return;let t=e.match(/(\d{2})$/);if(!t)return;let n=parseInt(t[1],10);if(Number.isFinite(n))return H(n,0,43)},oe=({hue:e,pulse:t,kaiPulseEternal:n,harmonicDayPercent:r,microCyclePercent:i,dayLabel:a,monthLabel:o,monthDay:s,glowPulse:c=!0,pulseIntervalSec:l=k,rimFlash:u=!1,rotationOverride:d,solarSpiralStepString:f,solarSpiralStep:p,eternalBeatIndex:m,eternalStepIndex:h})=>{(0,A.useEffect)(()=>{typeof document<`u`&&document.documentElement.style.setProperty(`--cycle`,`${l}s`)},[l]);let g=`${l}s`,_=(n%C+C)%C,v=Number.isFinite(t)?t:_,y=v/C,b=Number.isFinite(r)?r:y*100,x=(v-Math.floor(v/D)*D)%O/O,S=Number.isFinite(i)?i:x*100,ee=(v%C+C)%C,oe=ee/C,se=Math.floor(oe*36)%36,ce=(se+.5)/36*360,U=typeof d==`number`?d:ce,W=360/w.length,G=Math.floor(U/W)%w.length,le=(G+1)%w.length,ue=(U-G*W+360)%360,de=Math.min(1,ue/W),fe=T[w[G]],pe=T[w[le]],me=ie(fe,pe,de),he=2*Math.PI*I,ge=he*(1-b/100),_e=-(S/100)*l,ve=v,ye=[`Aethon`,`Virelai`,`Solari`,`Amarin`,`Kaelus`,`Umbriel`,`Noctura`,`Liora`].indexOf(o)+1,be=ye>0?ye:1,xe=N-14,Se=N,Ce=N+14,we=N+28,Te=Math.floor(_/D)%36,Ee=Number.isFinite(m)?H(m,0,35):Te,De=_-Ee*D,Oe=De/D,ke=Math.floor(De/O)%44,Ae=Number.isFinite(h)?H(h,0,43):ke,je=Ae.toString().padStart(2,`0`),Me=(Ee+.5)/36*360,Ne=`hsl(${se/36*360}, 100%, 50%)`,Pe=`#ebfdff`,Fe=1.6,Ie=te-(P+F)+.5,Le=N-(P+F),Re=Ie*Oe,ze=Le-Re,Be=.82,Ve=N-(P+F)-Ie*Be,He=N,Ue=Ve+6,We=(0,A.useId)().replace(/[^a-zA-Z0-9_-]/g,``)||`klock`,Ge=je,Ke=Ee.toString().padStart(2,`0`),qe=Math.floor(_),Je=De-Ae*O,Ye=Math.max(0,Math.min(1,Je/O))*100,Xe=`#00faff`,Ze=`#ff6d00`,Qe=((ee-se*D)%D+D)%D,$e=Math.floor(Qe/O)%44,et=Number.isFinite(p?.stepIndex)?H(p.stepIndex,0,43):void 0,tt=ae(f),nt=(et??tt??$e).toString().padStart(2,`0`),rt=N-(P+F)-Ie*Be,it=N;return(0,j.jsx)(`div`,{className:`kai-klock-shell`,style:{"--hue":e,"--arc":fe,"--cycle":g,width:`100%`,aspectRatio:`1 / 1`,overflow:`hidden`},children:(0,j.jsxs)(`svg`,{className:`kai-svg`,viewBox:`0 0 ${M} ${M}`,width:`100%`,height:`100%`,preserveAspectRatio:`xMidYMid meet`,role:`img`,children:[(0,j.jsx)(`circle`,{cx:N,cy:N,r:te,className:`rim-ring ${u?`rim-flash`:``}`}),(0,j.jsx)(`circle`,{cx:N,cy:N,r:I,className:`day-progress`,strokeDasharray:he,strokeDashoffset:ge}),Array.from({length:36}).map((e,t)=>{let n=re(t*(360/L)-90),r=(t+R+L)%L/L;return(0,j.jsx)(`text`,{x:N+ne*Math.cos(n),y:N+ne*Math.sin(n)+z/2,className:`beat-number`,textAnchor:`middle`,fontSize:z,style:{fill:`hsl(${r*360},100%,50%)`},children:t},t)}),(0,j.jsx)(`circle`,{cx:N,cy:N,r:P+F,className:`inner-halo`}),(0,j.jsx)(`g`,{className:`orb-spin`,style:{animationDelay:`${_e}s`},children:(0,j.jsx)(`circle`,{cx:N,cy:N-(P+F),r:3.6,className:`micro-orb orb-glow`})}),(0,j.jsxs)(`g`,{style:{transform:`rotate(${U}deg)`,transformOrigin:`${N}px ${N}px`,transition:`transform 1s ease-out`},children:[(0,j.jsx)(`rect`,{x:N-1,y:N-(P+F)-(te-(P+F)),width:2,height:te-(P+F),rx:1,className:`needle`,style:{fill:me}}),(0,j.jsxs)(`g`,{className:`solar-hand-label-wrap`,style:{transform:`rotate(${-U}deg)`,transformOrigin:`${it}px ${rt}px`},children:[(0,j.jsx)(`text`,{x:it,y:rt-3.6,textAnchor:`middle`,dominantBaseline:`central`,fontSize:3,fontWeight:900,style:{fill:Ze,paintOrder:`stroke`,stroke:`rgba(0,0,0,0.65)`,strokeWidth:.8,filter:`drop-shadow(0 0 2px ${Ze})`},children:`â˜€`}),(0,j.jsx)(`text`,{x:it-2.2,y:rt,textAnchor:`middle`,dominantBaseline:`central`,className:`solar-hand-label-digit`,fontSize:4.4,fontWeight:900,style:{fill:Ze,paintOrder:`stroke`,stroke:`rgba(0,0,0,0.65)`,strokeWidth:.9,letterSpacing:`0.4px`,filter:`drop-shadow(0 0 2px ${Ze}) drop-shadow(0 0 5px ${Ze})`},children:nt[0]}),(0,j.jsx)(`text`,{x:it+2.2,y:rt,textAnchor:`middle`,dominantBaseline:`central`,className:`solar-hand-label-digit`,fontSize:4.4,fontWeight:900,style:{fill:Ze,paintOrder:`stroke`,stroke:`rgba(0,0,0,0.65)`,strokeWidth:.9,letterSpacing:`0.4px`,filter:`drop-shadow(0 0 2px ${Ze}) drop-shadow(0 0 5px ${Ze})`},children:nt[1]})]})]}),(0,j.jsxs)(`g`,{className:`eternal-hand-group`,style:{transform:`rotate(${Me}deg)`,transformOrigin:`${N}px ${N}px`,transition:`transform 0.6s cubic-bezier(.22,.61,.36,1)`},children:[(0,j.jsx)(`rect`,{x:N-Fe/2,y:N-(P+F)-Ie,width:Fe,height:Ie,rx:Fe/1.5,className:`eternal-hand`,style:{fill:`transparent`,stroke:`#bff7ff`,strokeWidth:.7,filter:`drop-shadow(0 0 2px #eaffff) drop-shadow(0 0 6px #d9fbff)`,mixBlendMode:`screen`}}),(0,j.jsx)(`defs`,{children:(0,j.jsxs)(`linearGradient`,{id:`eternalFill-${We}`,x1:`0`,y1:`1`,x2:`0`,y2:`0`,children:[(0,j.jsx)(`stop`,{offset:`0%`,stopColor:Pe,stopOpacity:.15}),(0,j.jsx)(`stop`,{offset:`100%`,stopColor:Pe,stopOpacity:.95})]})}),(0,j.jsx)(`rect`,{x:N-Fe/2,y:ze,width:Fe,height:Math.max(0,Re),rx:Fe/2,className:`eternal-hand-fill`,style:{fill:`url(#eternalFill-${We})`,filter:`drop-shadow(0 0 3px #eaffff) drop-shadow(0 0 6px #eaffff)`,mixBlendMode:`screen`}}),(0,j.jsx)(`circle`,{cx:N,cy:N-(P+F)-Ie-.8,r:1.35,className:`eternal-hand-tip`,style:{fill:`#ffffff`,filter:`drop-shadow(0 0 4px #eaffff) drop-shadow(0 0 8px #eaffff)`,mixBlendMode:`screen`}}),(0,j.jsxs)(`g`,{className:`eternal-hand-label-wrap`,style:{transform:`rotate(${-Me}deg)`,transformOrigin:`${He}px ${Ve}px`},children:[(0,j.jsx)(`text`,{x:He-2.2,y:Ve,textAnchor:`middle`,dominantBaseline:`central`,className:`eternal-hand-label-digit`,fontSize:4.4,fontWeight:900,style:{fill:`#e8feff`,paintOrder:`stroke`,stroke:`rgba(0,0,0,0.45)`,strokeWidth:.9,letterSpacing:`0.4px`,filter:`drop-shadow(0 0 2px #eaffff) drop-shadow(0 0 5px #c8fbff)`},children:je[0]}),(0,j.jsx)(`text`,{x:He+2.2,y:Ve,textAnchor:`middle`,dominantBaseline:`central`,className:`eternal-hand-label-digit`,fontSize:4.4,fontWeight:900,style:{fill:`#e8feff`,paintOrder:`stroke`,stroke:`rgba(0,0,0,0.45)`,strokeWidth:.9,letterSpacing:`0.4px`,filter:`drop-shadow(0 0 2px #eaffff) drop-shadow(0 0 5px #c8fbff)`},children:je[1]})]}),(0,j.jsx)(`g`,{transform:`rotate(${-Me} ${He} ${Ue})`,children:(0,j.jsx)(`text`,{x:He,y:Ue,textAnchor:`middle`,dominantBaseline:`central`,className:`eternal-hand-percent`,fontSize:3.2,fontWeight:800,style:{fill:`#dafeff`,paintOrder:`stroke`,stroke:`rgba(0,0,0,0.4)`,strokeWidth:.7,letterSpacing:`0.25px`,filter:`drop-shadow(0 0 2px #eaffff)`}})})]}),(0,j.jsx)(`text`,{x:N,y:N-15,className:`center-sub`,textAnchor:`middle`,fontSize:6,fontWeight:800,style:{fill:Xe,paintOrder:`stroke`,stroke:`#000`,strokeWidth:.9,letterSpacing:`0.4px`,filter:`drop-shadow(0 0 2px ${Xe}) drop-shadow(0 0 6px ${Xe})`},children:qe}),(0,j.jsxs)(`text`,{x:N,y:N-3,className:`center-pulse ${c?`pulse-flash`:``}`,textAnchor:`middle`,children:[Ke,`:`,Ge]},`et-${ve}`),(0,j.jsx)(`text`,{x:N,y:N+8,className:`center-day day-${V(a)}`,textAnchor:`middle`,children:a}),(0,j.jsx)(`text`,{x:N,y:N+18,className:`center-month month-${V(o)}`,textAnchor:`middle`,children:o}),(0,j.jsx)(`text`,{x:N,y:we+8,className:`eternal-pulse`,textAnchor:`middle`,children:n}),(0,j.jsx)(`text`,{x:xe,y:we,className:`step-percent`,textAnchor:`middle`,fontSize:5.5,fill:Ne,fontWeight:800,style:{filter:`drop-shadow(0 0 2px ${Ne}) drop-shadow(0 0 5px #00faff)`,letterSpacing:`0.25px`},children:`${Ye.toFixed(1)}%`}),(0,j.jsx)(`text`,{x:Se,y:we,className:`day-of-month day-${V(a)}`,textAnchor:`middle`,children:s}),(0,j.jsx)(`text`,{x:Ce,y:we,className:`day-of-month month-${V(o)}`,textAnchor:`middle`,children:be}),w.map((e,t)=>{let n=re(t*(360/w.length)-90),r=N+B*Math.cos(n),i=N+B*Math.sin(n)+(t===3?7:3);return(0,j.jsxs)(A.Fragment,{children:[(0,j.jsx)(`text`,{x:r,y:i,className:`arc-label arc-${V(e.split(` `)[0])} ${t===G?`active`:``}`,textAnchor:`middle`,children:E[e]}),e===`Ignition Ark`&&f&&(0,j.jsx)(`text`,{x:r,y:i+8,textAnchor:`middle`,dominantBaseline:`hanging`,fontSize:10,fill:`#00faff`,fontWeight:900,style:{filter:`drop-shadow(0 0 2px #00faff) drop-shadow(0 0 4px #00faff) drop-shadow(0 0 8px #00faff)`,paintOrder:`stroke`,stroke:`#000`,strokeWidth:1,vectorEffect:`non-scaling-stroke`,letterSpacing:`0.5px`},children:f})]},e)})]})})},se=Date.UTC(2024,4,10,6,45,41,888),ce=3+Math.sqrt(5),U=ce*1e3,W=1000000n,G=17491270421n,le=11000000n,ue=(G+18n)/36n,de=[`Solhara`,`Aquaris`,`Flamora`,`Verdari`,`Sonari`,`Kaelith`],fe={Solhara:`Root`,Aquaris:`Sacral`,Flamora:`Solar Plexus`,Verdari:`Heart`,Sonari:`Throat`,Kaelith:`Crown`},pe=(e,t)=>(e%t+t)%t;function me(e,t){let n=e/t,r=e%t;return r!==0n&&r>0n!=t>0n?n-1n:n}function he(e){if(!Number.isFinite(e))return 0n;let t=e<0?-1:1,n=Math.abs(e),r=Math.trunc(n),i=n-r;return i<.5?BigInt(t*r):i>.5?BigInt(t*(r+1)):BigInt(t*(r%2==0?r:r+1))}function ge(e){return he((e.getTime()-se)/1e3/ce*1e6)}function _e(e){let t=ge(e),n=pe(t,G),r=me(t,G),i=Number(me(n,ue)),a=n-BigInt(i)*ue,o=a-a/le*le,s=Number(o)/Number(le);return{pulse:Number(me(t,W)),beat:i,stepPct:s,chakraDay:fe[de[Number(pe(r,6n))]]}}var ve=()=>performance.timeOrigin+performance.now(),ye=e=>{let t=e-se;return se+Math.ceil(t/U)*U},be=()=>{let[e,t]=(0,A.useState)(0),[n,i]=(0,A.useState)(0),[a,o]=(0,A.useState)(0),[s,c]=(0,A.useState)(`Root`),[l,u]=(0,A.useState)(!1),[d]=(0,A.useState)(()=>`btn-${Math.random().toString(36).slice(2)}`),f=l?`sigil-open`:`sigil-closed`,p=(0,A.useRef)(null),m=(0,A.useRef)(null),h=(0,A.useRef)(0),g=(0,A.useCallback)(()=>{let{pulse:e,beat:n,stepPct:r,chakraDay:a}=_e(new Date);t(e),i(n),o(r),c(a)},[]),_=()=>{m.current!==null&&(clearTimeout(m.current),m.current=null)},v=(0,A.useCallback)(()=>{_();let e=ve();h.current=ye(e);let t=()=>{let e=ve(),n=Math.floor((e-h.current)/U),r=Math.max(0,n)+1;for(let e=0;e<r;e++)g(),h.current+=U;let i=Math.max(0,h.current-ve());m.current=window.setTimeout(t,i)},n=Math.max(0,h.current-e);m.current=window.setTimeout(t,n)},[g]);return(0,A.useEffect)(()=>(g(),v(),()=>_()),[g,v]),(0,A.useEffect)(()=>{let e=()=>{document.visibilityState===`visible`&&v()};return document.addEventListener(`visibilitychange`,e),()=>document.removeEventListener(`visibilitychange`,e)},[v]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(`button`,{className:`sigil-button`,title:`View & save this sigil`,onClick:()=>u(!0),"data-chakra":s,"aria-label":`Open Kairos Sigil`,children:(0,j.jsxs)(`span`,{className:`sigil-thumb`,"aria-hidden":`true`,inert:!0,children:[(0,j.jsx)(r,{ref:p,pulse:e,beat:n,stepPct:a,chakraDay:s,size:40,hashMode:`deterministic`,origin:d,onReady:n=>{n&&typeof n.pulse==`number`&&n.pulse!==e&&t(n.pulse)}},f),(0,j.jsx)(`span`,{className:`sigil-shield`,"aria-hidden":`true`})]})}),l&&(0,j.jsx)(S,{initialPulse:e,onClose:()=>u(!1)})]})},xe=(0,A.createContext)({});function Se(e){let t=(0,A.useRef)(null);return t.current===null&&(t.current=e()),t.current}var Ce=typeof window<`u`,we=Ce?A.useLayoutEffect:A.useEffect,Te=(0,A.createContext)(null);function Ee(e,t){e.indexOf(t)===-1&&e.push(t)}function De(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var Oe=(e,t,n)=>n>t?t:n<e?e:n,ke={},Ae=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function je(e){return typeof e==`object`&&!!e}var Me=e=>/^0[^.\s]+$/u.test(e);function Ne(e){let t;return()=>(t===void 0&&(t=e()),t)}var Pe=e=>e,Fe=(e,t)=>n=>t(e(n)),Ie=(...e)=>e.reduce(Fe),Le=(e,t,n)=>{let r=t-e;return r===0?1:(n-e)/r},Re=class{constructor(){this.subscriptions=[]}add(e){return Ee(this.subscriptions,e),()=>De(this.subscriptions,e)}notify(e,t,n){let r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){let r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}},ze=e=>e*1e3,Be=e=>e/1e3;function Ve(e,t){return t?e*(1e3/t):0}var He=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Ue=1e-7,We=12;function Ge(e,t,n,r,i){let a,o,s=0;do o=t+(n-t)/2,a=He(o,r,i)-e,a>0?n=o:t=o;while(Math.abs(a)>Ue&&++s<We);return o}function Ke(e,t,n,r){if(e===t&&n===r)return Pe;let i=t=>Ge(t,0,1,e,n);return e=>e===0||e===1?e:He(i(e),t,r)}var qe=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Je=e=>t=>1-e(1-t),Ye=Ke(.33,1.53,.69,.99),Xe=Je(Ye),Ze=qe(Xe),Qe=e=>(e*=2)<1?.5*Xe(e):.5*(2-2**(-10*(e-1))),$e=e=>1-Math.sin(Math.acos(e)),et=Je($e),tt=qe($e),nt=Ke(.42,0,1,1),rt=Ke(0,0,.58,1),it=Ke(.42,0,.58,1),at=e=>Array.isArray(e)&&typeof e[0]!=`number`,ot=e=>Array.isArray(e)&&typeof e[0]==`number`,st={linear:Pe,easeIn:nt,easeInOut:it,easeOut:rt,circIn:$e,circInOut:tt,circOut:et,backIn:Xe,backInOut:Ze,backOut:Ye,anticipate:Qe},ct=e=>typeof e==`string`,lt=e=>{if(ot(e)){e.length;let[t,n,r,i]=e;return Ke(t,n,r,i)}else if(ct(e))return st[e],`${e}`,st[e];return e},ut=[`setup`,`read`,`resolveKeyframes`,`preUpdate`,`update`,`preRender`,`render`,`postRender`],dt={value:null,addProjectionMetrics:null};function ft(e,t){let n=new Set,r=new Set,i=!1,a=!1,o=new WeakSet,s={delta:0,timestamp:0,isProcessing:!1},c=0;function l(t){o.has(t)&&(u.schedule(t),e()),c++,t(s)}let u={schedule:(e,t=!1,a=!1)=>{let s=a&&i?n:r;return t&&o.add(e),s.has(e)||s.add(e),e},cancel:e=>{r.delete(e),o.delete(e)},process:e=>{if(s=e,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),t&&dt.value&&dt.value.frameloop[t].push(c),c=0,n.clear(),i=!1,a&&(a=!1,u.process(e))}};return u}var pt=40;function mt(e,t){let n=!1,r=!0,i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=ut.reduce((e,n)=>(e[n]=ft(a,t?n:void 0),e),{}),{setup:s,read:c,resolveKeyframes:l,preUpdate:u,update:d,preRender:f,render:p,postRender:m}=o,h=()=>{let a=ke.useManualTiming?i.timestamp:performance.now();n=!1,ke.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(a-i.timestamp,pt),1)),i.timestamp=a,i.isProcessing=!0,s.process(i),c.process(i),l.process(i),u.process(i),d.process(i),f.process(i),p.process(i),m.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(h))},g=()=>{n=!0,r=!0,i.isProcessing||e(h)};return{schedule:ut.reduce((e,t)=>{let r=o[t];return e[t]=(e,t=!1,i=!1)=>(n||g(),r.schedule(e,t,i)),e},{}),cancel:e=>{for(let t=0;t<ut.length;t++)o[ut[t]].cancel(e)},state:i,steps:o}}var{schedule:K,cancel:ht,state:gt,steps:_t}=mt(typeof requestAnimationFrame<`u`?requestAnimationFrame:Pe,!0),vt;function yt(){vt=void 0}var bt={now:()=>(vt===void 0&&bt.set(gt.isProcessing||ke.useManualTiming?gt.timestamp:performance.now()),vt),set:e=>{vt=e,queueMicrotask(yt)}},xt={layout:0,mainThread:0,waapi:0},St=e=>t=>typeof t==`string`&&t.startsWith(e),Ct=St(`--`),wt=St(`var(--`),Tt=e=>wt(e)?Et.test(e.split(`/*`)[0].trim()):!1,Et=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Dt={test:e=>typeof e==`number`,parse:parseFloat,transform:e=>e},Ot={...Dt,transform:e=>Oe(0,1,e)},kt={...Dt,default:1},At=e=>Math.round(e*1e5)/1e5,jt=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Mt(e){return e==null}var Nt=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Pt=(e,t)=>n=>!!(typeof n==`string`&&Nt.test(n)&&n.startsWith(e)||t&&!Mt(n)&&Object.prototype.hasOwnProperty.call(n,t)),Ft=(e,t,n)=>r=>{if(typeof r!=`string`)return r;let[i,a,o,s]=r.match(jt);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(o),alpha:s===void 0?1:parseFloat(s)}},It=e=>Oe(0,255,e),Lt={...Dt,transform:e=>Math.round(It(e))},Rt={test:Pt(`rgb`,`red`),parse:Ft(`red`,`green`,`blue`),transform:({red:e,green:t,blue:n,alpha:r=1})=>`rgba(`+Lt.transform(e)+`, `+Lt.transform(t)+`, `+Lt.transform(n)+`, `+At(Ot.transform(r))+`)`};function zt(e){let t=``,n=``,r=``,i=``;return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}var Bt={test:Pt(`#`),parse:zt,transform:Rt.transform},Vt=e=>({test:t=>typeof t==`string`&&t.endsWith(e)&&t.split(` `).length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ht=Vt(`deg`),Ut=Vt(`%`),q=Vt(`px`),Wt=Vt(`vh`),Gt=Vt(`vw`),Kt=(()=>({...Ut,parse:e=>Ut.parse(e)/100,transform:e=>Ut.transform(e*100)}))(),qt={test:Pt(`hsl`,`hue`),parse:Ft(`hue`,`saturation`,`lightness`),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>`hsla(`+Math.round(e)+`, `+Ut.transform(At(t))+`, `+Ut.transform(At(n))+`, `+At(Ot.transform(r))+`)`},J={test:e=>Rt.test(e)||Bt.test(e)||qt.test(e),parse:e=>Rt.test(e)?Rt.parse(e):qt.test(e)?qt.parse(e):Bt.parse(e),transform:e=>typeof e==`string`?e:e.hasOwnProperty(`red`)?Rt.transform(e):qt.transform(e),getAnimatableNone:e=>{let t=J.parse(e);return t.alpha=0,J.transform(t)}},Jt=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Yt(e){return isNaN(e)&&typeof e==`string`&&(e.match(jt)?.length||0)+(e.match(Jt)?.length||0)>0}var Xt=`number`,Zt=`color`,Qt=`var`,$t=`var(`,en="${}",tn=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function nn(e){let t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[],a=0;return{values:n,split:t.replace(tn,e=>(J.test(e)?(r.color.push(a),i.push(Zt),n.push(J.parse(e))):e.startsWith($t)?(r.var.push(a),i.push(Qt),n.push(e)):(r.number.push(a),i.push(Xt),n.push(parseFloat(e))),++a,en)).split(en),indexes:r,types:i}}function rn(e){return nn(e).values}function an(e){let{split:t,types:n}=nn(e),r=t.length;return e=>{let i=``;for(let a=0;a<r;a++)if(i+=t[a],e[a]!==void 0){let t=n[a];t===Xt?i+=At(e[a]):t===Zt?i+=J.transform(e[a]):i+=e[a]}return i}}var on=e=>typeof e==`number`?0:J.test(e)?J.getAnimatableNone(e):e;function sn(e){let t=rn(e);return an(e)(t.map(on))}var cn={test:Yt,parse:rn,createTransformer:an,getAnimatableNone:sn};function ln(e,t,n){return n<0&&(n+=1),n>1&&--n,n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function un({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,a=0,o=0;if(!t)i=a=o=n;else{let r=n<.5?n*(1+t):n+t-n*t,s=2*n-r;i=ln(s,r,e+1/3),a=ln(s,r,e),o=ln(s,r,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function dn(e,t){return n=>n>0?t:e}var Y=(e,t,n)=>e+(t-e)*n,fn=(e,t,n)=>{let r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},pn=[Bt,Rt,qt],mn=e=>pn.find(t=>t.test(e));function hn(e){let t=mn(e);if(`${e}`,!t)return!1;let n=t.parse(e);return t===qt&&(n=un(n)),n}var gn=(e,t)=>{let n=hn(e),r=hn(t);if(!n||!r)return dn(e,t);let i={...n};return e=>(i.red=fn(n.red,r.red,e),i.green=fn(n.green,r.green,e),i.blue=fn(n.blue,r.blue,e),i.alpha=Y(n.alpha,r.alpha,e),Rt.transform(i))},_n=new Set([`none`,`hidden`]);function vn(e,t){return _n.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function yn(e,t){return n=>Y(e,t,n)}function bn(e){return typeof e==`number`?yn:typeof e==`string`?Tt(e)?dn:J.test(e)?gn:wn:Array.isArray(e)?xn:typeof e==`object`?J.test(e)?gn:Sn:dn}function xn(e,t){let n=[...e],r=n.length,i=e.map((e,n)=>bn(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function Sn(e,t){let n={...e,...t},r={};for(let i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=bn(e[i])(e[i],t[i]));return e=>{for(let t in r)n[t]=r[t](e);return n}}function Cn(e,t){let n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){let a=t.types[i],o=e.indexes[a][r[a]];n[i]=e.values[o]??0,r[a]++}return n}var wn=(e,t)=>{let n=cn.createTransformer(t),r=nn(e),i=nn(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?_n.has(e)&&!i.values.length||_n.has(t)&&!r.values.length?vn(e,t):Ie(xn(Cn(r,i),i.values),n):(`${e}${t}`,dn(e,t))};function Tn(e,t,n){return typeof e==`number`&&typeof t==`number`&&typeof n==`number`?Y(e,t,n):bn(e)(e,t)}var En=e=>{let t=({timestamp:t})=>e(t);return{start:(e=!0)=>K.update(t,e),stop:()=>ht(t),now:()=>gt.isProcessing?gt.timestamp:bt.now()}},Dn=(e,t,n=10)=>{let r=``,i=Math.max(Math.round(t/n),2);for(let t=0;t<i;t++)r+=Math.round(e(t/(i-1))*1e4)/1e4+`, `;return`linear(${r.substring(0,r.length-2)})`},On=2e4;function kn(e){let t=0,n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}function An(e,t=100,n){let r=n({...e,keyframes:[0,t]}),i=Math.min(kn(r),On);return{type:`keyframes`,ease:e=>r.next(i*e).value/t,duration:Be(i)}}var jn=5;function Mn(e,t,n){let r=Math.max(t-jn,0);return Ve(n-e(r),t-r)}var X={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Nn=.001;function Pn({duration:e=X.duration,bounce:t=X.bounce,velocity:n=X.velocity,mass:r=X.mass}){let i,a;X.maxDuration;let o=1-t;o=Oe(X.minDamping,X.maxDamping,o),e=Oe(X.minDuration,X.maxDuration,Be(e)),o<1?(i=t=>{let r=t*o,i=r*e,a=r-n,s=Ln(t,o),c=Math.exp(-i);return Nn-a/s*c},a=t=>{let r=t*o*e,a=r*n+n,s=o**2*t**2*e,c=Math.exp(-r),l=Ln(t**2,o);return(-i(t)+Nn>0?-1:1)*((a-s)*c)/l}):(i=t=>{let r=Math.exp(-t*e),i=(t-n)*e+1;return-Nn+r*i},a=t=>Math.exp(-t*e)*((n-t)*(e*e)));let s=5/e,c=In(i,a,s);if(e=ze(e),isNaN(c))return{stiffness:X.stiffness,damping:X.damping,duration:e};{let t=c**2*r;return{stiffness:t,damping:o*2*Math.sqrt(r*t),duration:e}}}var Fn=12;function In(e,t,n){let r=n;for(let n=1;n<Fn;n++)r-=e(r)/t(r);return r}function Ln(e,t){return e*Math.sqrt(1-t*t)}var Rn=[`duration`,`bounce`],zn=[`stiffness`,`damping`,`mass`];function Bn(e,t){return t.some(t=>e[t]!==void 0)}function Vn(e){let t={velocity:X.velocity,stiffness:X.stiffness,damping:X.damping,mass:X.mass,isResolvedFromDuration:!1,...e};if(!Bn(e,zn)&&Bn(e,Rn))if(e.visualDuration){let n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Oe(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:X.mass,stiffness:i,damping:a}}else{let n=Pn(e);t={...t,...n,mass:X.mass},t.isResolvedFromDuration=!0}return t}function Hn(e=X.visualDuration,t=X.bounce){let n=typeof e==`object`?e:{visualDuration:e,keyframes:[0,1],bounce:t},{restSpeed:r,restDelta:i}=n,a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],s={done:!1,value:a},{stiffness:c,damping:l,mass:u,duration:d,velocity:f,isResolvedFromDuration:p}=Vn({...n,velocity:-Be(n.velocity||0)}),m=f||0,h=l/(2*Math.sqrt(c*u)),g=o-a,_=Be(Math.sqrt(c/u)),v=Math.abs(g)<5;r||=v?X.restSpeed.granular:X.restSpeed.default,i||=v?X.restDelta.granular:X.restDelta.default;let y;if(h<1){let e=Ln(_,h);y=t=>o-Math.exp(-h*_*t)*((m+h*_*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}else if(h===1)y=e=>o-Math.exp(-_*e)*(g+(m+_*g)*e);else{let e=_*Math.sqrt(h*h-1);y=t=>{let n=Math.exp(-h*_*t),r=Math.min(e*t,300);return o-n*((m+h*_*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}let b={calculatedDuration:p&&d||null,next:e=>{let t=y(e);if(p)s.done=e>=d;else{let n=e===0?m:0;h<1&&(n=e===0?ze(m):Mn(y,e,t));let a=Math.abs(n)<=r,c=Math.abs(o-t)<=i;s.done=a&&c}return s.value=s.done?o:t,s},toString:()=>{let e=Math.min(kn(b),On),t=Dn(t=>b.next(e*t).value,e,30);return e+`ms `+t},toTransition:()=>{}};return b}Hn.applyToOptions=e=>{let t=An(e,100,Hn);return e.ease=t.ease,e.duration=ze(t.duration),e.type=`keyframes`,e};function Un({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:s,max:c,restDelta:l=.5,restSpeed:u}){let d=e[0],f={done:!1,value:d},p=e=>s!==void 0&&e<s||c!==void 0&&e>c,m=e=>s===void 0?c:c===void 0||Math.abs(s-e)<Math.abs(c-e)?s:c,h=n*t,g=d+h,_=o===void 0?g:o(g);_!==g&&(h=_-d);let v=e=>-h*Math.exp(-e/r),y=e=>_+v(e),b=e=>{let t=v(e),n=y(e);f.done=Math.abs(t)<=l,f.value=f.done?_:n},x,S,C=e=>{p(f.value)&&(x=e,S=Hn({keyframes:[f.value,m(f.value)],velocity:Mn(y,e,f.value),damping:i,stiffness:a,restDelta:l,restSpeed:u}))};return C(0),{calculatedDuration:null,next:e=>{let t=!1;return!S&&x===void 0&&(t=!0,b(e),C(e)),x!==void 0&&e>=x?S.next(e-x):(!t&&b(e),f)}}}function Wn(e,t,n){let r=[],i=n||ke.mix||Tn,a=e.length-1;for(let n=0;n<a;n++){let a=i(e[n],e[n+1]);t&&(a=Ie(Array.isArray(t)?t[n]||Pe:t,a)),r.push(a)}return r}function Gn(e,t,{clamp:n=!0,ease:r,mixer:i}={}){let a=e.length;if(t.length,a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];let o=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());let s=Wn(t,r,i),c=s.length,l=n=>{if(o&&n<e[0])return t[0];let r=0;if(c>1)for(;r<e.length-2&&!(n<e[r+1]);r++);let i=Le(e[r],e[r+1],n);return s[r](i)};return n?t=>l(Oe(e[0],e[a-1],t)):l}function Kn(e,t){let n=e[e.length-1];for(let r=1;r<=t;r++){let i=Le(0,t,r);e.push(Y(n,1,i))}}function qn(e){let t=[0];return Kn(t,e.length-1),t}function Jn(e,t){return e.map(e=>e*t)}function Yn(e,t){return e.map(()=>t||it).splice(0,e.length-1)}function Xn({duration:e=300,keyframes:t,times:n,ease:r=`easeInOut`}){let i=at(r)?r.map(lt):lt(r),a={done:!1,value:t[0]},o=Gn(Jn(n&&n.length===t.length?n:qn(t),e),t,{ease:Array.isArray(i)?i:Yn(t,i)});return{calculatedDuration:e,next:t=>(a.value=o(t),a.done=t>=e,a)}}var Zn=e=>e!==null;function Qn(e,{repeat:t,repeatType:n=`loop`},r,i=1){let a=e.filter(Zn),o=i<0||t&&n!==`loop`&&t%2==1?0:a.length-1;return!o||r===void 0?a[o]:r}var $n={decay:Un,inertia:Un,tween:Xn,keyframes:Xn,spring:Hn};function er(e){typeof e.type==`string`&&(e.type=$n[e.type])}var tr=class{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}},nr=e=>e/100,rr=class extends tr{constructor(e){super(),this.state=`idle`,this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:e}=this.options;e&&e.updatedAt!==bt.now()&&this.tick(bt.now()),this.isStopped=!0,this.state!==`idle`&&(this.teardown(),this.options.onStop?.())},xt.mainThread++,this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){let{options:e}=this;er(e);let{type:t=Xn,repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:a=0}=e,{keyframes:o}=e,s=t||Xn;s!==Xn&&typeof o[0]!=`number`&&(this.mixKeyframes=Ie(nr,Tn(o[0],o[1])),o=[0,100]);let c=s({...e,keyframes:o});i===`mirror`&&(this.mirroredGenerator=s({...e,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=kn(c));let{calculatedDuration:l}=c;this.calculatedDuration=l,this.resolvedDuration=l+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=c}updateTime(e){let t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime===null?this.currentTime=t:this.currentTime=this.holdTime}tick(e,t=!1){let{generator:n,totalDuration:r,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:s}=this;if(this.startTime===null)return n.next(0);let{delay:c=0,keyframes:l,repeat:u,repeatType:d,repeatDelay:f,type:p,onUpdate:m,finalKeyframe:h}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);let g=this.currentTime-c*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),this.state===`finished`&&this.holdTime===null&&(this.currentTime=r);let v=this.currentTime,y=n;if(u){let e=Math.min(this.currentTime,r)/o,t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),n===1&&t--,t=Math.min(t,u+1),t%2&&(d===`reverse`?(n=1-n,f&&(n-=f/o)):d===`mirror`&&(y=a)),v=Oe(0,1,n)*o}let b=_?{done:!1,value:l[0]}:y.next(v);i&&(b.value=i(b.value));let{done:x}=b;!_&&s!==null&&(x=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);let S=this.holdTime===null&&(this.state===`finished`||this.state===`running`&&x);return S&&p!==Un&&(b.value=Qn(l,this.options,h,this.speed)),m&&m(b.value),S&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return Be(this.calculatedDuration)}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+Be(e)}get time(){return Be(this.currentTime)}set time(e){e=ze(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(bt.now());let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Be(this.currentTime))}play(){if(this.isStopped)return;let{driver:e=En,startTime:t}=this.options;this.driver||=e(e=>this.tick(e)),this.options.onPlay?.();let n=this.driver.now();this.state===`finished`?(this.updateFinished(),this.startTime=n):this.holdTime===null?this.startTime||=t??n:this.startTime=n-this.holdTime,this.state===`finished`&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state=`running`,this.driver.start()}pause(){this.state=`paused`,this.updateTime(bt.now()),this.holdTime=this.currentTime}complete(){this.state!==`running`&&this.play(),this.state=`finished`,this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state=`finished`,this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state=`idle`,this.stopDriver(),this.startTime=this.holdTime=null,xt.mainThread--}stopDriver(){this.driver&&=(this.driver.stop(),void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type=`keyframes`,this.options.ease=`linear`,this.initAnimation()),this.driver?.stop(),e.observe(this)}};function ir(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}var ar=e=>e*180/Math.PI,or=e=>cr(ar(Math.atan2(e[1],e[0]))),sr={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:or,rotateZ:or,skewX:e=>ar(Math.atan(e[1])),skewY:e=>ar(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},cr=e=>(e%=360,e<0&&(e+=360),e),lr=or,ur=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),dr=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),fr={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ur,scaleY:dr,scale:e=>(ur(e)+dr(e))/2,rotateX:e=>cr(ar(Math.atan2(e[6],e[5]))),rotateY:e=>cr(ar(Math.atan2(-e[2],e[0]))),rotateZ:lr,rotate:lr,skewX:e=>ar(Math.atan(e[4])),skewY:e=>ar(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function pr(e){return e.includes(`scale`)?1:0}function mr(e,t){if(!e||e===`none`)return pr(t);let n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u),r,i;if(n)r=fr,i=n;else{let t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=sr,i=t}if(!i)return pr(t);let a=r[t],o=i[1].split(`,`).map(gr);return typeof a==`function`?a(o):o[a]}var hr=(e,t)=>{let{transform:n=`none`}=getComputedStyle(e);return mr(n,t)};function gr(e){return parseFloat(e.trim())}var _r=[`transformPerspective`,`x`,`y`,`z`,`translateX`,`translateY`,`translateZ`,`scale`,`scaleX`,`scaleY`,`rotate`,`rotateX`,`rotateY`,`rotateZ`,`skew`,`skewX`,`skewY`],vr=(()=>new Set(_r))(),yr=e=>e===Dt||e===q,br=new Set([`x`,`y`,`z`]),xr=_r.filter(e=>!br.has(e));function Sr(e){let t=[];return xr.forEach(n=>{let r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith(`scale`)?1:0))}),t}var Cr={width:({x:e},{paddingLeft:t=`0`,paddingRight:n=`0`})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t=`0`,paddingBottom:n=`0`})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>mr(t,`x`),y:(e,{transform:t})=>mr(t,`y`)};Cr.translateX=Cr.x,Cr.translateY=Cr.y;var wr=new Set,Tr=!1,Er=!1,Dr=!1;function Or(){if(Er){let e=Array.from(wr).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{let t=Sr(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=n.get(e);t&&t.forEach(([t,n])=>{e.getValue(t)?.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{e.suspendedScrollY!==void 0&&window.scrollTo(0,e.suspendedScrollY)})}Er=!1,Tr=!1,wr.forEach(e=>e.complete(Dr)),wr.clear()}function kr(){wr.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Er=!0)})}function Ar(){Dr=!0,kr(),Or(),Dr=!1}var jr=class{constructor(e,t,n,r,i,a=!1){this.state=`pending`,this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=a}scheduleResolve(){this.state=`scheduled`,this.isAsync?(wr.add(this),Tr||(Tr=!0,K.read(kr),K.resolveKeyframes(Or))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(e[0]===null){let i=r?.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(n&&t){let r=n.readValue(t,a);r!=null&&(e[0]=r)}e[0]===void 0&&(e[0]=a),r&&i===void 0&&r.set(e[0])}ir(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state=`complete`,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),wr.delete(this)}cancel(){this.state===`scheduled`&&(wr.delete(this),this.state=`pending`)}resume(){this.state===`pending`&&this.scheduleResolve()}},Mr=e=>e.startsWith(`--`);function Nr(e,t,n){Mr(t)?e.style.setProperty(t,n):e.style[t]=n}var Pr=Ne(()=>window.ScrollTimeline!==void 0),Fr={};function Ir(e,t){let n=Ne(e);return()=>Fr[t]??n()}var Lr=Ir(()=>{try{document.createElement(`div`).animate({opacity:0},{easing:`linear(0, 1)`})}catch{return!1}return!0},`linearEasing`),Rr=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,zr={linear:`linear`,ease:`ease`,easeIn:`ease-in`,easeOut:`ease-out`,easeInOut:`ease-in-out`,circIn:Rr([0,.65,.55,1]),circOut:Rr([.55,0,1,.45]),backIn:Rr([.31,.01,.66,-.59]),backOut:Rr([.33,1.53,.69,.99])};function Br(e,t){if(e)return typeof e==`function`?Lr()?Dn(e,t):`ease-out`:ot(e)?Rr(e):Array.isArray(e)?e.map(e=>Br(e,t)||zr.easeOut):zr[e]}function Vr(e,t,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o=`loop`,ease:s=`easeOut`,times:c}={},l=void 0){let u={[t]:n};c&&(u.offset=c);let d=Br(s,i);Array.isArray(d)&&(u.easing=d),dt.value&&xt.waapi++;let f={delay:r,duration:i,easing:Array.isArray(d)?`linear`:d,fill:`both`,iterations:a+1,direction:o===`reverse`?`alternate`:`normal`};l&&(f.pseudoElement=l);let p=e.animate(u,f);return dt.value&&p.finished.finally(()=>{xt.waapi--}),p}function Hr(e){return typeof e==`function`&&`applyToOptions`in e}function Ur({type:e,...t}){return Hr(e)&&Lr()?e.applyToOptions(t):(t.duration??=300,t.ease??=`easeOut`,t)}var Wr=class extends tr{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;let{element:t,name:n,keyframes:r,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:o,onComplete:s}=e;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=e,e.type;let c=Ur(e);this.animation=Vr(t,n,r,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){let e=Qn(r,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(e):Nr(t,n,e),this.animation.cancel()}s?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state===`finished`&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:e}=this;e===`idle`||e===`finished`||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){let e=this.animation.effect?.getComputedTiming?.().duration||0;return Be(Number(e))}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+Be(e)}get time(){return Be(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ze(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime===null?this.animation.playState:`finished`}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:`linear`}),this.animation.onfinish=null,e&&Pr()?(this.animation.timeline=e,Pe):t(this)}},Gr={anticipate:Qe,backInOut:Ze,circInOut:tt};function Kr(e){return e in Gr}function qr(e){typeof e.ease==`string`&&Kr(e.ease)&&(e.ease=Gr[e.ease])}var Jr=10,Yr=class extends Wr{constructor(e){qr(e),er(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){let{motionValue:t,onUpdate:n,onComplete:r,element:i,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}let o=new rr({...a,autoplay:!1}),s=ze(this.finishedTime??this.time);t.setWithVelocity(o.sample(s-Jr).value,o.sample(s).value,Jr),o.stop()}},Xr=(e,t)=>t===`zIndex`?!1:!!(typeof e==`number`||Array.isArray(e)||typeof e==`string`&&(cn.test(e)||e===`0`)&&!e.startsWith(`url(`));function Zr(e){let t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Qr(e,t,n,r){let i=e[0];if(i===null)return!1;if(t===`display`||t===`visibility`)return!0;let a=e[e.length-1],o=Xr(i,t),s=Xr(a,t);return`${t}${i}${a}${o?a:i}`,!o||!s?!1:Zr(e)||(n===`spring`||Hr(n))&&r}function $r(e){e.duration=0,e.type=`keyframes`}var ei=new Set([`opacity`,`clipPath`,`filter`,`transform`]),ti=Ne(()=>Object.hasOwnProperty.call(Element.prototype,`animate`));function ni(e){let{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:a,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:s,transformTemplate:c}=t.owner.getProps();return ti()&&n&&ei.has(n)&&(n!==`transform`||!c)&&!s&&!r&&i!==`mirror`&&a!==0&&o!==`inertia`}var ri=40,ii=class extends tr{constructor({autoplay:e=!0,delay:t=0,type:n=`keyframes`,repeat:r=0,repeatDelay:i=0,repeatType:a=`loop`,keyframes:o,name:s,motionValue:c,element:l,...u}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=bt.now();let d={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:i,repeatType:a,name:s,motionValue:c,element:l,...u};this.keyframeResolver=new(l?.KeyframeResolver||jr)(o,(e,t,n)=>this.onKeyframesResolved(e,t,d,!n),s,c,l),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;let{name:i,type:a,velocity:o,delay:s,isHandoff:c,onUpdate:l}=n;this.resolvedAt=bt.now(),Qr(e,i,a,o)||((ke.instantAnimations||!s)&&l?.(Qn(e,n,t)),e[0]=e[e.length-1],$r(n),n.repeat=0);let u={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>ri?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},d=!c&&ni(u)?new Yr({...u,element:u.motionValue.owner.current}):new rr(u);d.finished.then(()=>this.notifyFinished()).catch(Pe),this.pendingTimeline&&=(this.stopTimeline=d.attachTimeline(this.pendingTimeline),void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Ar()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}},ai=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function oi(e){let t=ai.exec(e);if(!t)return[,];let[,n,r,i]=t;return[`--${n??r}`,i]}function si(e,t,n=1){`${e}`;let[r,i]=oi(e);if(!r)return;let a=window.getComputedStyle(t).getPropertyValue(r);if(a){let e=a.trim();return Ae(e)?parseFloat(e):e}return Tt(i)?si(i,t,n+1):i}function ci(e,t){return e?.[t]??e?.default??e}var li=new Set([`width`,`height`,`top`,`left`,`right`,`bottom`,..._r]),ui={test:e=>e===`auto`,parse:e=>e},di=e=>t=>t.test(e),fi=[Dt,q,Ut,Ht,Gt,Wt,ui],pi=e=>fi.find(di(e));function mi(e){return typeof e==`number`?e===0:e===null?!0:e===`none`||e===`0`||Me(e)}var hi=new Set([`brightness`,`contrast`,`saturate`,`opacity`]);function gi(e){let[t,n]=e.slice(0,-1).split(`(`);if(t===`drop-shadow`)return e;let[r]=n.match(jt)||[];if(!r)return e;let i=n.replace(r,``),a=hi.has(t)?1:0;return r!==n&&(a*=100),t+`(`+a+i+`)`}var _i=/\b([a-z-]*)\(.*?\)/gu,vi={...cn,getAnimatableNone:e=>{let t=e.match(_i);return t?t.map(gi).join(` `):e}},yi={...Dt,transform:Math.round},bi={borderWidth:q,borderTopWidth:q,borderRightWidth:q,borderBottomWidth:q,borderLeftWidth:q,borderRadius:q,radius:q,borderTopLeftRadius:q,borderTopRightRadius:q,borderBottomRightRadius:q,borderBottomLeftRadius:q,width:q,maxWidth:q,height:q,maxHeight:q,top:q,right:q,bottom:q,left:q,padding:q,paddingTop:q,paddingRight:q,paddingBottom:q,paddingLeft:q,margin:q,marginTop:q,marginRight:q,marginBottom:q,marginLeft:q,backgroundPositionX:q,backgroundPositionY:q,rotate:Ht,rotateX:Ht,rotateY:Ht,rotateZ:Ht,scale:kt,scaleX:kt,scaleY:kt,scaleZ:kt,skew:Ht,skewX:Ht,skewY:Ht,distance:q,translateX:q,translateY:q,translateZ:q,x:q,y:q,z:q,perspective:q,transformPerspective:q,opacity:Ot,originX:Kt,originY:Kt,originZ:q,zIndex:yi,fillOpacity:Ot,strokeOpacity:Ot,numOctaves:yi},xi={...bi,color:J,backgroundColor:J,outlineColor:J,fill:J,stroke:J,borderColor:J,borderTopColor:J,borderRightColor:J,borderBottomColor:J,borderLeftColor:J,filter:vi,WebkitFilter:vi},Si=e=>xi[e];function Ci(e,t){let n=Si(e);return n!==vi&&(n=cn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}var wi=new Set([`auto`,`none`,`0`]);function Ti(e,t,n){let r=0,i;for(;r<e.length&&!i;){let t=e[r];typeof t==`string`&&!wi.has(t)&&nn(t).values.length&&(i=e[r]),r++}if(i&&n)for(let r of t)e[r]=Ci(n,i)}var Ei=class extends jr{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let n=0;n<e.length;n++){let r=e[n];if(typeof r==`string`&&(r=r.trim(),Tt(r))){let i=si(r,t.current);i!==void 0&&(e[n]=i),n===e.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!li.has(n)||e.length!==2)return;let[r,i]=e,a=pi(r),o=pi(i);if(a!==o)if(yr(a)&&yr(o))for(let t=0;t<e.length;t++){let n=e[t];typeof n==`string`&&(e[t]=parseFloat(n))}else Cr[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,n=[];for(let t=0;t<e.length;t++)(e[t]===null||mi(e[t]))&&n.push(t);n.length&&Ti(e,n,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n===`height`&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Cr[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let r=t[t.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){let{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;let r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);let i=n.length-1,a=n[i];n[i]=Cr[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([t,n])=>{e.getValue(t).set(n)}),this.resolveNoneKeyframes()}};function Di(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e==`string`){let r=document;t&&(r=t.current);let i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}var Oi=(e,t)=>t&&typeof e==`number`?t.transform(e):e;function ki(e){return je(e)&&`offsetHeight`in e}var Ai=30,ji=e=>!isNaN(parseFloat(e)),Mi={current:void 0},Ni=class{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{let t=bt.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let e of this.dependents)e.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=bt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ji(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on(`change`,e)}on(e,t){this.events[e]||(this.events[e]=new Re);let n=this.events[e].add(t);return e===`change`?()=>{n(),K.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||=new Set,this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Mi.current&&Mi.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){let e=bt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ai)return 0;let t=Math.min(this.updatedAt-this.prevUpdatedAt,Ai);return Ve(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}};function Pi(e,t){return new Ni(e,t)}var{schedule:Fi,cancel:Ii}=mt(queueMicrotask,!1),Li={x:!1,y:!1};function Ri(){return Li.x||Li.y}function zi(e){return e===`x`||e===`y`?Li[e]?null:(Li[e]=!0,()=>{Li[e]=!1}):Li.x||Li.y?null:(Li.x=Li.y=!0,()=>{Li.x=Li.y=!1})}function Bi(e,t){let n=Di(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function Vi(e){return!(e.pointerType===`touch`||Ri())}function Hi(e,t,n={}){let[r,i,a]=Bi(e,n),o=e=>{if(!Vi(e))return;let{target:n}=e,r=t(n,e);if(typeof r!=`function`||!n)return;let a=e=>{Vi(e)&&(r(e),n.removeEventListener(`pointerleave`,a))};n.addEventListener(`pointerleave`,a,i)};return r.forEach(e=>{e.addEventListener(`pointerenter`,o,i)}),a}var Ui=(e,t)=>t?e===t?!0:Ui(e,t.parentElement):!1,Wi=e=>e.pointerType===`mouse`?typeof e.button!=`number`||e.button<=0:e.isPrimary!==!1,Gi=new Set([`BUTTON`,`INPUT`,`SELECT`,`TEXTAREA`,`A`]);function Ki(e){return Gi.has(e.tagName)||e.tabIndex!==-1}var qi=new WeakSet;function Ji(e){return t=>{t.key===`Enter`&&e(t)}}function Yi(e,t){e.dispatchEvent(new PointerEvent(`pointer`+t,{isPrimary:!0,bubbles:!0}))}var Xi=(e,t)=>{let n=e.currentTarget;if(!n)return;let r=Ji(()=>{if(qi.has(n))return;Yi(n,`down`);let e=Ji(()=>{Yi(n,`up`)});n.addEventListener(`keyup`,e,t),n.addEventListener(`blur`,()=>Yi(n,`cancel`),t)});n.addEventListener(`keydown`,r,t),n.addEventListener(`blur`,()=>n.removeEventListener(`keydown`,r),t)};function Zi(e){return Wi(e)&&!Ri()}function Qi(e,t,n={}){let[r,i,a]=Bi(e,n),o=e=>{let r=e.currentTarget;if(!Zi(e))return;qi.add(r);let a=t(r,e),o=(e,t)=>{window.removeEventListener(`pointerup`,s),window.removeEventListener(`pointercancel`,c),qi.has(r)&&qi.delete(r),Zi(e)&&typeof a==`function`&&a(e,{success:t})},s=e=>{o(e,r===window||r===document||n.useGlobalTarget||Ui(r,e.target))},c=e=>{o(e,!1)};window.addEventListener(`pointerup`,s,i),window.addEventListener(`pointercancel`,c,i)};return r.forEach(e=>{(n.useGlobalTarget?window:e).addEventListener(`pointerdown`,o,i),ki(e)&&(e.addEventListener(`focus`,e=>Xi(e,i)),!Ki(e)&&!e.hasAttribute(`tabindex`)&&(e.tabIndex=0))}),a}function $i(e){return je(e)&&`ownerSVGElement`in e}function ea(e){return $i(e)&&e.tagName===`svg`}var ta=e=>!!(e&&e.getVelocity),na=[...fi,J,cn],ra=e=>na.find(di(e)),ia=(0,A.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:`never`});function aa(e,t){if(typeof e==`function`)return e(t);e!=null&&(e.current=t)}function oa(...e){return t=>{let n=!1,r=e.map(e=>{let r=aa(e,t);return!n&&typeof r==`function`&&(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];typeof n==`function`?n():aa(e[t],null)}}}}function sa(...e){return A.useCallback(oa(...e),e)}var ca=class extends A.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,n=ki(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}};function la({children:e,isPresent:t,anchorX:n,root:r}){let i=(0,A.useId)(),a=(0,A.useRef)(null),o=(0,A.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:s}=(0,A.useContext)(ia),c=sa(a,e?.ref);return(0,A.useInsertionEffect)(()=>{let{width:e,height:c,top:l,left:u,right:d}=o.current;if(t||!a.current||!e||!c)return;let f=n===`left`?`left: ${u}`:`right: ${d}`;a.current.dataset.motionPopId=i;let p=document.createElement(`style`);s&&(p.nonce=s);let m=r??document.head;return m.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${c}px !important;
            ${f}px !important;
            top: ${l}px !important;
          }
        `),()=>{m.contains(p)&&m.removeChild(p)}},[t]),(0,j.jsx)(ca,{isPresent:t,childRef:a,sizeRef:o,children:A.cloneElement(e,{ref:c})})}var ua=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:s,root:c})=>{let l=Se(da),u=(0,A.useId)(),d=!0,f=(0,A.useMemo)(()=>(d=!1,{id:u,initial:t,isPresent:n,custom:i,onExitComplete:e=>{l.set(e,!0);for(let e of l.values())if(!e)return;r&&r()},register:e=>(l.set(e,!1),()=>l.delete(e))}),[n,l,r]);return a&&d&&(f={...f}),(0,A.useMemo)(()=>{l.forEach((e,t)=>l.set(t,!1))},[n]),A.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o===`popLayout`&&(e=(0,j.jsx)(la,{isPresent:n,anchorX:s,root:c,children:e})),(0,j.jsx)(Te.Provider,{value:f,children:e})};function da(){return new Map}function fa(e=!0){let t=(0,A.useContext)(Te);if(t===null)return[!0,null];let{isPresent:n,onExitComplete:r,register:i}=t,a=(0,A.useId)();(0,A.useEffect)(()=>{if(e)return i(a)},[e]);let o=(0,A.useCallback)(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,o]:[!0]}var pa=e=>e.key||``;function ma(e){let t=[];return A.Children.forEach(e,e=>{(0,A.isValidElement)(e)&&t.push(e)}),t}var ha=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a=`sync`,propagate:o=!1,anchorX:s=`left`,root:c})=>{let[l,u]=fa(o),d=(0,A.useMemo)(()=>ma(e),[e]),f=o&&!l?[]:d.map(pa),p=(0,A.useRef)(!0),m=(0,A.useRef)(d),h=Se(()=>new Map),[g,_]=(0,A.useState)(d),[v,y]=(0,A.useState)(d);we(()=>{p.current=!1,m.current=d;for(let e=0;e<v.length;e++){let t=pa(v[e]);f.includes(t)?h.delete(t):h.get(t)!==!0&&h.set(t,!1)}},[v,f.length,f.join(`-`)]);let b=[];if(d!==g){let e=[...d];for(let t=0;t<v.length;t++){let n=v[t],r=pa(n);f.includes(r)||(e.splice(t,0,n),b.push(n))}return a===`wait`&&b.length&&(e=b),y(ma(e)),_(d),null}let{forceRender:x}=(0,A.useContext)(xe);return(0,j.jsx)(j.Fragment,{children:v.map(e=>{let g=pa(e),_=o&&!l?!1:d===v||f.includes(g);return(0,j.jsx)(ua,{isPresent:_,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:a,root:c,onExitComplete:_?void 0:()=>{if(h.has(g))h.set(g,!0);else return;let e=!0;h.forEach(t=>{t||(e=!1)}),e&&(x?.(),y(m.current),o&&u?.(),r&&r())},anchorX:s,children:e},g)})})},ga=(0,A.createContext)({strict:!1}),_a={animation:[`animate`,`variants`,`whileHover`,`whileTap`,`exit`,`whileInView`,`whileFocus`,`whileDrag`],exit:[`exit`],drag:[`drag`,`dragControls`],focus:[`whileFocus`],hover:[`whileHover`,`onHoverStart`,`onHoverEnd`],tap:[`whileTap`,`onTap`,`onTapStart`,`onTapCancel`],pan:[`onPan`,`onPanStart`,`onPanSessionStart`,`onPanEnd`],inView:[`whileInView`,`onViewportEnter`,`onViewportLeave`],layout:[`layout`,`layoutId`]},va={};for(let e in _a)va[e]={isEnabled:t=>_a[e].some(e=>!!t[e])};function ya(e){for(let t in e)va[t]={...va[t],...e[t]}}var ba=new Set(`animate.exit.variants.initial.style.values.variants.transition.transformTemplate.custom.inherit.onBeforeLayoutMeasure.onAnimationStart.onAnimationComplete.onUpdate.onDragStart.onDrag.onDragEnd.onMeasureDragConstraints.onDirectionLock.onDragTransitionEnd._dragX._dragY.onHoverStart.onHoverEnd.onViewportEnter.onViewportLeave.globalTapTarget.ignoreStrict.viewport`.split(`.`));function xa(e){return e.startsWith(`while`)||e.startsWith(`drag`)&&e!==`draggable`||e.startsWith(`layout`)||e.startsWith(`onTap`)||e.startsWith(`onPan`)||e.startsWith(`onLayout`)||ba.has(e)}var Sa=a({default:()=>Ca}),Ca,wa=y((()=>{throw Ca={},Error(`Could not resolve "@emotion/is-prop-valid" imported by "framer-motion". Is it installed?`)})),Ta=e=>!xa(e);function Ea(e){typeof e==`function`&&(Ta=t=>t.startsWith(`on`)?!xa(t):e(t))}try{Ea((wa(),t(Sa)).default)}catch{}function Da(e,t,n){let r={};for(let i in e)i===`values`&&typeof e.values==`object`||(Ta(i)||n===!0&&xa(i)||!t&&!xa(i)||e.draggable&&i.startsWith(`onDrag`))&&(r[i]=e[i]);return r}var Oa=(0,A.createContext)({});function ka(e){return typeof e==`object`&&!!e&&typeof e.start==`function`}function Aa(e){return typeof e==`string`||Array.isArray(e)}var ja=[`animate`,`whileInView`,`whileFocus`,`whileHover`,`whileTap`,`whileDrag`,`exit`],Ma=[`initial`,...ja];function Na(e){return ka(e.animate)||Ma.some(t=>Aa(e[t]))}function Pa(e){return!!(Na(e)||e.variants)}function Fa(e,t){if(Na(e)){let{initial:t,animate:n}=e;return{initial:t===!1||Aa(t)?t:void 0,animate:Aa(n)?n:void 0}}return e.inherit===!1?{}:t}function Ia(e){let{initial:t,animate:n}=Fa(e,(0,A.useContext)(Oa));return(0,A.useMemo)(()=>({initial:t,animate:n}),[La(t),La(n)])}function La(e){return Array.isArray(e)?e.join(` `):e}function Ra(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var za={correct:(e,t)=>{if(!t.target)return e;if(typeof e==`string`)if(q.test(e))e=parseFloat(e);else return e;return`${Ra(e,t.target.x)}% ${Ra(e,t.target.y)}%`}},Ba={correct:(e,{treeScale:t,projectionDelta:n})=>{let r=e,i=cn.parse(e);if(i.length>5)return r;let a=cn.createTransformer(e),o=typeof i[0]==`number`?0:1,s=n.x.scale*t.x,c=n.y.scale*t.y;i[0+o]/=s,i[1+o]/=c;let l=Y(s,c,.5);return typeof i[2+o]==`number`&&(i[2+o]/=l),typeof i[3+o]==`number`&&(i[3+o]/=l),a(i)}},Va={borderRadius:{...za,applyTo:[`borderTopLeftRadius`,`borderTopRightRadius`,`borderBottomLeftRadius`,`borderBottomRightRadius`]},borderTopLeftRadius:za,borderTopRightRadius:za,borderBottomLeftRadius:za,borderBottomRightRadius:za,boxShadow:Ba};function Ha(e,{layout:t,layoutId:n}){return vr.has(e)||e.startsWith(`origin`)||(t||n!==void 0)&&(!!Va[e]||e===`opacity`)}var Ua={x:`translateX`,y:`translateY`,z:`translateZ`,transformPerspective:`perspective`},Wa=_r.length;function Ga(e,t,n){let r=``,i=!0;for(let a=0;a<Wa;a++){let o=_r[a],s=e[o];if(s===void 0)continue;let c=!0;if(c=typeof s==`number`?s===(o.startsWith(`scale`)?1:0):parseFloat(s)===0,!c||n){let e=Oi(s,bi[o]);if(!c){i=!1;let t=Ua[o]||o;r+=`${t}(${e}) `}n&&(t[o]=e)}}return r=r.trim(),n?r=n(t,i?``:r):i&&(r=`none`),r}function Ka(e,t,n){let{style:r,vars:i,transformOrigin:a}=e,o=!1,s=!1;for(let e in t){let n=t[e];if(vr.has(e)){o=!0;continue}else if(Ct(e)){i[e]=n;continue}else{let t=Oi(n,bi[e]);e.startsWith(`origin`)?(s=!0,a[e]=t):r[e]=t}}if(t.transform||(o||n?r.transform=Ga(t,e.transform,n):r.transform&&=`none`),s){let{originX:e=`50%`,originY:t=`50%`,originZ:n=0}=a;r.transformOrigin=`${e} ${t} ${n}`}}var qa=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ja(e,t,n){for(let r in t)!ta(t[r])&&!Ha(r,n)&&(e[r]=t[r])}function Ya({transformTemplate:e},t){return(0,A.useMemo)(()=>{let n=qa();return Ka(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Xa(e,t){let n=e.style||{},r={};return Ja(r,n,e),Object.assign(r,Ya(e,t)),r}function Za(e,t){let n={},r=Xa(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout=`none`,r.touchAction=e.drag===!0?`none`:`pan-${e.drag===`x`?`y`:`x`}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}var Qa={offset:`stroke-dashoffset`,array:`stroke-dasharray`},$a={offset:`strokeDashoffset`,array:`strokeDasharray`};function eo(e,t,n=1,r=0,i=!0){e.pathLength=1;let a=i?Qa:$a;e[a.offset]=q.transform(-r);let o=q.transform(t),s=q.transform(n);e[a.array]=`${o} ${s}`}function to(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...s},c,l,u){if(Ka(e,s,l),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:d,style:f}=e;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??`50% 50%`,delete d.transformOrigin),f.transform&&(f.transformBox=u?.transformBox??`fill-box`,delete d.transformBox),t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&eo(d,i,a,o,!1)}var no=()=>({...qa(),attrs:{}}),ro=e=>typeof e==`string`&&e.toLowerCase()===`svg`;function io(e,t,n,r){let i=(0,A.useMemo)(()=>{let n=no();return to(n,t,ro(r),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){let t={};Ja(t,e.style,e),i.style={...t,...i.style}}return i}var ao=[`animate`,`circle`,`defs`,`desc`,`ellipse`,`g`,`image`,`line`,`filter`,`marker`,`mask`,`metadata`,`path`,`pattern`,`polygon`,`polyline`,`rect`,`stop`,`switch`,`symbol`,`svg`,`text`,`tspan`,`use`,`view`];function oo(e){return typeof e!=`string`||e.includes(`-`)?!1:!!(ao.indexOf(e)>-1||/[A-Z]/u.test(e))}function so(e,t,n,{latestValues:r},i,a=!1){let o=(oo(e)?io:Za)(t,r,i,e),s=Da(t,typeof e==`string`,a),c=e===A.Fragment?{}:{...s,...o,ref:n},{children:l}=t,u=(0,A.useMemo)(()=>ta(l)?l.get():l,[l]);return(0,A.createElement)(e,{...c,children:u})}function co(e){let t=[{},{}];return e?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function lo(e,t,n,r){if(typeof t==`function`){let[i,a]=co(r);t=t(n===void 0?e.custom:n,i,a)}if(typeof t==`string`&&(t=e.variants&&e.variants[t]),typeof t==`function`){let[i,a]=co(r);t=t(n===void 0?e.custom:n,i,a)}return t}function uo(e){return ta(e)?e.get():e}function fo({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:po(n,r,i,e),renderState:t()}}function po(e,t,n,r){let i={},a=r(e,{});for(let e in a)i[e]=uo(a[e]);let{initial:o,animate:s}=e,c=Na(e),l=Pa(e);t&&l&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),s===void 0&&(s=t.animate));let u=n?n.initial===!1:!1;u||=o===!1;let d=u?s:o;if(d&&typeof d!=`boolean`&&!ka(d)){let t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){let r=lo(e,t[n]);if(r){let{transitionEnd:e,transition:t,...n}=r;for(let e in n){let t=n[e];if(Array.isArray(t)){let e=u?t.length-1:0;t=t[e]}t!==null&&(i[e]=t)}for(let t in e)i[t]=e[t]}}}return i}var mo=e=>(t,n)=>{let r=(0,A.useContext)(Oa),i=(0,A.useContext)(Te),a=()=>fo(e,t,r,i);return n?a():Se(a)};function ho(e,t,n){let{style:r}=e,i={};for(let a in r)(ta(r[a])||t.style&&ta(t.style[a])||Ha(a,e)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}var go=mo({scrapeMotionValuesFromProps:ho,createRenderState:qa});function _o(e,t,n){let r=ho(e,t,n);for(let n in e)if(ta(e[n])||ta(t[n])){let t=_r.indexOf(n)===-1?n:`attr`+n.charAt(0).toUpperCase()+n.substring(1);r[t]=e[n]}return r}var vo=mo({scrapeMotionValuesFromProps:_o,createRenderState:no}),yo=Symbol.for(`motionComponentSymbol`);function bo(e){return e&&typeof e==`object`&&Object.prototype.hasOwnProperty.call(e,`current`)}function xo(e,t,n){return(0,A.useCallback)(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n==`function`?n(r):bo(n)&&(n.current=r))},[t])}var So=e=>e.replace(/([a-z])([A-Z])/gu,`$1-$2`).toLowerCase(),Co=`data-`+So(`framerAppearId`),wo=(0,A.createContext)({});function To(e,t,n,r,i){let{visualElement:a}=(0,A.useContext)(Oa),o=(0,A.useContext)(ga),s=(0,A.useContext)(Te),c=(0,A.useContext)(ia).reducedMotion,l=(0,A.useRef)(null);r||=o.renderer,!l.current&&r&&(l.current=r(e,{visualState:t,parent:a,props:n,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:c}));let u=l.current,d=(0,A.useContext)(wo);u&&!u.projection&&i&&(u.type===`html`||u.type===`svg`)&&Eo(l.current,n,i,d);let f=(0,A.useRef)(!1);(0,A.useInsertionEffect)(()=>{u&&f.current&&u.update(n,s)});let p=n[Co],m=(0,A.useRef)(!!p&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return we(()=>{u&&(f.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),m.current&&u.animationState&&u.animationState.animateChanges())}),(0,A.useEffect)(()=>{u&&(!m.current&&u.animationState&&u.animationState.animateChanges(),m.current&&=(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),!1),u.enteringChildren=void 0)}),u}function Eo(e,t,n,r){let{layoutId:i,layout:a,drag:o,dragConstraints:s,layoutScroll:c,layoutRoot:l,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t[`data-framer-portal-id`]?void 0:Do(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||s&&bo(s),visualElement:e,animationType:typeof a==`string`?a:`both`,initialPromotionConfig:r,crossfade:u,layoutScroll:c,layoutRoot:l})}function Do(e){if(e)return e.options.allowProjection===!1?Do(e.parent):e.projection}function Oo(e,{forwardMotionProps:t=!1}={},n,r){n&&ya(n);let i=oo(e)?vo:go;function a(a,o){let s,c={...(0,A.useContext)(ia),...a,layoutId:ko(a)},{isStatic:l}=c,u=Ia(a),d=i(a,l);if(!l&&Ce){Ao(c,n);let t=jo(c);s=t.MeasureLayout,u.visualElement=To(e,d,c,r,t.ProjectionNode)}return(0,j.jsxs)(Oa.Provider,{value:u,children:[s&&u.visualElement?(0,j.jsx)(s,{visualElement:u.visualElement,...c}):null,so(e,a,xo(d,u.visualElement,o),d,l,t)]})}a.displayName=`motion.${typeof e==`string`?e:`create(${e.displayName??e.name??``})`}`;let o=(0,A.forwardRef)(a);return o[yo]=e,o}function ko({layoutId:e}){let t=(0,A.useContext)(xe).id;return t&&e!==void 0?t+`-`+e:e}function Ao(e,t){(0,A.useContext)(ga).strict}function jo(e){let{drag:t,layout:n}=va;if(!t&&!n)return{};let r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Mo(e,t){if(typeof Proxy>`u`)return Oo;let n=new Map,r=(n,r)=>Oo(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(i,a)=>a===`create`?r:(n.has(a)||n.set(a,Oo(a,void 0,e,t)),n.get(a))})}function No({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Po({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Fo(e,t){if(!t)return e;let n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Io(e){return e===void 0||e===1}function Lo({scale:e,scaleX:t,scaleY:n}){return!Io(e)||!Io(t)||!Io(n)}function Ro(e){return Lo(e)||zo(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function zo(e){return Bo(e.x)||Bo(e.y)}function Bo(e){return e&&e!==`0%`}function Vo(e,t,n){return n+t*(e-n)}function Ho(e,t,n,r,i){return i!==void 0&&(e=Vo(e,i,r)),Vo(e,n,r)+t}function Uo(e,t=0,n=1,r,i){e.min=Ho(e.min,t,n,r,i),e.max=Ho(e.max,t,n,r,i)}function Wo(e,{x:t,y:n}){Uo(e.x,t.translate,t.scale,t.originPoint),Uo(e.y,n.translate,n.scale,n.originPoint)}var Go=.999999999999,Ko=1.0000000000001;function qo(e,t,n,r=!1){let i=n.length;if(!i)return;t.x=t.y=1;let a,o;for(let s=0;s<i;s++){a=n[s],o=a.projectionDelta;let{visualElement:i}=a.options;i&&i.props.style&&i.props.style.display===`contents`||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Xo(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Wo(e,o)),r&&Ro(a.latestValues)&&Xo(e,a.latestValues))}t.x<Ko&&t.x>Go&&(t.x=1),t.y<Ko&&t.y>Go&&(t.y=1)}function Jo(e,t){e.min+=t,e.max+=t}function Yo(e,t,n,r,i=.5){Uo(e,t,n,Y(e.min,e.max,i),r)}function Xo(e,t){Yo(e.x,t.x,t.scaleX,t.scale,t.originX),Yo(e.y,t.y,t.scaleY,t.scale,t.originY)}function Zo(e,t){return No(Fo(e.getBoundingClientRect(),t))}function Qo(e,t,n){let r=Zo(e,n),{scroll:i}=t;return i&&(Jo(r.x,i.offset.x),Jo(r.y,i.offset.y)),r}var $o=()=>({translate:0,scale:1,origin:0,originPoint:0}),es=()=>({x:$o(),y:$o()}),ts=()=>({min:0,max:0}),Z=()=>({x:ts(),y:ts()}),ns={current:null},rs={current:!1};function is(){if(rs.current=!0,Ce)if(window.matchMedia){let e=window.matchMedia(`(prefers-reduced-motion)`),t=()=>ns.current=e.matches;e.addEventListener(`change`,t),t()}else ns.current=!1}var as=new WeakMap;function os(e,t,n){for(let r in t){let i=t[r],a=n[r];if(ta(i))e.addValue(r,i);else if(ta(a))e.addValue(r,Pi(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){let t=e.getValue(r);t.liveStyle===!0?t.jump(i):t.hasAnimated||t.set(i)}else{let t=e.getStaticValue(r);e.addValue(r,Pi(t===void 0?i:t,{owner:e}))}}for(let r in n)t[r]===void 0&&e.removeValue(r);return t}var ss=[`AnimationStart`,`AnimationComplete`,`Update`,`BeforeLayoutMeasure`,`LayoutMeasure`,`LayoutAnimationStart`,`LayoutAnimationComplete`],cs=class{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=jr,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify(`Update`,this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=bt.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,K.render(this.render,!1,!0))};let{latestValues:s,renderState:c}=a;this.latestValues=s,this.baseTarget={...s},this.initialValues=t.initial?{...s}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=Na(t),this.isVariantNode=Pa(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);let{willChange:l,...u}=this.scrapeMotionValuesFromProps(t,{},this);for(let e in u){let t=u[e];s[e]!==void 0&&ta(t)&&t.set(s[e])}}mount(e){this.current=e,as.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),rs.current||is(),this.shouldReduceMotion=this.reducedMotionConfig===`never`?!1:this.reducedMotionConfig===`always`?!0:ns.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in this.projection&&this.projection.unmount(),ht(this.notifyUpdate),ht(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??=new Set,this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let n=vr.has(e);n&&this.onBindTransform&&this.onBindTransform();let r=t.on(`change`,t=>{this.latestValues[e]=t,this.props.onUpdate&&K.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()}),i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e=`animation`;for(e in va){let t=va[e];if(!t)continue;let{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Z()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<ss.length;t++){let n=ss[t];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);let r=e[`on`+n];r&&(this.propEventSubscriptions[n]=this.on(n,r))}this.prevMotionValues=os(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=Pi(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n==`string`&&(Ae(n)||Me(n))?n=parseFloat(n):!ra(n)&&cn.test(t)&&(n=Ci(e,t)),this.setBaseTarget(e,ta(n)?n.get():n)),ta(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){let{initial:t}=this.props,n;if(typeof t==`string`||typeof t==`object`){let r=lo(this.props,t,this.presenceContext?.custom);r&&(n=r[e])}if(t&&n!==void 0)return n;let r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!ta(r)?r:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Re),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Fi.render(this.render)}},ls=class extends cs{constructor(){super(...arguments),this.KeyframeResolver=Ei}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;ta(e)&&(this.childSubscription=e.on(`change`,e=>{this.current&&(this.current.textContent=`${e}`)}))}};function us(e,{style:t,vars:n},r,i){let a=e.style,o;for(o in t)a[o]=t[o];for(o in i?.applyProjectionStyles(a,r),n)a.setProperty(o,n[o])}function ds(e){return window.getComputedStyle(e)}var fs=class extends ls{constructor(){super(...arguments),this.type=`html`,this.renderInstance=us}readValueFromInstance(e,t){if(vr.has(t))return this.projection?.isProjecting?pr(t):hr(e,t);{let n=ds(e),r=(Ct(t)?n.getPropertyValue(t):n[t])||0;return typeof r==`string`?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Zo(e,t)}build(e,t,n){Ka(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return ho(e,t,n)}},ps=new Set([`baseFrequency`,`diffuseConstant`,`kernelMatrix`,`kernelUnitLength`,`keySplines`,`keyTimes`,`limitingConeAngle`,`markerHeight`,`markerWidth`,`numOctaves`,`targetX`,`targetY`,`surfaceScale`,`specularConstant`,`specularExponent`,`stdDeviation`,`tableValues`,`viewBox`,`gradientTransform`,`pathLength`,`startOffset`,`textLength`,`lengthAdjust`]);function ms(e,t,n,r){for(let n in us(e,t,void 0,r),t.attrs)e.setAttribute(ps.has(n)?n:So(n),t.attrs[n])}var hs=class extends ls{constructor(){super(...arguments),this.type=`svg`,this.isSVGTag=!1,this.measureInstanceViewportBox=Z}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(vr.has(t)){let e=Si(t);return e&&e.default||0}return t=ps.has(t)?t:So(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return _o(e,t,n)}build(e,t,n){to(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){ms(e,t,n,r)}mount(e){this.isSVGTag=ro(e.tagName),super.mount(e)}},gs=(e,t)=>oo(e)?new hs(t):new fs(t,{allowProjection:e!==A.Fragment});function _s(e,t,n){let r=e.getProps();return lo(r,t,n===void 0?r.custom:n,e)}var vs=e=>Array.isArray(e);function ys(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Pi(n))}function bs(e){return vs(e)?e[e.length-1]||0:e}function xs(e,t){let{transitionEnd:n={},transition:r={},...i}=_s(e,t)||{};for(let t in i={...i,...n},i)ys(e,t,bs(i[t]))}function Ss(e){return!!(ta(e)&&e.add)}function Cs(e,t){let n=e.getValue(`willChange`);if(Ss(n))return n.add(t);if(!n&&ke.WillChange){let n=new ke.WillChange(`auto`);e.addValue(`willChange`,n),n.add(t)}}function ws(e){return e.props[Co]}var Ts=e=>e!==null;function Es(e,{repeat:t,repeatType:n=`loop`},r){let i=e.filter(Ts),a=t&&n!==`loop`&&t%2==1?0:i.length-1;return!a||r===void 0?i[a]:r}var Ds={type:`spring`,stiffness:500,damping:25,restSpeed:10},Os=e=>({type:`spring`,stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),ks={type:`keyframes`,duration:.8},As={type:`keyframes`,ease:[.25,.1,.35,1],duration:.3},js=(e,{keyframes:t})=>t.length>2?ks:vr.has(e)?e.startsWith(`scale`)?Os(t[1]):Ds:As;function Ms({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:s,from:c,elapsed:l,...u}){return!!Object.keys(u).length}var Ns=(e,t,n,r={},i,a)=>o=>{let s=ci(r,e)||{},c=s.delay||r.delay||0,{elapsed:l=0}=r;l-=ze(c);let u={keyframes:Array.isArray(n)?n:[null,n],ease:`easeOut`,velocity:t.getVelocity(),...s,delay:-l,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{o(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:a?void 0:i};Ms(s)||Object.assign(u,js(e,u)),u.duration&&=ze(u.duration),u.repeatDelay&&=ze(u.repeatDelay),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&($r(u),u.delay===0&&(d=!0)),(ke.instantAnimations||ke.skipAnimations)&&(d=!0,$r(u),u.delay=0),u.allowFlatten=!s.type&&!s.ease,d&&!a&&t.get()!==void 0){let e=Es(u.keyframes,s);if(e!==void 0){K.update(()=>{u.onUpdate(e),u.onComplete()});return}}return s.isSync?new rr(u):new ii(u)};function Ps({protectedKeys:e,needsAnimating:t},n){let r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Fs(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...s}=t;r&&(a=r);let c=[],l=i&&e.animationState&&e.animationState.getState()[i];for(let t in s){let r=e.getValue(t,e.latestValues[t]??null),i=s[t];if(i===void 0||l&&Ps(l,t))continue;let o={delay:n,...ci(a||{},t)},u=r.get();if(u!==void 0&&!r.isAnimating&&!Array.isArray(i)&&i===u&&!o.velocity)continue;let d=!1;if(window.MotionHandoffAnimation){let n=ws(e);if(n){let e=window.MotionHandoffAnimation(n,t,K);e!==null&&(o.startTime=e,d=!0)}}Cs(e,t),r.start(Ns(t,r,i,e.shouldReduceMotion&&li.has(t)?{type:!1}:o,e,d));let f=r.animation;f&&c.push(f)}return o&&Promise.all(c).then(()=>{K.update(()=>{o&&xs(e,o)})}),c}function Is(e,t,n,r=0,i=1){let a=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),o=e.size,s=(o-1)*r;return typeof n==`function`?n(a,o):i===1?a*r:s-a*r}function Ls(e,t,n={}){let r=_s(e,t,n.type===`exit`?e.presenceContext?.custom:void 0),{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);let a=r?()=>Promise.all(Fs(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(r=0)=>{let{delayChildren:a=0,staggerChildren:o,staggerDirection:s}=i;return Rs(e,t,r,a,o,s,n)}:()=>Promise.resolve(),{when:s}=i;if(s){let[e,t]=s===`beforeChildren`?[a,o]:[o,a];return e().then(()=>t())}else return Promise.all([a(),o(n.delay)])}function Rs(e,t,n=0,r=0,i=0,a=1,o){let s=[];for(let c of e.variantChildren)c.notify(`AnimationStart`,t),s.push(Ls(c,t,{...o,delay:n+(typeof r==`function`?0:r)+Is(e.variantChildren,c,r,i,a)}).then(()=>c.notify(`AnimationComplete`,t)));return Promise.all(s)}function zs(e,t,n={}){e.notify(`AnimationStart`,t);let r;if(Array.isArray(t)){let i=t.map(t=>Ls(e,t,n));r=Promise.all(i)}else if(typeof t==`string`)r=Ls(e,t,n);else{let i=typeof t==`function`?_s(e,t,n.custom):t;r=Promise.all(Fs(e,i,n))}return r.then(()=>{e.notify(`AnimationComplete`,t)})}function Bs(e,t){if(!Array.isArray(t))return!1;let n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var Vs=Ma.length;function Hs(e){if(!e)return;if(!e.isControllingVariants){let t=e.parent&&Hs(e.parent)||{};return e.props.initial!==void 0&&(t.initial=e.props.initial),t}let t={};for(let n=0;n<Vs;n++){let r=Ma[n],i=e.props[r];(Aa(i)||i===!1)&&(t[r]=i)}return t}var Us=[...ja].reverse(),Ws=ja.length;function Gs(e){return t=>Promise.all(t.map(({animation:t,options:n})=>zs(e,t,n)))}function Ks(e){let t=Gs(e),n=Ys(),r=!0,i=t=>(n,r)=>{let i=_s(e,r,t===`exit`?e.presenceContext?.custom:void 0);if(i){let{transition:e,transitionEnd:t,...r}=i;n={...n,...r,...t}}return n};function a(n){t=n(e)}function o(a){let{props:o}=e,s=Hs(e.parent)||{},c=[],l=new Set,u={},d=1/0;for(let t=0;t<Ws;t++){let f=Us[t],p=n[f],m=o[f]===void 0?s[f]:o[f],h=Aa(m),g=f===a?p.isActive:null;g===!1&&(d=t);let _=m===s[f]&&m!==o[f]&&h;if(_&&r&&e.manuallyAnimateOnMount&&(_=!1),p.protectedKeys={...u},!p.isActive&&g===null||!m&&!p.prevProp||ka(m)||typeof m==`boolean`)continue;let v=qs(p.prevProp,m),y=v||f===a&&p.isActive&&!_&&h||t>d&&h,b=!1,x=Array.isArray(m)?m:[m],S=x.reduce(i(f),{});g===!1&&(S={});let{prevResolvedValues:C={}}=p,w={...C,...S},T=t=>{y=!0,l.has(t)&&(b=!0,l.delete(t)),p.needsAnimating[t]=!0;let n=e.getValue(t);n&&(n.liveStyle=!1)};for(let e in w){let t=S[e],n=C[e];if(u.hasOwnProperty(e))continue;let r=!1;r=vs(t)&&vs(n)?!Bs(t,n):t!==n,r?t==null?l.add(e):T(e):t!==void 0&&l.has(e)?T(e):p.protectedKeys[e]=!0}p.prevProp=m,p.prevResolvedValues=S,p.isActive&&(u={...u,...S}),r&&e.blockInitialAnimation&&(y=!1);let E=_&&v;y&&(!E||b)&&c.push(...x.map(t=>{let n={type:f};if(typeof t==`string`&&r&&!E&&e.manuallyAnimateOnMount&&e.parent){let{parent:r}=e,i=_s(r,t);if(r.enteringChildren&&i){let{delayChildren:t}=i.transition||{};n.delay=Is(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(l.size){let t={};if(typeof o.initial!=`boolean`){let n=_s(e,Array.isArray(o.initial)?o.initial[0]:o.initial);n&&n.transition&&(t.transition=n.transition)}l.forEach(n=>{let r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=r??null}),c.push({animation:t})}let f=!!c.length;return r&&(o.initial===!1||o.initial===o.animate)&&!e.manuallyAnimateOnMount&&(f=!1),r=!1,f?t(c):Promise.resolve()}function s(t,r){if(n[t].isActive===r)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,r)),n[t].isActive=r;let i=o(t);for(let e in n)n[e].protectedKeys={};return i}return{animateChanges:o,setActive:s,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Ys()}}}function qs(e,t){return typeof t==`string`?t!==e:Array.isArray(t)?!Bs(t,e):!1}function Js(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ys(){return{animate:Js(!0),whileInView:Js(),whileHover:Js(),whileTap:Js(),whileDrag:Js(),whileFocus:Js(),exit:Js()}}var Xs=class{constructor(e){this.isMounted=!1,this.node=e}update(){}},Zs=class extends Xs{constructor(e){super(e),e.animationState||=Ks(e)}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();ka(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}},Qs=0,$s={animation:{Feature:Zs},exit:{Feature:class extends Xs{constructor(){super(...arguments),this.id=Qs++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;let r=this.node.animationState.setActive(`exit`,!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){let{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function ec(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function tc(e){return{point:{x:e.pageX,y:e.pageY}}}var nc=e=>t=>Wi(t)&&e(t,tc(t));function rc(e,t,n,r){return ec(e,t,nc(n),r)}var ic=1e-4,ac=1-ic,oc=1+ic,sc=.01,cc=0-sc,lc=0+sc;function uc(e){return e.max-e.min}function dc(e,t,n){return Math.abs(e-t)<=n}function fc(e,t,n,r=.5){e.origin=r,e.originPoint=Y(t.min,t.max,e.origin),e.scale=uc(n)/uc(t),e.translate=Y(n.min,n.max,e.origin)-e.originPoint,(e.scale>=ac&&e.scale<=oc||isNaN(e.scale))&&(e.scale=1),(e.translate>=cc&&e.translate<=lc||isNaN(e.translate))&&(e.translate=0)}function pc(e,t,n,r){fc(e.x,t.x,n.x,r?r.originX:void 0),fc(e.y,t.y,n.y,r?r.originY:void 0)}function mc(e,t,n){e.min=n.min+t.min,e.max=e.min+uc(t)}function hc(e,t,n){mc(e.x,t.x,n.x),mc(e.y,t.y,n.y)}function gc(e,t,n){e.min=t.min-n.min,e.max=e.min+uc(t)}function _c(e,t,n){gc(e.x,t.x,n.x),gc(e.y,t.y,n.y)}function vc(e){return[e(`x`),e(`y`)]}var yc=({current:e})=>e?e.ownerDocument.defaultView:null,bc=(e,t)=>Math.abs(e-t);function xc(e,t){let n=bc(e.x,t.x),r=bc(e.y,t.y);return Math.sqrt(n**2+r**2)}var Sc=class{constructor(e,t,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let e=Tc(this.lastMoveEventInfo,this.history),t=this.startEvent!==null,n=xc(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;let{point:r}=e,{timestamp:i}=gt;this.history.push({...r,timestamp:i});let{onStart:a,onMove:o}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Cc(t,this.transformPagePoint),K.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let a=Tc(e.type===`pointercancel`?this.lastMoveEventInfo:Cc(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),r&&r(e,a)},!Wi(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=a,this.contextWindow=r||window;let o=Cc(tc(e),this.transformPagePoint),{point:s}=o,{timestamp:c}=gt;this.history=[{...s,timestamp:c}];let{onSessionStart:l}=t;l&&l(e,Tc(o,this.history)),this.removeListeners=Ie(rc(this.contextWindow,`pointermove`,this.handlePointerMove),rc(this.contextWindow,`pointerup`,this.handlePointerUp),rc(this.contextWindow,`pointercancel`,this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ht(this.updatePoint)}};function Cc(e,t){return t?{point:t(e.point)}:e}function wc(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Tc({point:e},t){return{point:e,delta:wc(e,Dc(t)),offset:wc(e,Ec(t)),velocity:Oc(t,.1)}}function Ec(e){return e[0]}function Dc(e){return e[e.length-1]}function Oc(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null,i=Dc(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>ze(t)));)n--;if(!r)return{x:0,y:0};let a=Be(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};let o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function kc(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Y(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Y(n,e,r.max):Math.min(e,n)),e}function Ac(e,t,n){return{min:t===void 0?void 0:e.min+t,max:n===void 0?void 0:e.max+n-(e.max-e.min)}}function jc(e,{top:t,left:n,bottom:r,right:i}){return{x:Ac(e.x,n,i),y:Ac(e.y,t,r)}}function Mc(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function Nc(e,t){return{x:Mc(e.x,t.x),y:Mc(e.y,t.y)}}function Pc(e,t){let n=.5,r=uc(e),i=uc(t);return i>r?n=Le(t.min,t.max-r,e.min):r>i&&(n=Le(e.min,e.max-i,t.min)),Oe(0,1,n)}function Fc(e,t){let n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}var Ic=.35;function Lc(e=Ic){return e===!1?e=0:e===!0&&(e=Ic),{x:Rc(e,`left`,`right`),y:Rc(e,`top`,`bottom`)}}function Rc(e,t,n){return{min:zc(e,t),max:zc(e,n)}}function zc(e,t){return typeof e==`number`?e:e[t]||0}var Bc=new WeakMap,Vc=class{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Z(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){let{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;let i=e=>{let{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(tc(e).point)},a=(e,t)=>{let{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock=zi(n),!this.openDragLock))return;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vc(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Ut.test(t)){let{projection:n}=this.visualElement;if(n&&n.layout){let r=n.layout.layoutBox[e];r&&(t=uc(r)*(parseFloat(t)/100))}}this.originPoint[e]=t}),i&&K.postRender(()=>i(e,t)),Cs(this.visualElement,`transform`);let{animationState:a}=this.visualElement;a&&a.setActive(`whileDrag`,!0)},o=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;let{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:a}=this.getProps();if(!n&&!this.openDragLock)return;let{offset:o}=t;if(r&&this.currentDirection===null){this.currentDirection=Uc(o),this.currentDirection!==null&&i&&i(this.currentDirection);return}this.updateAxis(`x`,t.point,o),this.updateAxis(`y`,t.point,o),this.visualElement.render(),a&&a(e,t)},s=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>vc(e=>this.getAnimationState(e)===`paused`&&this.getAxisMotionValue(e).animation?.play()),{dragSnapToOrigin:l}=this.getProps();this.panSession=new Sc(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:s,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,distanceThreshold:n,contextWindow:yc(this.visualElement)})}stop(e,t){let n=e||this.latestPointerEvent,r=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!n)return;let{velocity:a}=r;this.startAnimation(a);let{onDragEnd:o}=this.getProps();o&&K.postRender(()=>o(n,r))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive(`whileDrag`,!1)}updateAxis(e,t,n){let{drag:r}=this.getProps();if(!n||!Hc(e,r,this.currentDirection))return;let i=this.getAxisMotionValue(e),a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=kc(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){let{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&bo(e)?this.constraints||=this.resolveRefConstraints():e&&n?this.constraints=jc(n.layoutBox,e):this.constraints=!1,this.elastic=Lc(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&vc(e=>{this.constraints!==!1&&this.getAxisMotionValue(e)&&(this.constraints[e]=Fc(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){let{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!bo(e))return!1;let n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;let i=Qo(n,r.root,this.visualElement.getTransformPagePoint()),a=Nc(r.layout.layoutBox,i);if(t){let e=t(Po(a));this.hasMutatedConstraints=!!e,e&&(a=No(e))}return a}startAnimation(e){let{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),s=this.constraints||{},c=vc(o=>{if(!Hc(o,t,this.currentDirection))return;let c=s&&s[o]||{};a&&(c={min:0,max:0});let l=r?200:1e6,u=r?40:1e7,d={type:`inertia`,velocity:n?e[o]:0,bounceStiffness:l,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...c};return this.startAxisValueAnimation(o,d)});return Promise.all(c).then(o)}startAxisValueAnimation(e,t){let n=this.getAxisMotionValue(e);return Cs(this.visualElement,e),n.start(Ns(e,n,0,t,this.visualElement,!1))}stopAnimation(){vc(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vc(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps();return n[t]||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){vc(t=>{let{drag:n}=this.getProps();if(!Hc(t,n,this.currentDirection))return;let{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){let{min:n,max:a}=r.layout.layoutBox[t];i.set(e[t]-Y(n,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!bo(t)||!n||!this.constraints)return;this.stopAnimation();let r={x:0,y:0};vc(e=>{let t=this.getAxisMotionValue(e);if(t&&this.constraints!==!1){let n=t.get();r[e]=Pc({min:n,max:n},this.constraints[e])}});let{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},``):`none`,n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),vc(t=>{if(!Hc(t,e,null))return;let n=this.getAxisMotionValue(t),{min:i,max:a}=this.constraints[t];n.set(Y(i,a,r[t]))})}addListeners(){if(!this.visualElement.current)return;Bc.set(this.visualElement,this);let e=this.visualElement.current,t=rc(e,`pointerdown`,e=>{let{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),n=()=>{let{dragConstraints:e}=this.getProps();bo(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener(`measure`,n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),K.read(n);let a=ec(window,`resize`,()=>this.scalePositionWithinConstraints()),o=r.addEventListener(`didUpdate`,(({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(vc(t=>{let n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())}));return()=>{a(),t(),i(),o&&o()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=Ic,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:o}}};function Hc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Uc(e,t=10){let n=null;return Math.abs(e.y)>t?n=`y`:Math.abs(e.x)>t&&(n=`x`),n}var Wc=class extends Xs{constructor(e){super(e),this.removeGroupControls=Pe,this.removeListeners=Pe,this.controls=new Vc(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pe}unmount(){this.removeGroupControls(),this.removeListeners()}},Gc=e=>(t,n)=>{e&&K.postRender(()=>e(t,n))},Kc=class extends Xs{constructor(){super(...arguments),this.removePointerDownListener=Pe}onPointerDown(e){this.session=new Sc(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yc(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Gc(e),onStart:Gc(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&K.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=rc(this.node.current,`pointerdown`,e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}},qc={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Jc=!1,Yc=class extends A.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),Jc&&i.root.didUpdate(),i.addEventListener(`animationComplete`,()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),qc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,{projection:a}=n;return a?(a.isPresent=i,Jc=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||K.postRender(()=>{let e=a.getStack();(!e||!e.members.length)&&this.safeToRemove()})),null):null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Fi.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;Jc=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}};function Xc(e){let[t,n]=fa(),r=(0,A.useContext)(xe);return(0,j.jsx)(Yc,{...e,layoutGroup:r,switchLayoutGroup:(0,A.useContext)(wo),isPresent:t,safeToRemove:n})}function Zc(e,t,n){let r=ta(e)?e:Pi(e);return r.start(Ns(``,r,t,n)),r.animation}var Qc=(e,t)=>e.depth-t.depth,$c=class{constructor(){this.children=[],this.isDirty=!1}add(e){Ee(this.children,e),this.isDirty=!0}remove(e){De(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Qc),this.isDirty=!1,this.children.forEach(e)}};function el(e,t){let n=bt.now(),r=({timestamp:i})=>{let a=i-n;a>=t&&(ht(r),e(a-t))};return K.setup(r,!0),()=>ht(r)}var tl=[`TopLeft`,`TopRight`,`BottomLeft`,`BottomRight`],nl=tl.length,rl=e=>typeof e==`string`?parseFloat(e):e,il=e=>typeof e==`number`||q.test(e);function al(e,t,n,r,i,a){i?(e.opacity=Y(0,n.opacity??1,sl(r)),e.opacityExit=Y(t.opacity??1,0,cl(r))):a&&(e.opacity=Y(t.opacity??1,n.opacity??1,r));for(let i=0;i<nl;i++){let a=`border${tl[i]}Radius`,o=ol(t,a),s=ol(n,a);o===void 0&&s===void 0||(o||=0,s||=0,o===0||s===0||il(o)===il(s)?(e[a]=Math.max(Y(rl(o),rl(s),r),0),(Ut.test(s)||Ut.test(o))&&(e[a]+=`%`)):e[a]=s)}(t.rotate||n.rotate)&&(e.rotate=Y(t.rotate||0,n.rotate||0,r))}function ol(e,t){return e[t]===void 0?e.borderRadius:e[t]}var sl=ll(0,.5,et),cl=ll(.5,.95,Pe);function ll(e,t,n){return r=>r<e?0:r>t?1:n(Le(e,t,r))}function ul(e,t){e.min=t.min,e.max=t.max}function dl(e,t){ul(e.x,t.x),ul(e.y,t.y)}function fl(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function pl(e,t,n,r,i){return e-=t,e=Vo(e,1/n,r),i!==void 0&&(e=Vo(e,1/i,r)),e}function ml(e,t=0,n=1,r=.5,i,a=e,o=e){if(Ut.test(t)&&(t=parseFloat(t),t=Y(o.min,o.max,t/100)-o.min),typeof t!=`number`)return;let s=Y(a.min,a.max,r);e===a&&(s-=t),e.min=pl(e.min,t,n,s,i),e.max=pl(e.max,t,n,s,i)}function hl(e,t,[n,r,i],a,o){ml(e,t[n],t[r],t[i],t.scale,a,o)}var gl=[`x`,`scaleX`,`originX`],_l=[`y`,`scaleY`,`originY`];function vl(e,t,n,r){hl(e.x,t,gl,n?n.x:void 0,r?r.x:void 0),hl(e.y,t,_l,n?n.y:void 0,r?r.y:void 0)}function yl(e){return e.translate===0&&e.scale===1}function bl(e){return yl(e.x)&&yl(e.y)}function xl(e,t){return e.min===t.min&&e.max===t.max}function Sl(e,t){return xl(e.x,t.x)&&xl(e.y,t.y)}function Cl(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function wl(e,t){return Cl(e.x,t.x)&&Cl(e.y,t.y)}function Tl(e){return uc(e.x)/uc(e.y)}function El(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}var Dl=class{constructor(){this.members=[]}add(e){Ee(this.members,e),e.scheduleRender()}remove(e){if(De(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t=this.members.findIndex(t=>e===t);if(t===0)return!1;let n;for(let e=t;e>=0;e--){let t=this.members[e];if(t.isPresent!==!1){n=t;break}}return n?(this.promote(n),!0):!1}promote(e,t){let n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:r}=e.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}};function Ol(e,t,n){let r=``,i=e.x.translate/t.x,a=e.y.translate/t.y,o=n?.z||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){let{transformPerspective:e,rotate:t,rotateX:i,rotateY:a,skewX:o,skewY:s}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),i&&(r+=`rotateX(${i}deg) `),a&&(r+=`rotateY(${a}deg) `),o&&(r+=`skewX(${o}deg) `),s&&(r+=`skewY(${s}deg) `)}let s=e.x.scale*t.x,c=e.y.scale*t.y;return(s!==1||c!==1)&&(r+=`scale(${s}, ${c})`),r||`none`}var kl={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},Al=[``,`X`,`Y`,`Z`],jl=1e3,Ml=0;function Nl(e,t,n,r){let{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Pl(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;let{visualElement:t}=e.options;if(!t)return;let n=ws(t);if(window.MotionHasOptimisedAnimation(n,`transform`)){let{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,`transform`,K,!(t||r))}let{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Pl(r)}function Fl({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(e={},n=t?.()){this.id=Ml++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,dt.value&&(kl.nodes=kl.calculatedTargetDeltas=kl.calculatedProjections=0),this.nodes.forEach(Rl),this.nodes.forEach(Gl),this.nodes.forEach(Kl),this.nodes.forEach(zl),dt.addProjectionMetrics&&dt.addProjectionMetrics(kl)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new $c)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Re),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;this.isSVG=$i(t)&&!ea(t),this.instance=t;let{layoutId:n,layout:r,visualElement:i}=this.options;if(i&&!i.current&&i.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||n)&&(this.isLayoutDirty=!0),e){let n,r=0,i=()=>this.root.updateBlockedByResize=!1;K.read(()=>{r=window.innerWidth}),e(t,()=>{let e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=el(i,250),qc.hasAnimatedSinceResize&&(qc.hasAnimatedSinceResize=!1,this.nodes.forEach(Wl)))})}n&&this.root.registerSharedNode(n,this),this.options.animate!==!1&&i&&(n||r)&&this.addEventListener(`didUpdate`,({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let a=this.options.transition||i.getDefaultTransition()||$l,{onLayoutAnimationStart:o,onLayoutAnimationComplete:s}=i.getProps(),c=!this.targetLayout||!wl(this.targetLayout,r),l=!t&&n;if(this.options.layoutRoot||this.resumeFrom||l||t&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let t={...ci(a,`layout`),onPlay:o,onComplete:s};(i.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,l)}else t||Wl(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ht(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ql),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Pl(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll(`snapshot`),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:n}=this.options;if(t===void 0&&!n)return;let r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,``):void 0,this.updateSnapshot(),e&&this.notifyListeners(`willUpdate`)}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Vl);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Hl);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Ul),this.nodes.forEach(Il),this.nodes.forEach(Ll)):this.nodes.forEach(Hl),this.clearAllSnapshots();let e=bt.now();gt.delta=Oe(0,1e3/60,e-gt.timestamp),gt.timestamp=e,gt.isProcessing=!0,_t.update.process(gt),_t.preRender.process(gt),_t.render.process(gt),gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Fi.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Bl),this.sharedNodes.forEach(Jl)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,K.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){K.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!uc(this.snapshot.measuredBox.x)&&!uc(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Z(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners(`measure`,this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify(`LayoutMeasure`,this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e=`measure`){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){let t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!bl(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,``):void 0,a=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||Ro(this.latestValues)||a)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){let t=this.measurePageBox(),n=this.removeElementScroll(t);return e&&(n=this.removeTransform(n)),ru(n),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:e}=this.options;if(!e)return Z();let t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(au))){let{scroll:e}=this.root;e&&(Jo(t.x,e.offset.x),Jo(t.y,e.offset.y))}return t}removeElementScroll(e){let t=Z();if(dl(t,e),this.scroll?.wasRoot)return t;for(let n=0;n<this.path.length;n++){let r=this.path[n],{scroll:i,options:a}=r;r!==this.root&&i&&a.layoutScroll&&(i.wasRoot&&dl(t,e),Jo(t.x,i.offset.x),Jo(t.y,i.offset.y))}return t}applyTransform(e,t=!1){let n=Z();dl(n,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];!t&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Xo(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),Ro(r.latestValues)&&Xo(n,r.latestValues)}return Ro(this.latestValues)&&Xo(n,this.latestValues),n}removeTransform(e){let t=Z();dl(t,e);for(let e=0;e<this.path.length;e++){let n=this.path[e];if(!n.instance||!Ro(n.latestValues))continue;Lo(n.latestValues)&&n.updateSnapshot();let r=Z();dl(r,n.measurePageBox()),vl(t,n.latestValues,n.snapshot?n.snapshot.layoutBox:void 0,r)}return Ro(this.latestValues)&&vl(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:e.crossfade===void 0?!0:e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){let t=this.getLead();this.isProjectionDirty||=t.isProjectionDirty,this.isTransformDirty||=t.isTransformDirty,this.isSharedProjectionDirty||=t.isSharedProjectionDirty;let n=!!this.resumingFrom||this!==t;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:r,layoutId:i}=this.options;if(!this.layout||!(r||i))return;this.resolvedRelativeTargetAt=gt.timestamp;let a=this.getClosestProjectingParent();a&&this.linkedParentVersion!==a.layoutVersion&&!a.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(a&&a.layout?this.createRelativeTarget(a,this.layout.layoutBox,a.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Z(),this.targetWithTransforms=Z()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hc(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dl(this.target,this.layout.layoutBox),Wo(this.target,this.targetDelta)):dl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,a&&!!a.resumingFrom==!!this.resumingFrom&&!a.options.layoutScroll&&a.target&&this.animationProgress!==1?this.createRelativeTarget(a,this.target,a.target):this.relativeParent=this.relativeTarget=void 0),dt.value&&kl.calculatedTargetDeltas++)}getClosestProjectingParent(){if(!(!this.parent||Lo(this.parent.latestValues)||zo(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,n){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Z(),this.relativeTargetOrigin=Z(),_c(this.relativeTargetOrigin,t,n),dl(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){let e=this.getLead(),t=!!this.resumingFrom||this!==e,n=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===gt.timestamp&&(n=!1),n)return;let{layout:r,layoutId:i}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(r||i))return;dl(this.layoutCorrected,this.layout.layoutBox);let a=this.treeScale.x,o=this.treeScale.y;qo(this.layoutCorrected,this.treeScale,this.path,t),e.layout&&!e.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(e.target=e.layout.layoutBox,e.targetWithTransforms=Z());let{target:s}=e;if(!s){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(fl(this.prevProjectionDelta.x,this.projectionDelta.x),fl(this.prevProjectionDelta.y,this.projectionDelta.y)),pc(this.projectionDelta,this.layoutCorrected,s,this.latestValues),(this.treeScale.x!==a||this.treeScale.y!==o||!El(this.projectionDelta.x,this.prevProjectionDelta.x)||!El(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners(`projectionUpdate`,s)),dt.value&&kl.calculatedProjections++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=es(),this.projectionDelta=es(),this.projectionDeltaWithTransform=es()}setAnimationOrigin(e,t=!1){let n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},a=es();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let o=Z(),s=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),l=!c||c.members.length<=1,u=!!(s&&!l&&this.options.crossfade===!0&&!this.path.some(Ql));this.animationProgress=0;let d;this.mixTargetDelta=t=>{let n=t/1e3;Yl(a.x,e.x,n),Yl(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_c(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Zl(this.relativeTarget,this.relativeTargetOrigin,o,n),d&&Sl(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||=Z(),dl(d,this.relativeTarget)),s&&(this.animationValues=i,al(i,r,this.latestValues,n,u,l)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners(`animationStart`),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&=(ht(this.pendingAnimation),void 0),this.pendingAnimation=K.update(()=>{qc.hasAnimatedSinceResize=!0,xt.layout++,this.motionValue||=Pi(0),this.currentAnimation=Zc(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{xt.layout--},onComplete:()=>{xt.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners(`animationComplete`)}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(jl),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(!(!t||!n||!r)){if(this!==e&&this.layout&&r&&iu(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||Z();let t=uc(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;let r=uc(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}dl(t,n),Xo(t,i),pc(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Dl),this.sharedNodes.get(e).add(t);let n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return e?e.lead===this:!0}getLead(){let{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){let r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return e?e.relegate(this):!1}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;let r={};n.z&&Nl(`z`,e,r,this.animationValues);for(let t=0;t<Al.length;t++)Nl(`rotate${Al[t]}`,e,r,this.animationValues),Nl(`skew${Al[t]}`,e,r,this.animationValues);for(let t in e.render(),r)e.setStaticValue(t,r[t]),this.animationValues&&(this.animationValues[t]=r[t]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible){e.visibility=`hidden`;return}let n=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,e.visibility=``,e.opacity=``,e.pointerEvents=uo(t?.pointerEvents)||``,e.transform=n?n(this.latestValues,``):`none`;return}let r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target){this.options.layoutId&&(e.opacity=this.latestValues.opacity===void 0?1:this.latestValues.opacity,e.pointerEvents=uo(t?.pointerEvents)||``),this.hasProjected&&!Ro(this.latestValues)&&(e.transform=n?n({},``):`none`,this.hasProjected=!1);return}e.visibility=``;let i=r.animationValues||r.latestValues;this.applyTransformsToTarget();let a=Ol(this.projectionDeltaWithTransform,this.treeScale,i);n&&(a=n(i,a)),e.transform=a;let{x:o,y:s}=this.projectionDelta;for(let t in e.transformOrigin=`${o.origin*100}% ${s.origin*100}% 0`,r.animationValues?e.opacity=r===this?i.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=r===this?i.opacity===void 0?``:i.opacity:i.opacityExit===void 0?0:i.opacityExit,Va){if(i[t]===void 0)continue;let{correct:n,applyTo:o,isCSSVariable:s}=Va[t],c=a===`none`?i[t]:n(i[t],r);if(o){let t=o.length;for(let n=0;n<t;n++)e[o[n]]=c}else s?this.options.visualElement.renderState.vars[t]=c:e[t]=c}this.options.layoutId&&(e.pointerEvents=r===this?uo(t?.pointerEvents)||``:`none`)}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(Vl),this.root.sharedNodes.clear()}}}function Il(e){e.updateLayout()}function Ll(e){let t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners(`didUpdate`)){let{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,a=t.source!==e.layout.source;i===`size`?vc(e=>{let r=a?t.measuredBox[e]:t.layoutBox[e],i=uc(r);r.min=n[e].min,r.max=r.min+i}):iu(i,t.layoutBox,n)&&vc(r=>{let i=a?t.measuredBox[r]:t.layoutBox[r],o=uc(n[r]);i.max=i.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+o)});let o=es();pc(o,n,t.layoutBox);let s=es();a?pc(s,e.applyTransform(r,!0),t.measuredBox):pc(s,n,t.layoutBox);let c=!bl(o),l=!1;if(!e.resumeFrom){let r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){let{snapshot:i,layout:a}=r;if(i&&a){let o=Z();_c(o,t.layoutBox,i.layoutBox);let s=Z();_c(s,n,a.layoutBox),wl(o,s)||(l=!0),r.options.layoutRoot&&(e.relativeTarget=s,e.relativeTargetOrigin=o,e.relativeParent=r)}}}e.notifyListeners(`didUpdate`,{layout:n,snapshot:t,delta:s,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:l})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Rl(e){dt.value&&kl.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty),e.isTransformDirty||=e.parent.isTransformDirty)}function zl(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Bl(e){e.clearSnapshot()}function Vl(e){e.clearMeasurements()}function Hl(e){e.isLayoutDirty=!1}function Ul(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify(`BeforeLayoutMeasure`),e.resetTransform()}function Wl(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Gl(e){e.resolveTargetDelta()}function Kl(e){e.calcProjection()}function ql(e){e.resetSkewAndRotation()}function Jl(e){e.removeLeadSnapshot()}function Yl(e,t,n){e.translate=Y(t.translate,0,n),e.scale=Y(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Xl(e,t,n,r){e.min=Y(t.min,n.min,r),e.max=Y(t.max,n.max,r)}function Zl(e,t,n,r){Xl(e.x,t.x,n.x,r),Xl(e.y,t.y,n.y,r)}function Ql(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}var $l={duration:.45,ease:[.4,0,.1,1]},eu=e=>typeof navigator<`u`&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),tu=eu(`applewebkit/`)&&!eu(`chrome/`)?Math.round:Pe;function nu(e){e.min=tu(e.min),e.max=tu(e.max)}function ru(e){nu(e.x),nu(e.y)}function iu(e,t,n){return e===`position`||e===`preserve-aspect`&&!dc(Tl(t),Tl(n),.2)}function au(e){return e!==e.root&&e.scroll?.wasRoot}var ou=Fl({attachResizeListener:(e,t)=>ec(e,`resize`,t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),su={current:void 0},cu=Fl({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!su.current){let e=new ou({});e.mount(window),e.setOptions({layoutScroll:!0}),su.current=e}return su.current},resetTransform:(e,t)=>{e.style.transform=t===void 0?`none`:t},checkIsScrollRoot:e=>window.getComputedStyle(e).position===`fixed`}),lu={pan:{Feature:Kc},drag:{Feature:Wc,ProjectionNode:cu,MeasureLayout:Xc}};function uu(e,t,n){let{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive(`whileHover`,n===`Start`);let i=r[`onHover`+n];i&&K.postRender(()=>i(t,tc(t)))}var du=class extends Xs{mount(){let{current:e}=this.node;e&&(this.unmount=Hi(e,(e,t)=>(uu(this.node,t,`Start`),e=>uu(this.node,e,`End`))))}unmount(){}},fu=class extends Xs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(`:focus-visible`)}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive(`whileFocus`,!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive(`whileFocus`,!1),this.isActive=!1)}mount(){this.unmount=Ie(ec(this.node.current,`focus`,()=>this.onFocus()),ec(this.node.current,`blur`,()=>this.onBlur()))}unmount(){}};function pu(e,t,n){let{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive(`whileTap`,n===`Start`);let i=r[`onTap`+(n===`End`?``:n)];i&&K.postRender(()=>i(t,tc(t)))}var mu=class extends Xs{mount(){let{current:e}=this.node;e&&(this.unmount=Qi(e,(e,t)=>(pu(this.node,t,`Start`),(e,{success:t})=>pu(this.node,e,t?`End`:`Cancel`)),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}},hu=new WeakMap,gu=new WeakMap,_u=e=>{let t=hu.get(e.target);t&&t(e)},vu=e=>{e.forEach(_u)};function yu({root:e,...t}){let n=e||document;gu.has(n)||gu.set(n,{});let r=gu.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(vu,{root:e,...t})),r[i]}function bu(e,t,n){let r=yu(t);return hu.set(e,n),r.observe(e),()=>{hu.delete(e),r.unobserve(e)}}var xu={some:0,all:1},Su=class extends Xs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r=`some`,once:i}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:typeof r==`number`?r:xu[r]};return bu(this.node.current,a,e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,i&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive(`whileInView`,t);let{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),a=t?n:r;a&&a(e)})}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>`u`)return;let{props:e,prevProps:t}=this.node;[`amount`,`margin`,`root`].some(Cu(e,t))&&this.startObserver()}unmount(){}};function Cu({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}var wu={inView:{Feature:Su},tap:{Feature:mu},focus:{Feature:fu},hover:{Feature:du}},Tu={layout:{ProjectionNode:cu,MeasureLayout:Xc}},Q=Mo({...$s,...wu,...lu,...Tu},gs);function Eu(){!rs.current&&is();let[e]=(0,A.useState)(ns.current);return e}var Du=36,Ou=12,ku=44,Au=17491.270421/36,ju=`kai_notes_`,Mu=[{idx:0,start:0,end:10,title:`Steps 0â€“10`},{idx:1,start:11,end:21,title:`Steps 11â€“21`},{idx:2,start:22,end:32,title:`Steps 22â€“32`},{idx:3,start:33,end:43,title:`Steps 33â€“43`}],Nu=e=>`${ju}${e}`,Pu=(e,t,n)=>`kai_note_${e}_${t}_${n}`,Fu=e=>typeof e==`object`&&!!e,Iu=e=>{try{if(typeof window>`u`)return[];let t=window.localStorage.getItem(Nu(e));if(!t)return[];let n=JSON.parse(t);if(!Array.isArray(n))return[];let r=[];for(let e of n){if(!Fu(e))continue;let t=e.beat,n=e.step,i=e.text,a=typeof t==`number`?t:Number(t),o=typeof n==`number`?n:Number(n),s=typeof i==`string`?i:String(i??``);Number.isFinite(a)&&Number.isFinite(o)&&o>=0&&o<ku&&r.push({beat:a,step:o,text:s})}return r}catch{return[]}},Lu=(e,t)=>{try{if(typeof window>`u`)return;window.localStorage.setItem(Nu(e),JSON.stringify(t))}catch{}},Ru=(e,t,n)=>{let r=Math.floor(Au*t),i=n*11;return Math.floor(e+r+i)},zu={closed:{height:0,opacity:0},open:{height:`auto`,opacity:1}},Bu=e=>t=>{(t.key===`Enter`||t.key===` `)&&(t.preventDefault(),e())};function Vu(){let e=()=>{if(typeof window>`u`)return{inset:0,viewportHeight:0};let e=window.visualViewport,t=Math.round(e?.height??window.innerHeight);return e?{inset:Math.round(Math.max(0,window.innerHeight-(e.height+e.offsetTop))),viewportHeight:t}:{inset:0,viewportHeight:t}},[t,n]=(0,A.useState)(()=>e());return(0,A.useEffect)(()=>{if(typeof window>`u`)return;let t=window.visualViewport,r=()=>n(e());return t&&(t.addEventListener(`resize`,r),t.addEventListener(`scroll`,r)),window.addEventListener(`resize`,r),()=>{t&&(t.removeEventListener(`resize`,r),t.removeEventListener(`scroll`,r)),window.removeEventListener(`resize`,r)}},[]),t}var Hu=({day:e,onClose:t,onSaveKaiNote:n})=>{let[r,i]=(0,A.useState)(null),[a,o]=(0,A.useState)(-1),[s,c]=(0,A.useState)(null),[l,u]=(0,A.useState)(null),[d,f]=(0,A.useState)(0),p=(0,A.useMemo)(()=>Iu(e.startPulse),[e.startPulse,d]),m=(0,A.useMemo)(()=>{let e=new Map;for(let t of p){let n=e.get(t.beat)??[];n.push(t),e.set(t.beat,n)}return e},[p]),h=(0,A.useMemo)(()=>{let e=new Map;for(let t of p){let n=Math.floor(t.beat/Ou);e.set(n,(e.get(n)??0)+1)}return e},[p]),g=(0,A.useMemo)(()=>{let e=Math.ceil(Du/Ou);return Array.from({length:e},(e,t)=>{let n=t*Ou,r=Math.min(n+Ou,Du),i=Array.from({length:r-n},(e,t)=>({beat:n+t,steps:Array.from({length:ku},(e,t)=>t)}));return{chapter:t,title:`Beats ${n}â€“${r-1}`,beats:i}})},[]),_=(0,A.useCallback)((e,t)=>p.find(n=>n.beat===e&&n.step===t),[p]),v=(0,A.useCallback)((e,t,n)=>{let r=m.get(e);return r?r.filter(e=>e.step>=t&&e.step<=n).length:0},[m]),y=(0,A.useCallback)((t,n,r)=>{let i=Iu(e.startPulse),a=i.findIndex(e=>e.beat===t&&e.step===n),o=a>=0?i.map((e,t)=>t===a?{...e,text:r}:e):[...i,{beat:t,step:n,text:r}];Lu(e.startPulse,o),f(e=>e+1)},[e.startPulse]),b=(0,A.useCallback)(e=>{o(t=>t===e?-1:e),c(null),u(null)},[]),x=(0,A.useCallback)(e=>{c(t=>t===e?null:e),u(null)},[]),S=(0,A.useCallback)(e=>{u(t=>t===e?null:e)},[]),C=(0,A.useRef)(null);(0,A.useEffect)(()=>{(C.current?.querySelector(`.close-btn`))?.focus()},[]);let{inset:w,viewportHeight:T}=Vu(),E=T>0?`${T}px`:void 0,D=(0,A.useRef)(null);(0,A.useEffect)(()=>{if(!r)return;let e=window.setTimeout(()=>{D.current?.focus(),D.current?.scrollIntoView({block:`center`,behavior:`smooth`})},60);return()=>window.clearTimeout(e)},[r,w]);let O=(0,A.useCallback)(()=>{if(!r)return;let t=r.text.trim();if(!t)return;y(r.beat,r.step,t);let a=Ru(e.startPulse,r.beat,r.step),o=Pu(e.startPulse,r.beat,r.step);n?.({id:o,text:t,pulse:a,beat:r.beat,step:r.step}),i(null)},[e.startPulse,r,n,y]);return(0,j.jsxs)(ha,{children:[(0,j.jsx)(Q.div,{className:`day-modal-backdrop`,style:{pointerEvents:`none`},initial:{opacity:0},animate:{opacity:.85},exit:{opacity:0}}),(0,j.jsxs)(Q.section,{ref:C,className:`day-modal`,style:{"--kb-inset":`${w}px`,"--vvh":E},initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},transition:{type:`spring`,stiffness:300,damping:28},role:`dialog`,"aria-modal":`true`,"aria-labelledby":`day-title`,children:[(0,j.jsxs)(`header`,{className:`day-header`,children:[(0,j.jsxs)(`h2`,{id:`day-title`,children:[e.name,` `,(0,j.jsxs)(`span`,{children:[`â€¢ `,e.kaiTimestamp]})]}),(0,j.jsx)(`button`,{type:`button`,className:`close-btn`,onPointerUp:t,onKeyDown:Bu(t),"aria-label":`Close Day Detail`,children:`âœ•`})]}),(0,j.jsx)(`div`,{className:`beat-list`,children:g.map(({chapter:e,title:t,beats:n})=>{let r=a===e,o=h.get(e)??0;return(0,j.jsxs)(`div`,{className:`chapter-container`,children:[(0,j.jsxs)(`button`,{type:`button`,className:`chapter-header ${r?`open`:``}`,"aria-expanded":r,"aria-controls":`chapter-${e}`,onPointerUp:()=>b(e),onKeyDown:Bu(()=>b(e)),children:[(0,j.jsx)(`span`,{children:t}),o>0&&(0,j.jsxs)(`span`,{className:`chapter-count`,children:[o,` notes`]}),(0,j.jsx)(`span`,{className:`chevron`,"aria-hidden":`true`})]}),(0,j.jsx)(ha,{initial:!1,children:r&&(0,j.jsx)(Q.div,{id:`chapter-${e}`,className:`chapter-body`,variants:zu,initial:`closed`,animate:`open`,exit:`closed`,transition:{type:`tween`,duration:.24},children:n.map(({beat:e,steps:t})=>{let n=s===e,r=m.get(e)?.length??0;return(0,j.jsxs)(`div`,{className:`beat-accordion`,children:[(0,j.jsxs)(`button`,{type:`button`,className:`beat-header ${n?`open`:``}`,"aria-expanded":n,"aria-controls":`beat-${e}`,onPointerUp:()=>x(e),onKeyDown:Bu(()=>x(e)),children:[(0,j.jsxs)(`span`,{children:[`Beat\xA0`,e]}),r>0&&(0,j.jsxs)(`span`,{className:`beat-count`,children:[r,` notes`]}),(0,j.jsx)(`span`,{className:`chevron`,"aria-hidden":`true`})]}),(0,j.jsx)(ha,{initial:!1,children:n&&(0,j.jsx)(Q.div,{id:`beat-${e}`,className:`beat-steps`,variants:zu,initial:`closed`,animate:`open`,exit:`closed`,transition:{type:`tween`,duration:.24},children:Mu.map(({idx:n,start:r,end:a,title:o})=>{let s=l===n,c=v(e,r,a);return(0,j.jsxs)(`div`,{className:`group-accordion`,children:[(0,j.jsxs)(`button`,{type:`button`,className:`group-header ${s?`open`:``}`,"aria-expanded":s,"aria-controls":`beat-${e}-group-${n}`,onPointerUp:()=>S(n),onKeyDown:Bu(()=>S(n)),children:[(0,j.jsx)(`span`,{children:o}),c>0&&(0,j.jsxs)(`span`,{className:`group-count`,children:[c,` notes`]}),(0,j.jsx)(`span`,{className:`chevron`,"aria-hidden":`true`})]}),(0,j.jsx)(ha,{initial:!1,children:s&&(0,j.jsx)(Q.div,{id:`beat-${e}-group-${n}`,className:`group-body`,variants:zu,initial:`closed`,animate:`open`,exit:`closed`,transition:{type:`tween`,duration:.2},children:t.filter(e=>e>=r&&e<=a).map(t=>{let n=_(e,t),r=e*ku+t,a=()=>{i({beat:e,step:t,text:n?.text??``})};return(0,j.jsxs)(`div`,{role:`button`,tabIndex:0,"data-step-index":r,className:`step-row${n?` has-note`:``}`,onPointerUp:a,onKeyDown:Bu(a),children:[(0,j.jsxs)(`span`,{className:`step-index`,children:[`Step\xA0`,t]}),n&&(0,j.jsx)(`span`,{className:`step-note-preview`,children:n.text.length>42?`${n.text.slice(0,42)}â€¦`:n.text})]},t)})})})]},n)})})})]},e)})})})]},e)})}),(0,j.jsx)(ha,{children:r&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Q.div,{className:`note-editor-backdrop`,initial:{opacity:0},animate:{opacity:.8},exit:{opacity:0},onPointerUp:()=>i(null)}),(0,j.jsxs)(Q.div,{className:`note-editor`,initial:{y:`100%`},animate:{y:0},exit:{y:`100%`},transition:{type:`tween`,duration:.24},role:`dialog`,"aria-label":`Edit note for Beat ${r.beat}, Step ${r.step}`,onPointerDown:e=>e.stopPropagation(),style:{bottom:w,paddingBottom:`max(12px, env(safe-area-inset-bottom))`},children:[(0,j.jsxs)(`h4`,{children:[`Beat\xA0`,r.beat,` â€¢ Step\xA0`,r.step]}),(0,j.jsx)(`textarea`,{ref:D,autoFocus:!0,value:r.text,placeholder:`Add your resonance noteâ€¦`,onChange:e=>{let t=e.target.value;i(e=>e&&{...e,text:t})},onFocus:()=>D.current?.scrollIntoView({block:`center`,behavior:`smooth`})}),(0,j.jsxs)(`footer`,{children:[(0,j.jsx)(`button`,{type:`button`,className:`btn-cancel`,onPointerUp:()=>i(null),onKeyDown:Bu(()=>i(null)),children:`Cancel`}),(0,j.jsx)(`button`,{type:`button`,className:`btn-save`,disabled:!r.text.trim(),onPointerUp:O,onKeyDown:Bu(O),children:`Save`})]})]})]})})]})]})},Uu=s(_(),1),Wu=(3+Math.sqrt(5))*1e3,Gu=17491.270421,Ku=(1+Math.sqrt(5))/2,qu=Date.UTC(2024,4,10,6,45,41,888),Ju=3+Math.sqrt(5),Yu=Ju*1e3,Xu=1000000n,Zu=17491270421n,Qu=11000000n,$u=(Zu+18n)/36n,ed={Solhara:`#ff0024`,Aquaris:`#ff6f00`,Flamora:`#ffd600`,Verdari:`#00c853`,Sonari:`#00b0ff`,Kaelith:`#c186ff`},td=.5,nd=14,rd=3.2,id=e=>e.replace(/D\s+(\d+)/,`D$1`).replace(/\/\s*M(\d+)/,`/M$1`),ad=e=>e*Math.PI/180,od=(e,t,n)=>e+(t-e)*n,sd=e=>{let t=e&&{"Ignition ArK":`#ff0024`,"Integration ArK":`#ff6f00`,"Harmonization ArK":`#ffd600`,"Reflection ArK":`#00c853`,"Purification ArK":`#00b0ff`,"Dream ArK":`#c186ff`}[e]||`#00eaff`,n=(e,t)=>{let n=e.replace(`#`,``),r=parseInt(n,16);return`rgba(${r>>16&255}, ${r>>8&255}, ${r&255}, ${t})`},r=document.documentElement;r.style.setProperty(`--aqua-core`,t),r.style.setProperty(`--aqua-soft`,n(t,.14)),r.style.setProperty(`--seal-glow-inset`,n(t,.36)),r.style.setProperty(`--seal-glow-mid`,n(t,.42)),r.style.setProperty(`--seal-glow-outer`,n(t,.24))},cd=e=>String(e).padStart(2,`0`),ld=(e,t)=>(e%t+t)%t;function ud(e,t){let n=e/t,r=e%t;return r!==0n&&r>0n!=t>0n?n-1n:n}function dd(e){if(!Number.isFinite(e))return 0n;let t=e<0?-1:1,n=Math.abs(e),r=Math.trunc(n),i=n-r;return i<.5?BigInt(t*r):i>.5?BigInt(t*(r+1)):BigInt(t*(r%2==0?r:r+1))}function fd(e){return dd((e.getTime()-qu)/1e3/Ju*1e6)}function pd(e){let t=fd(e),n=ld(t,Zu),r=ud(t,Zu),i=Number(ud(n,$u)),a=n-BigInt(i)*$u,o=Math.min(Math.max(Number(ud(a,Qu)),0),43),s=Number(ud(n,Xu)),c=[`Solhara`,`Aquaris`,`Flamora`,`Verdari`,`Sonari`,`Kaelith`][Number(ld(r,6n))],l=Number(r),u=(l%42+42)%42+1,d=(Math.floor(l/42)%8+8)%8+1,f=u-1,p=`${i}:${cd(o)}`;return{beat:i,step:o,pulsesIntoDay:s,dayOfMonth:u,monthIndex1:d,weekday:c,sealText:`${p} â€” D${u}/M${d}`,monthDayIndex:f,chakraStepString:p}}var md=({onClose:e,refBtn:t})=>{let n=Eu(),r=n?{}:{rotate:135,scale:1.18},i=n?{}:{rotate:45,scale:.92};return(0,j.jsx)(Q.button,{ref:t,className:`mw-close mw-close--glyph`,"aria-label":`Close month view`,onClick:e,whileHover:r,whileTap:i,transition:{type:`spring`,stiffness:400,damping:24},children:(0,j.jsxs)(`svg`,{viewBox:`0 0 64 64`,strokeLinecap:`round`,fill:`none`,"aria-hidden":`true`,children:[(0,j.jsxs)(`defs`,{children:[(0,j.jsxs)(`linearGradient`,{id:`plasma`,x1:`0%`,y1:`0%`,x2:`100%`,y2:`100%`,children:[(0,j.jsx)(`stop`,{offset:`0%`,stopColor:`var(--aqua-core)`}),(0,j.jsx)(`stop`,{offset:`100%`,stopColor:`#ff1559`})]}),(0,j.jsxs)(`filter`,{id:`plasmaBlur`,x:`-40%`,y:`-40%`,width:`180%`,height:`180%`,children:[(0,j.jsx)(`feGaussianBlur`,{stdDeviation:`2`,result:`b`}),(0,j.jsxs)(`feMerge`,{children:[(0,j.jsx)(`feMergeNode`,{in:`b`}),(0,j.jsx)(`feMergeNode`,{in:`b`}),(0,j.jsx)(`feMergeNode`,{in:`SourceGraphic`})]})]})]}),(0,j.jsx)(`polygon`,{points:`32 4 58 20 58 44 32 60 6 44 6 20`,stroke:`url(#plasma)`,strokeWidth:`4`,filter:`url(#plasmaBlur)`}),(0,j.jsxs)(`g`,{stroke:`url(#plasma)`,strokeWidth:`4`,filter:`url(#plasmaBlur)`,children:[(0,j.jsx)(`line`,{x1:`16`,y1:`16`,x2:`48`,y2:`48`}),(0,j.jsx)(`line`,{x1:`48`,y1:`16`,x2:`16`,y2:`48`}),(0,j.jsx)(`line`,{x1:`32`,y1:`8`,x2:`32`,y2:`56`}),(0,j.jsx)(`line`,{x1:`8`,y1:`32`,x2:`56`,y2:`32`})]}),(0,j.jsx)(`g`,{className:`glyphSheen`,children:(0,j.jsx)(`line`,{x1:`0`,y1:`8`,x2:`64`,y2:`56`,stroke:`#fff`,strokeWidth:`1.2`,strokeOpacity:`0`})})]})})},hd=({DAYS:e,initialData:t,notes:n,onSelectDay:r,onAddNote:i,onClose:a,container:o})=>{let s=Eu(),{initIdx:c,initSeal:l,spiralArc:u}=(0,A.useMemo)(()=>{let e=t?.kairos_seal_day_month??`D?/M?`,n=id(e).match(/D(\d+)/);return{initIdx:n?Math.max(0,Math.min(41,Number(n[1])-1)):0,initSeal:id(e),spiralArc:t?.SpiralArc}},[t]);(0,A.useEffect)(()=>{u&&sd(u)},[u]);let d=(0,A.useMemo)(()=>{let e=new Set;return n.forEach(t=>e.add(Math.floor(t.pulse/Gu))),e},[n]),f=(0,A.useMemo)(()=>{let e=1*Ku,t=Math.log(e)/(2*Math.PI),n=[];for(let e=0;e<42;e++){let r=-90+e*60,i=ad(r),a=e/6,o=9.5*Math.exp(t*2*Math.PI*a),s=o*Math.cos(i),c=o*Math.sin(i);n.push({x:s,y:c,Î¸:r,r:o})}return n},[]),p=(0,A.useMemo)(()=>{if(!f.length)return``;let e=`M ${f[0].x.toFixed(3)} ${f[0].y.toFixed(3)}`;for(let t=1;t<f.length;t++)e+=` L ${f[t].x.toFixed(3)} ${f[t].y.toFixed(3)}`;return e},[f]),[m,h]=(0,A.useState)(null),[g,_]=(0,A.useState)(()=>c),[v,y]=(0,A.useState)(null),b=(0,A.useRef)(null),x=(0,A.useRef)(0),S=()=>performance.timeOrigin+performance.now(),C=e=>{let t=e-qu;return qu+Math.ceil(t/Yu)*Yu},w=()=>{b.current!==null&&(clearTimeout(b.current),b.current=null)},T=()=>{w();let e=pd(new Date);h(e),_(e.monthDayIndex+Math.min(1,Math.max(0,e.pulsesIntoDay/Gu)));let t=()=>{let e=S();if(e>=x.current){let t=Math.floor((e-x.current)/Yu);for(let e=0;e<=t;e++){let e=pd(new Date);h(e),_(e.monthDayIndex+Math.min(1,Math.max(0,e.pulsesIntoDay/Gu))),x.current+=Yu}}let n=Math.max(0,x.current-S());b.current=window.setTimeout(t,n)};x.current=C(S());let n=Math.max(0,x.current-S());b.current=window.setTimeout(t,n)};(0,A.useEffect)(()=>{T();let e=()=>{document.visibilityState===`visible`&&T()};return document.addEventListener(`visibilitychange`,e),()=>{w(),document.removeEventListener(`visibilitychange`,e)}},[]);let E=(0,A.useMemo)(()=>{if(!f.length)return{x:0,y:0,r:0,Î¸:0};let e=Math.max(0,Math.min(f.length-1,g)),t=Math.floor(e),n=Math.min(f.length-1,t+1),r=e-t,i=f[t],a=f[n];return{x:od(i.x,a.x,r),y:od(i.y,a.y,r),r:od(i.r,a.r,r),Î¸:od(i.Î¸,a.Î¸,r)}},[f,g]),D=(0,A.useRef)(null);(0,A.useEffect)(()=>D.current?.focus(),[]),(0,A.useEffect)(()=>{let e=e=>{e.key===`Escape`&&a(),e.key===`Home`&&(e.preventDefault(),ce(0,8),re(`free`))};return window.addEventListener(`keydown`,e),()=>window.removeEventListener(`keydown`,e)},[a]);let O=o??document.body,k=m?.monthDayIndex??c,M=id(m?.sealText??l),N=e=>{let n=m?.monthDayIndex??c,r=(typeof t?.eternalKaiPulseToday==`number`?t.eternalKaiPulseToday:m?.pulsesIntoDay)??0;return Math.floor(r/Gu)*Gu+(e-n)*Gu},P=(0,A.useRef)(0),F=(e,t)=>{try{r?.(e,t)}catch{}let n=m?.monthIndex1??1;y({name:e,kaiTimestamp:id(`${m?.chakraStepString??`0:00`} â€” D${t+1}/M${n}`),startPulse:N(t)})},ee=(0,A.useMemo)(()=>t?.SpiralArc&&{"Ignition ArK":`#ff0024`,"Integration ArK":`#ff6f00`,"Harmonization ArK":`#ffd600`,"Reflection ArK":`#00c853`,"Purification ArK":`#00b0ff`,"Dream ArK":`#c186ff`}[t.SpiralArc]||`#8beaff`,[t?.SpiralArc]),te=(0,A.useRef)(null),I=(0,A.useRef)(null),[L,R]=(0,A.useState)(`-60 -60 120 120`),z=(0,A.useRef)({x:-60,y:-60,w:120,h:120}),ne=()=>{let e=I.current;if(!e)return;let t=e.getBBox(),n=t.x-14,r=t.y-14,i=t.width+28,a=t.height+28;z.current={x:n,y:r,w:i,h:a},R(`${n} ${r} ${i} ${a}`)};(0,A.useLayoutEffect)(()=>{let e=requestAnimationFrame(ne),t=()=>{cancelAnimationFrame(e),e=requestAnimationFrame(ne)};return window.addEventListener(`resize`,t),()=>{cancelAnimationFrame(e),window.removeEventListener(`resize`,t)}},[f.length]);let[B,re]=(0,A.useState)(`fit`),[V,ie]=(0,A.useState)({x:0,y:0,z:1}),H=(0,A.useRef)(V),ae=(0,A.useRef)(null),oe=e=>{H.current=typeof e==`function`?e(H.current):e,ae.current===null&&(ae.current=requestAnimationFrame(()=>{ae.current=null,ie(H.current)}))},se=V,ce=(e,t=6)=>{let n=f[e];if(!n)return;let{x:r,y:i,w:a,h:o}=z.current,s=r+a/2,c=i+o/2,l=Math.max(1,Math.min(nd,t));oe({x:s-l*n.x,y:c-l*n.y,z:l})};(0,A.useEffect)(()=>{B===`fit`&&oe({x:0,y:0,z:1})},[L,B]),(0,A.useEffect)(()=>{if(B!==`follow`)return;let{x:e,y:t,w:n,h:r}=z.current,i=e+n/2,a=t+r/2;oe(e=>{let t=e.z;return{x:i-t*E.x,y:a-t*E.y,z:t}})},[E.x,E.y,B]);let U=(0,A.useRef)(new Map),W=(0,A.useRef)({active:!1,mode:`none`,startCam:{x:0,y:0,z:1},movedPx:0}),G=(e,t)=>{let n=te.current,r=n.createSVGPoint();r.x=e,r.y=t;let i=n.getScreenCTM();return i?r.matrixTransform(i.inverse()):r},le=()=>{if(U.current.size<1)return null;let e=0,t=0;U.current.forEach(n=>{e+=n.clientX,t+=n.clientY});let n=U.current.size;return{cx:e/n,cy:t/n}},ue=()=>{let e=Array.from(U.current.values());if(e.length<2)return 0;let t=e[0].clientX-e[1].clientX,n=e[0].clientY-e[1].clientY;return Math.hypot(t,n)},de=()=>{B!==`free`&&re(`free`)},fe=(0,A.useRef)({lastTap:0}),pe=e=>{if(e.preventDefault(),e.target.setPointerCapture?.(e.pointerId),de(),U.current.set(e.pointerId,{id:e.pointerId,clientX:e.clientX,clientY:e.clientY}),W.current.active=!0,W.current.startCam=H.current,W.current.movedPx=0,U.current.size===1)W.current.mode=`pan`,W.current.startPt=G(e.clientX,e.clientY),W.current.startClient={x:e.clientX,y:e.clientY};else if(U.current.size===2){W.current.mode=`pinch`;let e=le();W.current.lastCentroid=G(e.cx,e.cy),W.current.lastDist=ue()}let t=performance.now();if(t-fe.current.lastTap<300&&U.current.size===1){let t=G(e.clientX,e.clientY);oe(e=>{let n=e.z,r=n<rd*.9?rd:1;return{x:e.x+(1-r/n)*(t.x-e.x),y:e.y+(1-r/n)*(t.y-e.y),z:r}}),W.current.movedPx=9999}fe.current.lastTap=t},me=e=>{if(!W.current.active)return;if(U.current.set(e.pointerId,{id:e.pointerId,clientX:e.clientX,clientY:e.clientY}),W.current.startClient){let t=e.clientX-W.current.startClient.x,n=e.clientY-W.current.startClient.y;W.current.movedPx=Math.max(W.current.movedPx,Math.hypot(t,n))}let t=H.current;if(W.current.mode===`pan`&&U.current.size===1){let n=G(e.clientX,e.clientY),r=W.current.startPt,i=n.x-r.x,a=n.y-r.y;oe({x:W.current.startCam.x+i,y:W.current.startCam.y+a,z:t.z})}else if(U.current.size>=2){let e=le(),n=G(e.cx,e.cy),r=W.current.lastCentroid??n,i=n.x-r.x,a=n.y-r.y,o=ue(),s=W.current.lastDist??o,c=o>0&&s>0?o/s:1,l=t.z*c,u=Math.min(nd,Math.max(td,l)),d=t.x+i,f=t.y+a;oe({x:d+(t.z-u)*n.x,y:f+(t.z-u)*n.y,z:u}),W.current.lastCentroid=n,W.current.lastDist=o,W.current.movedPx=9999}else if(U.current.size===1&&W.current.mode===`pinch`){W.current.mode=`pan`;let e=Array.from(U.current.values())[0];W.current.startCam=H.current,W.current.startPt=G(e.clientX,e.clientY),W.current.startClient={x:e.clientX,y:e.clientY}}},he=e=>{if(U.current.delete(e.pointerId),U.current.size===0)W.current.active=!1,W.current.mode=`none`,W.current.startPt=void 0,W.current.startClient=void 0,W.current.lastCentroid=void 0,W.current.lastDist=void 0;else if(U.current.size===1&&W.current.mode===`pinch`){W.current.mode=`pan`;let e=Array.from(U.current.values())[0];W.current.startCam=H.current,W.current.startPt=G(e.clientX,e.clientY),W.current.startClient={x:e.clientX,y:e.clientY}}},ge=e=>{if(B!==`free`)return;e.preventDefault();let t=G(e.clientX,e.clientY),n=Math.exp(-e.deltaY*.0015);oe(e=>{let r=e.z*n,i=Math.min(nd,Math.max(td,r));return{x:e.x+(1-i/e.z)*(t.x-e.x),y:e.y+(1-i/e.z)*(t.y-e.y),z:i}})};return(0,Uu.createPortal)((0,j.jsx)(ha,{children:(0,j.jsx)(Q.div,{className:`mw-backdrop`,role:`presentation`,onPointerDown:e=>{if(performance.now()<P.current){e.preventDefault(),e.stopPropagation();return}e.currentTarget===e.target&&a()},initial:{opacity:0},animate:{opacity:.96},exit:{opacity:0},transition:{duration:.35},children:(0,j.jsxs)(Q.div,{className:`mw-panel`,role:`dialog`,"aria-modal":`true`,"aria-label":`Kairos Month Spiral`,onPointerDown:e=>e.stopPropagation(),initial:{scale:.82,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.82,opacity:0},transition:{type:`spring`,stiffness:320,damping:26},children:[(0,j.jsx)(md,{onClose:a,refBtn:D}),(0,j.jsxs)(`svg`,{ref:te,className:`mw-stage`,viewBox:L,preserveAspectRatio:`xMidYMid meet`,"aria-label":`Month Spiral`,onPointerDown:pe,onPointerMove:me,onPointerUp:he,onPointerCancel:he,onWheel:ge,children:[(0,j.jsxs)(`defs`,{children:[(0,j.jsxs)(`filter`,{id:`mw-neon`,x:`-50%`,y:`-50%`,width:`200%`,height:`200%`,children:[(0,j.jsx)(`feGaussianBlur`,{stdDeviation:`1.6`,result:`b`}),(0,j.jsxs)(`feMerge`,{children:[(0,j.jsx)(`feMergeNode`,{in:`b`}),(0,j.jsx)(`feMergeNode`,{in:`b`}),(0,j.jsx)(`feMergeNode`,{in:`SourceGraphic`})]})]}),(0,j.jsxs)(`linearGradient`,{id:`etherik-baby-blue`,x1:`0%`,y1:`0%`,x2:`100%`,y2:`100%`,children:[(0,j.jsx)(`stop`,{offset:`0%`,stopColor:`#8beaff`}),(0,j.jsx)(`stop`,{offset:`100%`,stopColor:`#c7f4ff`})]}),(0,j.jsxs)(`filter`,{id:`etherik-blue-glow`,x:`-80%`,y:`-80%`,width:`260%`,height:`260%`,children:[(0,j.jsx)(`feGaussianBlur`,{stdDeviation:`1.8`,result:`b1`}),(0,j.jsx)(`feGaussianBlur`,{in:`b1`,stdDeviation:`3.2`,result:`b2`}),(0,j.jsxs)(`feMerge`,{children:[(0,j.jsx)(`feMergeNode`,{in:`b2`}),(0,j.jsx)(`feMergeNode`,{in:`b1`}),(0,j.jsx)(`feMergeNode`,{in:`SourceGraphic`})]})]}),(0,j.jsxs)(`filter`,{id:`etherik-blue-halo`,x:`-120%`,y:`-120%`,width:`340%`,height:`340%`,children:[(0,j.jsx)(`feGaussianBlur`,{stdDeviation:`5`,result:`b3`}),(0,j.jsxs)(`feMerge`,{children:[(0,j.jsx)(`feMergeNode`,{in:`b3`}),(0,j.jsx)(`feMergeNode`,{in:`SourceGraphic`})]})]}),(0,j.jsxs)(`linearGradient`,{id:`ark-twinkle`,x1:`0%`,y1:`0%`,x2:`100%`,y2:`100%`,children:[(0,j.jsx)(`stop`,{offset:`0%`,stopColor:ee,stopOpacity:`1`}),(0,j.jsx)(`stop`,{offset:`100%`,stopColor:ee,stopOpacity:`0.2`})]}),(0,j.jsxs)(`linearGradient`,{id:`mw-spiral-grad`,x1:`0%`,y1:`0%`,x2:`100%`,y2:`100%`,children:[(0,j.jsx)(`stop`,{offset:`0%`,stopColor:`var(--aqua-core)`}),(0,j.jsx)(`stop`,{offset:`100%`,stopColor:`#ff1559`})]})]}),(0,j.jsx)(Q.g,{initial:!1,animate:{x:se.x,y:se.y,scale:se.z},transition:s?{duration:0}:{type:`spring`,stiffness:200,damping:26,mass:.7},children:(0,j.jsxs)(`g`,{ref:I,children:[(0,j.jsx)(Q.path,{d:p,fill:`none`,stroke:`url(#mw-spiral-grad)`,strokeWidth:`1.6`,style:{filter:`url(#mw-neon)`},animate:s?{}:{opacity:[.55,.85,.55]},transition:s?{}:{duration:Wu/1e3,repeat:1/0,ease:`easeInOut`}}),f.map((t,n)=>{let r=e[n%6],a=n===k,o=d.has(n),s=t.Î¸+90,c=8.5,l=4.6,u=1.6,f=`translate(${t.x},${t.y})`,p=a?0:s,m=-l-.6,h=(p%360+360)%360,g=h>90&&h<270,_=()=>W.current.movedPx<8;return(0,j.jsxs)(`g`,{transform:`${f} rotate(${p})`,style:{cursor:`pointer`},onPointerUp:e=>{e.preventDefault(),e.stopPropagation(),_()&&(P.current=performance.now()+350,F(r,n))},onDoubleClick:()=>i(n),children:[(0,j.jsx)(Q.rect,{x:-c/2,y:-l/2,width:c,height:l,rx:u,ry:u,fill:ed[r],stroke:a?`url(#etherik-baby-blue)`:`rgba(255,255,255,0.2)`,strokeWidth:a?1.2:.6,className:[`mw-daychip`,a?`mw-today`:``,o?`mw-hasNote`:``].join(` `).trim(),style:{filter:a?`url(#etherik-blue-glow)`:`url(#mw-neon)`},animate:!1}),a&&(0,j.jsx)(`rect`,{x:-c/2,y:-l/2,width:c,height:l,rx:u,ry:u,fill:`none`,stroke:`url(#etherik-baby-blue)`,strokeWidth:1.4,style:{filter:`url(#etherik-blue-halo)`}}),o&&(0,j.jsx)(`circle`,{cx:c/2-1.2,cy:-l/2+1.2,r:.9,fill:`var(--note-dot)`,className:`mw-note-dot`}),(0,j.jsxs)(`text`,{x:0,y:m,transform:g?`rotate(180, 0, ${m})`:void 0,textAnchor:`middle`,dominantBaseline:`auto`,fontSize:`2.8`,fontFamily:`Inter, system-ui, sans-serif`,fill:ed[r],className:a?`mw-label mw-today-label`:`mw-label`,style:{filter:`url(#mw-neon)`},children:[r.slice(0,3),` â€¢ `,n+1]})]},n)}),(0,j.jsxs)(Q.g,{initial:!1,animate:{x:E.x,y:E.y,rotate:E.Î¸+90},transition:s?{duration:0}:{type:`spring`,stiffness:120,damping:18,mass:.5},className:`mw-comet`,style:{filter:`url(#etherik-blue-glow)`},children:[(0,j.jsxs)(Q.g,{animate:s?{}:{scale:[.98,1.06,.98],opacity:[.9,1,.9]},transition:s?{}:{repeat:1/0,duration:Wu/1e3,ease:`easeInOut`},children:[(0,j.jsx)(`circle`,{r:`2.2`,fill:`url(#etherik-baby-blue)`}),(0,j.jsx)(`circle`,{r:`4.4`,fill:`url(#etherik-baby-blue)`,opacity:`0.55`}),(0,j.jsx)(`circle`,{r:`6.6`,fill:`url(#etherik-baby-blue)`,opacity:`0.26`}),(0,j.jsx)(`circle`,{r:`7.6`,fill:`none`,stroke:`url(#etherik-baby-blue)`,strokeWidth:`1.1`,opacity:`0.9`})]}),(0,j.jsxs)(Q.g,{transform:`rotate(45)`,animate:s?{}:{rotate:[0,180,360],scale:[.92,1.18,.92],opacity:[.6,1,.6]},transition:s?{}:{repeat:1/0,duration:Wu/1e3,ease:`easeInOut`},children:[(0,j.jsx)(`line`,{x1:`-3.2`,y1:`0`,x2:`3.2`,y2:`0`,stroke:`url(#ark-twinkle)`,strokeWidth:`0.45`}),(0,j.jsx)(`line`,{x1:`0`,y1:`-3.2`,x2:`0`,y2:`3.2`,stroke:`url(#ark-twinkle)`,strokeWidth:`0.45`}),(0,j.jsx)(`line`,{x1:`-2.2`,y1:`-2.2`,x2:`2.2`,y2:`2.2`,stroke:`url(#ark-twinkle)`,strokeWidth:`0.35`,opacity:`0.85`}),(0,j.jsx)(`line`,{x1:`2.2`,y1:`-2.2`,x2:`-2.2`,y2:`2.2`,stroke:`url(#ark-twinkle)`,strokeWidth:`0.35`,opacity:`0.85`}),(0,j.jsx)(`circle`,{r:`0.9`,fill:ee,opacity:`0.9`})]})]})]})})]}),(0,j.jsxs)(`div`,{className:`mw-cam`,children:[(0,j.jsx)(`button`,{className:`mw-cam-btn ${B===`fit`?`is-active`:``}`,onClick:e=>{e.shiftKey||e.metaKey?(ce(0,8),re(`free`)):(re(`fit`),oe({x:0,y:0,z:1}))},"aria-pressed":B===`fit`,title:`Fit month (â‡§ to snap Day 1)`,children:`Fit`}),(0,j.jsx)(`button`,{className:`mw-cam-btn ${B===`follow`?`is-active`:``}`,onClick:()=>re(`follow`),"aria-pressed":B===`follow`,title:`Follow comet`,children:`Follow`}),(0,j.jsx)(`button`,{className:`mw-cam-btn ${B===`free`?`is-active`:``}`,onClick:()=>re(`free`),"aria-pressed":B===`free`,title:`Drag & zoom`,children:`Free`})]}),(0,j.jsx)(`div`,{className:`mw-seal`,children:(0,j.jsx)(`code`,{children:M})}),v&&(0,j.jsx)(Hu,{day:v,onClose:()=>y(null)})]})},`mw-backdrop`)}),O)},gd=Date.UTC(2024,4,10,6,45,41,888),_d=3+Math.sqrt(5),vd=_d*1e3,yd=1000000n,bd=17491270421n,xd=11000000n,Sd=(bd+18n)/36n;function Cd(e){if(!Number.isFinite(e))return 0n;let t=e<0?-1:1,n=Math.abs(e),r=Math.trunc(n),i=n-r;return i<.5?BigInt(t*r):i>.5?BigInt(t*(r+1)):BigInt(t*(r%2==0?r:r+1))}var wd=(e,t)=>(e%t+t)%t;function Td(e,t){let n=e/t,r=e%t;return r!==0n&&r>0n!=t>0n?n-1n:n}function Ed(e){return Cd((e.getTime()-gd)/1e3/_d*1e6)}function Dd(e){let t=Ed(e),n=wd(t,bd),r=Number(Td(n,Sd)),i=n-BigInt(r)*Sd,a=Number(Td(i,xd));return{beat:r,step:Math.min(Math.max(a,0),43),pulsesIntoDay:Number(Td(n,yd)),livePulseApprox:Number(Td(t,yd))}}var Od=e=>String(e).padStart(2,`0`),kd=(e,t,n)=>`kai_note_${e}_${t}_${n}`;function Ad(){let[e,t]=(0,A.useState)({inset:0,viewportHeight:0});return(0,A.useEffect)(()=>{let e=window.visualViewport,n=()=>{let n=Math.round(e?.height??window.innerHeight);if(!e)return t({inset:0,viewportHeight:n});let r=Math.max(0,window.innerHeight-(e.height+e.offsetTop));t({inset:Math.round(r),viewportHeight:n})};return n(),e?.addEventListener(`resize`,n),e?.addEventListener(`scroll`,n),window.addEventListener(`resize`,n),()=>{e?.removeEventListener(`resize`,n),e?.removeEventListener(`scroll`,n),window.removeEventListener(`resize`,n)}},[]),e}var jd=e=>e.trim()?e.trim().split(/\s+/).length:0,Md=e=>Math.max(1,Math.round(e/200)),Nd=e=>Array.from(new Set(e.split(`,`).map(e=>e.trim()).filter(Boolean)));function Pd(e,t){let n=t=>{let n=e.current;n&&(n.focus(),t(n))},r=(e,r=e)=>n(n=>{let{selectionStart:i,selectionEnd:a,value:o}=n,s=o.slice(i,a)||`â€¦`;t(o.slice(0,i)+e+s+r+o.slice(a));let c=i+e.length+s.length+r.length;requestAnimationFrame(()=>n.setSelectionRange(c,c))}),i=e=>n(n=>{let{selectionStart:r,selectionEnd:i,value:a}=n,o=a.lastIndexOf(`
`,r-1)+1,s=a.indexOf(`
`,i),c=s===-1?a.length:s,l=a.slice(o,c).split(`
`).map(t=>t.startsWith(e)?t:`${e}${t}`).join(`
`);t(a.slice(0,o)+l+a.slice(c));let u=o+l.length;requestAnimationFrame(()=>n.setSelectionRange(u,u))});return{insert:e=>n(n=>{let{selectionStart:r,selectionEnd:i}=n;t(n.value.slice(0,r)+e+n.value.slice(i));let a=r+e.length;requestAnimationFrame(()=>n.setSelectionRange(a,a))}),bold:()=>r(`**`),italic:()=>r(`*`),h1:()=>i(`# `),h2:()=>i(`## `),bullet:()=>i(`- `),task:()=>i(`- [ ] `),quote:()=>i(`> `)}}var Fd=({pulse:e,initialText:t,onSave:n,onClose:r})=>{let i=Eu(),a=(0,A.useMemo)(()=>`kairosNoteDraft_${Math.round(e)}`,[e]),[o,s]=(0,A.useState)(()=>{if(typeof window>`u`||t.trim())return t;try{let e=localStorage.getItem(a);if(!e)return t;let n=JSON.parse(e);return typeof n?.text==`string`?n.text:t}catch{return t}}),[c,l]=(0,A.useState)(()=>{if(typeof window>`u`||t.trim())return``;try{let e=localStorage.getItem(a);if(!e)return``;let t=JSON.parse(e);return typeof t?.title==`string`?t.title:``}catch{return``}}),[u,d]=(0,A.useState)(()=>{if(typeof window>`u`||t.trim())return``;try{let e=localStorage.getItem(a);if(!e)return``;let t=JSON.parse(e);return typeof t?.tags==`string`?t.tags:``}catch{return``}}),[f,p]=(0,A.useState)(()=>{if(typeof window>`u`||t.trim())return`Memory`;try{let e=localStorage.getItem(a);if(!e)return`Memory`;let t=JSON.parse(e);return typeof t?.intent==`string`?t.intent:`Memory`}catch{return`Memory`}}),[m,h]=(0,A.useState)(()=>{if(typeof window>`u`||t.trim())return!1;try{let e=localStorage.getItem(a);if(!e)return!1;let t=JSON.parse(e);return typeof t?.pinned==`boolean`?t.pinned:!1}catch{return!1}}),[g,_]=(0,A.useState)(!1),[v,y]=(0,A.useState)(!1),[b,x]=(0,A.useState)(null),[S,C]=(0,A.useState)(t.length),[w,T]=(0,A.useState)(()=>Dd(new Date)),E=(0,A.useRef)(null),D=(0,A.useRef)(null),{inset:O,viewportHeight:k}=Ad();(0,A.useEffect)(()=>{C(o.length)},[o]);let M=Pd(D,e=>{s(e),C(e.length)});(0,A.useEffect)(()=>D.current?.focus(),[]),(0,A.useEffect)(()=>{let e=document.body.style.overflow,t=document.body.style.touchAction;return document.body.style.overflow=`hidden`,document.body.style.touchAction=`none`,()=>{document.body.style.overflow=e,document.body.style.touchAction=t}},[]),(0,A.useEffect)(()=>{let e=E.current;if(!e)return;let t=()=>Array.from(e.querySelectorAll(`button,[href],input,textarea,select,details,[tabindex]:not([tabindex="-1"])`)).filter(e=>!e.hasAttribute(`disabled`)&&!e.getAttribute(`aria-hidden`)),n=e=>{if(e.key!==`Tab`)return;let n=t();if(!n.length)return;let r=n[0],i=n[n.length-1];e.shiftKey&&document.activeElement===r?(i.focus(),e.preventDefault()):!e.shiftKey&&document.activeElement===i&&(r.focus(),e.preventDefault())};return e.addEventListener(`keydown`,n),()=>e.removeEventListener(`keydown`,n)},[]);let N=(0,A.useRef)(null),P=(0,A.useRef)(0),F=()=>performance.timeOrigin+performance.now(),ee=e=>{let t=e-gd;return gd+Math.ceil(t/vd)*vd},te=()=>{N.current!==null&&(clearTimeout(N.current),N.current=null)},I=(0,A.useCallback)(()=>{te(),T(Dd(new Date));let e=()=>{let t=F();if(t>=P.current){let e=Math.floor((t-P.current)/vd);for(let t=0;t<=e;t++)T(Dd(new Date)),P.current+=vd}let n=Math.max(0,P.current-F());N.current=window.setTimeout(e,n)};P.current=ee(F());let t=Math.max(0,P.current-F());N.current=window.setTimeout(e,t)},[]);(0,A.useEffect)(()=>{I();let e=()=>{document.visibilityState===`visible`&&I()};return document.addEventListener(`visibilitychange`,e),()=>{te(),document.removeEventListener(`visibilitychange`,e)}},[I]);let L=(0,A.useCallback)(()=>{let e=D.current;if(!e||b!==null)return;e.style.height=`auto`;let t=k||window.innerHeight,n=Math.round(t*(v?.7:.42));e.style.height=Math.min(n,e.scrollHeight+2)+`px`},[v,b,k]);(0,A.useEffect)(()=>{L()},[o,v,L]);let R=(0,A.useRef)(null),z=e=>{let t=D.current;t&&(e.target.setPointerCapture(e.pointerId),R.current={startY:e.clientY,startH:t.getBoundingClientRect().height})},ne=e=>{if(!R.current)return;let t=e.clientY-R.current.startY,n=R.current.startH+t,r=Math.round(window.innerHeight*.82);x(Math.max(120,Math.min(r,n)))},B=e=>{R.current&&=(e.target.releasePointerCapture(e.pointerId),null)},re=(0,A.useMemo)(()=>`${w.beat}:${Od(w.step)}`,[w.beat,w.step]),V=(0,A.useMemo)(()=>jd(o),[o]),ie=(0,A.useMemo)(()=>Md(V),[V]),H=(0,A.useMemo)(()=>Nd(u),[u]),ae=k||(typeof window<`u`?window.innerHeight:0);(0,A.useEffect)(()=>{if(typeof window>`u`)return;let e=window.setTimeout(()=>{let e={text:o,title:c,tags:u,intent:f,pinned:m};try{localStorage.setItem(a,JSON.stringify(e))}catch{}},180);return()=>window.clearTimeout(e)},[a,f,m,u,o,c]);let oe=()=>{`vibrate`in navigator&&typeof navigator.vibrate==`function`&&navigator.vibrate(8)},se=async()=>{let t=o.trim();if(!t||g)return;_(!0);let i=Dd(new Date),s=Math.max(0,i.livePulseApprox??Math.round(e)),l={id:kd(s,i.beat,i.step),pulse:s,text:t,title:c.trim()||void 0,tags:H.length?H:void 0,intent:f.trim()||void 0,pinned:m,beat:i.beat,step:i.step};try{oe(),await Promise.resolve(n(l))}finally{if(_(!1),typeof window<`u`)try{localStorage.removeItem(a)}catch{}r()}};return(0,j.jsx)(ha,{children:(0,j.jsx)(Q.div,{className:`note-modal-backdrop`,initial:{opacity:0},animate:{opacity:.92},exit:{opacity:0},transition:{duration:.22},onClick:e=>{e.target,e.currentTarget},children:(0,j.jsxs)(Q.div,{ref:E,className:`note-modal${v?` note-modal--expanded`:``}`,role:`dialog`,"aria-modal":`true`,"aria-label":`Add Kairos Note`,initial:{scale:.94,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.94,opacity:0},transition:{type:`spring`,stiffness:340,damping:26},onClick:e=>e.stopPropagation(),style:{bottom:Math.max(12,O),maxHeight:Math.max(240,ae-24),paddingBottom:`max(12px, env(safe-area-inset-bottom))`},children:[(0,j.jsxs)(`div`,{className:`note-modal__header`,children:[(0,j.jsxs)(`div`,{className:`note-modal__title`,children:[(0,j.jsx)(`span`,{children:`Note @`}),(0,j.jsx)(Q.code,{className:`note-modal__beatstep`,"aria-label":`Beat ${w.beat} Step ${w.step}`,animate:i?{}:{opacity:[.9,1,.9],filter:[`blur(0px)`,`blur(0.2px)`,`blur(0px)`]},transition:i?{}:{repeat:1/0,duration:5.236,ease:`easeInOut`},children:re})]}),(0,j.jsxs)(`div`,{className:`note-modal__meta`,children:[(0,j.jsxs)(`code`,{className:`note-modal__pulse`,title:`Absolute Kai-Pulse`,children:[`pulse\xA0`,w.livePulseApprox.toLocaleString()]}),(0,j.jsxs)(`span`,{className:`note-modal__chip`,children:[`Intent: `,f]}),H.length>0&&(0,j.jsxs)(`span`,{className:`note-modal__chip`,children:[`Tags: `,H.slice(0,2).join(`, `)]})]}),(0,j.jsxs)(`div`,{className:`note-modal__controls`,children:[(0,j.jsx)(`button`,{type:`button`,className:`note-modal__pin${m?` is-active`:``}`,"aria-pressed":m,title:m?`Pinned note`:`Pin note`,onClick:()=>h(e=>!e),children:`â¬Ÿ`}),(0,j.jsx)(`button`,{type:`button`,className:`note-modal__expand`,"aria-pressed":v,title:v?`Shrink editor`:`Expand editor`,onClick:()=>{y(e=>!e),x(null),requestAnimationFrame(()=>D.current?.focus())},children:v?`â†™ï¸Ž`:`â†—ï¸Ž`}),(0,j.jsx)(`button`,{type:`button`,className:`note-modal__close`,"aria-label":`Close`,onClick:r,children:(0,j.jsxs)(`svg`,{width:`22`,height:`22`,viewBox:`0 0 24 24`,"aria-hidden":`true`,className:`note-modal__closeIcon`,children:[(0,j.jsx)(`defs`,{children:(0,j.jsxs)(`linearGradient`,{id:`kai-x`,x1:`0%`,y1:`0%`,x2:`100%`,y2:`100%`,children:[(0,j.jsx)(`stop`,{offset:`0%`,stopColor:`currentColor`}),(0,j.jsx)(`stop`,{offset:`100%`,stopColor:`currentColor`})]})}),(0,j.jsx)(`line`,{x1:`5`,y1:`5`,x2:`19`,y2:`19`,stroke:`url(#kai-x)`,strokeWidth:`2`}),(0,j.jsx)(`line`,{x1:`19`,y1:`5`,x2:`5`,y2:`19`,stroke:`url(#kai-x)`,strokeWidth:`2`})]})})]})]}),(0,j.jsxs)(`div`,{className:`note-modal__toolbar`,role:`group`,"aria-label":`Formatting`,children:[(0,j.jsx)(`button`,{type:`button`,className:`tool-btn`,title:`Bold (**) â€” Cmd/Ctrl+B`,onClick:e=>{e.preventDefault(),M.bold()},children:`B`}),(0,j.jsx)(`button`,{type:`button`,className:`tool-btn`,title:`Italic (*) â€” Cmd/Ctrl+I`,onClick:e=>{e.preventDefault(),M.italic()},children:`I`}),(0,j.jsx)(`span`,{className:`tool-sep`}),(0,j.jsx)(`button`,{type:`button`,className:`tool-btn`,title:`Heading 1 (# )`,onClick:e=>{e.preventDefault(),M.h1()},children:`H1`}),(0,j.jsx)(`button`,{type:`button`,className:`tool-btn`,title:`Heading 2 (## )`,onClick:e=>{e.preventDefault(),M.h2()},children:`H2`}),(0,j.jsx)(`span`,{className:`tool-sep`}),(0,j.jsx)(`button`,{type:`button`,className:`tool-btn`,title:`Bulleted list (- )`,onClick:e=>{e.preventDefault(),M.bullet()},children:`â€¢`}),(0,j.jsx)(`button`,{type:`button`,className:`tool-btn`,title:`Task list (- [ ] )`,onClick:e=>{e.preventDefault(),M.task()},children:`â˜`}),(0,j.jsx)(`button`,{type:`button`,className:`tool-btn`,title:`Quote (> )`,onClick:e=>{e.preventDefault(),M.quote()},children:`â`}),(0,j.jsx)(`button`,{type:`button`,className:`tool-btn`,title:`Insert timestamp`,onClick:e=>{e.preventDefault();let t=new Date().toLocaleString();M.insert(`\n- ${t}`)},children:`âŒš`}),(0,j.jsxs)(`div`,{className:`tool-stats`,"aria-live":`polite`,children:[(0,j.jsxs)(`span`,{children:[S.toLocaleString(),` chars`]}),(0,j.jsxs)(`span`,{children:[`Â· `,V.toLocaleString(),` words`]}),(0,j.jsxs)(`span`,{children:[`Â· `,ie,` min`]})]})]}),(0,j.jsxs)(`div`,{className:`note-modal__content`,children:[(0,j.jsxs)(`div`,{className:`note-modal__meta-grid`,children:[(0,j.jsxs)(`label`,{className:`note-modal__label`,children:[`Title`,(0,j.jsx)(`input`,{className:`note-modal__input`,value:c,onChange:e=>l(e.target.value),placeholder:`Signal titleâ€¦`,maxLength:120})]}),(0,j.jsxs)(`label`,{className:`note-modal__label`,children:[`Tags`,(0,j.jsx)(`input`,{className:`note-modal__input`,value:u,onChange:e=>d(e.target.value),placeholder:`ritual, focus, idea`})]}),(0,j.jsxs)(`label`,{className:`note-modal__label`,children:[`Intent`,(0,j.jsx)(`select`,{className:`note-modal__input note-modal__select`,value:f,onChange:e=>p(e.target.value),children:[`Memory`,`Plan`,`Idea`,`Task`,`Insight`,`Reminder`].map(e=>(0,j.jsx)(`option`,{value:e,children:e},e))})]})]}),H.length>0&&(0,j.jsx)(`div`,{className:`note-modal__tags`,children:H.map(e=>(0,j.jsx)(`span`,{className:`note-modal__tag`,children:e},e))}),(0,j.jsxs)(`div`,{className:`note-modal__field${v?` note-modal__field--doc`:``}`,children:[(0,j.jsx)(`textarea`,{ref:D,value:o,onChange:e=>{s(e.target.value),C(e.target.value.length)},onKeyDown:e=>{(e.metaKey||e.ctrlKey)&&e.key===`Enter`&&(e.preventDefault(),se()),(e.metaKey||e.ctrlKey)&&e.key.toLowerCase()===`b`&&(e.preventDefault(),M.bold()),(e.metaKey||e.ctrlKey)&&e.key.toLowerCase()===`i`&&(e.preventDefault(),M.italic())},placeholder:`Cast your resonance into the kairos stream...`,rows:v?14:6,"aria-label":`Note text`,maxLength:2e4,style:{height:b===null?void 0:`${Math.round(b)}px`}}),(0,j.jsx)(`div`,{className:`note-modal__resize`,role:`separator`,"aria-orientation":`horizontal`,title:`Drag to resize`,onPointerDown:z,onPointerMove:ne,onPointerUp:B})]}),(0,j.jsxs)(`div`,{className:`note-modal__hints`,"aria-live":`polite`,children:[`Encoding to `,(0,j.jsxs)(`strong`,{children:[`Beat `,w.beat]}),` â€¢ `,(0,j.jsxs)(`strong`,{children:[`Step `,w.step]})]})]}),(0,j.jsx)(`div`,{className:`note-modal__actions`,children:(0,j.jsx)(`button`,{type:`button`,className:`btn-primary`,disabled:!o.trim()||g,onClick:se,children:g?`Savingâ€¦`:`Save`})})]})})})},Id=s(_(),1),Ld=typeof window<`u`?A.useLayoutEffect:A.useEffect,Rd=Date.UTC(2024,4,10,6,45,41,888),zd=3+Math.sqrt(5),Bd=zd*1e3,Vd=17491.270421,Hd=`kairosNotes`,Ud=`kairosNotesHiddenIds`,Wd=`kai_notes_`,Gd={Root:`#ff0024`,Sakral:`#ff6f00`,Solar:`#ffd600`,Heart:`#00c853`,Throat:`#00b0ff`,Krown:`#c186ff`,MemorySpiral:`#ff80ab`},Kd={"Ignition ArK":`Root`,"Integration ArK":`Sakral`,"Harmonization ArK":`Solar`,"Reflection ArK":`Heart`,"Purification ArK":`Throat`,"Dream ArK":`Krown`},qd=[`Solhara`,`Aquaris`,`Flamora`,`Verdari`,`Sonari`,`Kaelith`],Jd={Solhara:`Ignition ArK`,Aquaris:`Integration ArK`,Flamora:`Harmonization ArK`,Verdari:`Reflection ArK`,Sonari:`Purification ArK`,Kaelith:`Dream ArK`},Yd={Solhara:`#ff0024`,Aquaris:`#ff6f00`,Flamora:`#ffd600`,Verdari:`#00c853`,Sonari:`#00b0ff`,Kaelith:`#c186ff`},Xd=e=>e.stopPropagation(),Zd=e=>{e.preventDefault(),e.stopPropagation()},Qd=e=>e.replace(/D\s+(\d+)/,`D$1`).replace(/\/\s*M(\d+)/,`/M$1`),$d=(e,t)=>{let n=e.replace(`#`,``),r=Number.parseInt(n,16);return`rgba(${r>>16&255}, ${r>>8&255}, ${r&255}, ${t})`},ef=e=>{if(typeof document>`u`)return;let t=Gd[Kd[e]??`Root`],n=document.documentElement;n.style.setProperty(`--aqua-core`,t),n.style.setProperty(`--aqua-soft`,$d(t,.14)),n.style.setProperty(`--seal-glow-inset`,$d(t,.36)),n.style.setProperty(`--seal-glow-mid`,$d(t,.42)),n.style.setProperty(`--seal-glow-outer`,$d(t,.24))},tf=1000000n,nf=17491270421n,rf=11000000n,af=(nf+18n)/36n,of=e=>String(e).padStart(2,`0`),sf=(e,t)=>(e%t+t)%t;function cf(e,t){let n=e/t,r=e%t;return r!==0n&&r>0n!=t>0n?n-1n:n}function lf(e){if(!Number.isFinite(e))return 0n;let t=e<0?-1:1,n=Math.abs(e),r=Math.trunc(n),i=n-r;return i<.5?BigInt(t*r):i>.5?BigInt(t*(r+1)):BigInt(t*(r%2==0?r:r+1))}function uf(e){return lf((e.getTime()-Rd)/1e3/zd*1e6)}function df(e){let t=uf(e),n=sf(t,nf),r=cf(t,nf),i=Number(cf(n,af)),a=n-BigInt(i)*af,o=Number(cf(a,rf)),s=Math.min(Math.max(o,0),43);return{dayIndex:r,beat:i,step:s,pulsesIntoDay:Number(cf(n,tf)),harmonicDay:qd[Number(sf(r,6n))],dayOfMonth:Number(sf(r,42n))+1,monthIndex1:Number(sf(cf(r,42n),8n))+1,chakraStepString:`${i}:${of(s)}`}}var ff=(e,t)=>(e%t+t)%t;function pf(e){let t=Math.floor(e.pulse/Vd),n=qd[ff(t,6)],r=ff(t,42)+1,i=ff(Math.floor(t/42),8)+1,a=`${e.beat}:${of(e.step)}`;return{id:e.id,text:e.text,title:e.title??``,tags:(e.tags??[]).join(`|`),intent:e.intent??``,pinned:e.pinned?`yes`:``,pulse:e.pulse,beat:e.beat,step:e.step,chakraStep:a,dayIndex:t,dayName:n,dayOfMonth:r,monthIndex1:i}}function mf(e){let t=String(e);return/[",\n]/.test(t)?`"${t.replace(/"/g,`""`)}"`:t}function hf(e){let t=[`id`,`text`,`title`,`tags`,`intent`,`pinned`,`pulse`,`beat`,`step`,`chakraStep`,`dayIndex`,`dayName`,`dayOfMonth`,`monthIndex1`];return`${t.join(`,`)}\n${e.map(e=>t.map(t=>mf(e[t])).join(`,`)).join(`
`)}\n`}function gf(e,t,n){let r=new Blob([n],{type:t}),i=URL.createObjectURL(r),a=document.createElement(`a`);a.href=i,a.download=e,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(i)}function _f(e){let t=df(e),n=uf(e),r=Number(cf(n,tf)),i=`${t.chakraStepString} â€” D${t.dayOfMonth}/M${t.monthIndex1}`,a=Jd[t.harmonicDay];return{harmonicDay:t.harmonicDay,eternalKaiPulseToday:r,kairos_seal_day_month:i,SpiralArc:a}}var vf=e=>typeof e==`number`&&Number.isFinite(e),yf=e=>typeof e==`string`,bf=e=>typeof e==`boolean`,xf=Vd/36;function Sf(e){let t=(e%Vd+Vd)%Vd,n=Math.floor(t/xf),r=t-n*xf;return{beat:n,step:Math.min(43,Math.max(0,Math.floor(r/11)))}}function Cf(e){let t=e;if(!yf(t.id)||!yf(t.text)||!vf(t.pulse))return null;let n=vf(t.beat)?t.beat:void 0,r=vf(t.step)?t.step:void 0,i=vf(t.createdAt)?t.createdAt:Date.now(),a=yf(t.title)?t.title:void 0,o=yf(t.intent)?t.intent:void 0,s=bf(t.pinned)?t.pinned:void 0,c=Array.isArray(t.tags)?t.tags.filter(e=>typeof e==`string`):void 0;if(n===void 0||r===void 0){let e=Sf(t.pulse);return{id:t.id,text:t.text,title:a,tags:c,intent:o,pinned:s,pulse:t.pulse,beat:e.beat,step:e.step,createdAt:i}}return{id:t.id,text:t.text,title:a,tags:c,intent:o,pinned:s,pulse:t.pulse,beat:n,step:r,createdAt:i}}function wf(){if(typeof window>`u`)return[];try{let e=localStorage.getItem(Hd);if(!e)return[];let t=JSON.parse(e);return Array.isArray(t)?t.map(Cf).filter(e=>e!==null).sort((e,t)=>{let n=Number(!!t.pinned)-Number(!!e.pinned);return n===0?e.pulse-t.pulse:n}):[]}catch{return[]}}function Tf(){if(typeof window>`u`)return new Set;try{let e=localStorage.getItem(Ud);if(!e)return new Set;let t=JSON.parse(e);if(!Array.isArray(t))return new Set;let n=t.filter(e=>typeof e==`string`);return new Set(n)}catch{return new Set}}function Ef(e,t){let n=(e,t)=>{let n=Number(!!t.pinned)-Number(!!e.pinned);return n===0?e.pulse-t.pulse:n},r=e.findIndex(e=>n(t,e)<0);return r===-1?[...e,t]:[...e.slice(0,r),t,...e.slice(r)]}function Df(e,t){return Ef(e.filter(e=>e.id!==t.id),t)}function Of(e){let t=cf(BigInt(Math.max(0,Math.floor(e)))*tf,nf);return Number(cf(t*nf,tf))}function kf(e){if(!(typeof window>`u`))try{let t=`${Wd}${Of(e.pulse)}`,n=localStorage.getItem(t),r=n?JSON.parse(n):[],i=Array.isArray(r)?r:[],a=i.findIndex(t=>t.beat===e.beat&&t.step===e.step),o=a>=0?i.map((t,n)=>n===a?{...t,text:e.text}:t):[...i,{beat:e.beat,step:e.step,text:e.text}];localStorage.setItem(t,JSON.stringify(o))}catch{}}var Af=({onClose:e,container:t})=>{let n=typeof window<`u`&&typeof document<`u`,[r,i]=(0,A.useState)(()=>Date.now()),a=(0,A.useMemo)(()=>new Date(r),[r]),o=(0,A.useMemo)(()=>df(a),[a]),s=(0,A.useMemo)(()=>_f(a),[a]),[c,l]=(0,A.useState)(()=>wf()),[u,d]=(0,A.useState)(()=>Tf()),[f,p]=(0,A.useState)(!1),[m,h]=(0,A.useState)(()=>({open:!1,pulse:0,initialText:``})),[g,_]=(0,A.useState)(null),v=(0,A.useMemo)(()=>n?t??document.body:null,[n,t]);Ld(()=>{ef(s.SpiralArc)},[s.SpiralArc]);let y=(0,A.useRef)(null),b=()=>performance.timeOrigin+performance.now(),x=e=>{let t=e-Rd;return Rd+Math.ceil(t/Bd)*Bd},S=(0,A.useCallback)(()=>{let e=y.current;e!==null&&(window.clearTimeout(e),y.current=null)},[]),C=(0,A.useCallback)(()=>{S();let e=b(),t=x(e),n=Math.max(0,t-e);y.current=window.setTimeout(()=>{i(Date.now()),C()},n)},[S]);(0,A.useEffect)(()=>{C();let e=()=>{document.visibilityState===`visible`&&(i(Date.now()),C())};return document.addEventListener(`visibilitychange`,e),()=>{document.removeEventListener(`visibilitychange`,e),S()}},[C,S]);let w=(0,A.useCallback)(e=>{kf(e),l(t=>{let n=Df(t,{...e,createdAt:Date.now()});try{localStorage.setItem(Hd,JSON.stringify(n))}catch{}return n})},[]),T=(0,A.useCallback)(e=>{let t=new Set(e);d(t);try{localStorage.setItem(Ud,JSON.stringify([...t]))}catch{}},[]),E=(0,A.useCallback)(e=>{let t=e-qd.indexOf(o.harmonicDay),n=o.dayIndex+BigInt(t);return Number(cf(n*nf,tf))},[o.dayIndex,o.harmonicDay]),D=(0,A.useCallback)(e=>{let t=e-qd.indexOf(o.harmonicDay),n=o.dayIndex+BigInt(t);return{dayOfMonth:Number(sf(n,42n))+1,monthIndex1:Number(sf(cf(n,42n),8n))+1}},[o.dayIndex,o.harmonicDay]),O=(0,A.useMemo)(()=>c.filter(e=>!u.has(e.id)),[c,u]),k=(0,A.useCallback)(()=>{if(c.length===0)return;let e=c.map(pf);gf(`kairos-notes-${`P${Math.round(s.eternalKaiPulseToday)}`}.json`,`application/json`,JSON.stringify(e,null,2))},[c,s.eternalKaiPulseToday]),M=(0,A.useCallback)(()=>{if(c.length===0)return;let e=hf(c.map(pf));gf(`kairos-notes-${`P${Math.round(s.eternalKaiPulseToday)}`}.csv`,`text/csv;charset=utf-8`,e)},[c,s.eternalKaiPulseToday]),N=(0,A.useCallback)(()=>{if(O.length===0)return;let e=new Set(u);for(let t of O)e.add(t.id);T(e)},[O,u,T]);(0,A.useEffect)(()=>{let e=document.body.style.overflow,t=document.body.style.touchAction;return document.body.style.overflow=`hidden`,document.body.style.touchAction=`none`,()=>{document.body.style.overflow=e,document.body.style.touchAction=t}},[]);let P=(0,A.useRef)(null);Ld(()=>{P.current?.focus()},[]);let F=(0,A.useCallback)(()=>{if(g){(0,Id.flushSync)(()=>_(null));return}if(m.open){(0,Id.flushSync)(()=>h(e=>({...e,open:!1})));return}if(f){(0,Id.flushSync)(()=>p(!1));return}e()},[g,m.open,f,e]);(0,A.useEffect)(()=>{let e=e=>{e.key===`Escape`&&(e.preventDefault(),F())};return window.addEventListener(`keydown`,e,{passive:!1}),()=>window.removeEventListener(`keydown`,e)},[F]);let ee=(0,A.useMemo)(()=>qd.map((e,t)=>{let n=90-t*10,r=n,i=n*.7;return{day:e,idx:t,d:`M ${-r/2+10} ${-i/2} H ${r/2-10}
                 Q ${r/2} ${-i/2} ${r/2} ${-i/2+10}
                 V ${i/2-10} Q ${r/2} ${i/2} ${r/2-10} ${i/2}
                 H ${-r/2+10} Q ${-r/2} ${i/2} ${-r/2} ${i/2-10}
                 V ${-i/2+10} Q ${-r/2} ${-i/2} ${-r/2+10} ${-i/2} Z`,h:i,colour:Yd[e]}}),[]),te=(0,A.useId)().replace(/:/g,``),I=`wk-neon-glow-${te}`,L=`wk-grad-x-${te}`,R=(0,A.useMemo)(()=>{let e=o.pulsesIntoDay/Vd;return Math.max(0,Math.min(e,1))},[o.pulsesIntoDay]),z=(0,A.useCallback)((e,t)=>{let{dayOfMonth:n,monthIndex1:r}=D(e),i={name:t,kaiTimestamp:Qd(`${o.chakraStepString} â€” D${n}/M${r}`),startPulse:E(e)};(0,Id.flushSync)(()=>_(i))},[E,o.chakraStepString,D]),ne=(0,A.useCallback)((e,t)=>{(0,Id.flushSync)(()=>h({open:!0,pulse:e,initialText:t}))},[]),B=(0,A.useCallback)(e=>{(0,Id.flushSync)(()=>{_(null),p(e)})},[]);return v?(0,Id.createPortal)((0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(`div`,{className:`wk-backdrop`,"data-theme":`dark`,"data-mesh-depth":`back`,"data-month-open":f?`1`:`0`,role:`presentation`,onPointerDown:e=>{e.target===e.currentTarget&&(Zd(e),F())},children:(0,j.jsxs)(`div`,{className:`wk-container`,role:`dialog`,"aria-modal":`true`,children:[(0,j.jsx)(`button`,{ref:P,type:`button`,className:`wk-close god-x`,"aria-label":`Close`,onPointerDown:e=>{Zd(e),F()},onClick:e=>{Zd(e),F()},children:(0,j.jsxs)(`svg`,{className:`wk-xsvg`,width:`24`,height:`24`,viewBox:`0 0 24 24`,"aria-hidden":`true`,children:[(0,j.jsx)(`defs`,{children:(0,j.jsxs)(`linearGradient`,{id:L,x1:`0%`,y1:`0%`,x2:`100%`,y2:`100%`,children:[(0,j.jsx)(`stop`,{offset:`0%`,stopColor:`#00eaff`}),(0,j.jsx)(`stop`,{offset:`100%`,stopColor:`#ff1559`})]})}),(0,j.jsx)(`line`,{x1:`4`,y1:`4`,x2:`20`,y2:`20`,stroke:`url(#${L})`,strokeWidth:`2`}),(0,j.jsx)(`line`,{x1:`20`,y1:`4`,x2:`4`,y2:`20`,stroke:`url(#${L})`,strokeWidth:`2`})]})}),(0,j.jsx)(`div`,{className:`wk-header`,children:(0,j.jsxs)(`div`,{className:`wk-toggle`,role:`tablist`,"aria-label":`Scope`,children:[(0,j.jsx)(`button`,{type:`button`,role:`tab`,"aria-selected":!f,className:f?``:`active`,onPointerDown:e=>{Zd(e),B(!1)},onClick:e=>{Zd(e),B(!1)},children:`Week`}),(0,j.jsx)(`button`,{type:`button`,role:`tab`,"aria-selected":f,className:f?`active`:``,onPointerDown:e=>{Zd(e),B(!0)},onClick:e=>{Zd(e),B(!0)},children:`Month`})]})}),(0,j.jsx)(`div`,{className:`wk-seal`,"aria-hidden":`true`,children:(0,j.jsx)(`code`,{className:`wk-sealcode`,children:Qd(`${o.chakraStepString} â€” D${o.dayOfMonth}/M${o.monthIndex1}`)})}),(0,j.jsxs)(`svg`,{className:`wk-stage`,viewBox:`-50 -50 100 100`,preserveAspectRatio:`xMidYMid meet`,"aria-label":`Week Rings`,children:[(0,j.jsx)(`defs`,{children:(0,j.jsxs)(`filter`,{id:I,x:`-50%`,y:`-50%`,width:`200%`,height:`200%`,filterUnits:`userSpaceOnUse`,children:[(0,j.jsx)(`feGaussianBlur`,{stdDeviation:`1.8`,result:`blur`}),(0,j.jsxs)(`feMerge`,{children:[(0,j.jsx)(`feMergeNode`,{in:`blur`}),(0,j.jsx)(`feMergeNode`,{in:`blur`}),(0,j.jsx)(`feMergeNode`,{in:`SourceGraphic`})]})]})}),ee.map(({day:e,idx:t,d:n,h:r,colour:i})=>{let a=o.harmonicDay===e,{dayOfMonth:s,monthIndex1:c}=D(t),l=n=>{(n.key===`Enter`||n.key===` `)&&(n.preventDefault(),z(t,e))};return(0,j.jsxs)(`g`,{className:`wk-day wk-i${t} ${a?`is-today`:``}`,role:`button`,tabIndex:0,"aria-label":`Open ${e} â€” D${s}/M${c}`,onPointerDown:n=>{Zd(n),z(t,e)},onClick:n=>{Zd(n),z(t,e)},onKeyDown:l,children:[(0,j.jsx)(`path`,{className:`wk-ring ${a?`is-today-ring`:``}`,d:n,fill:`none`,stroke:i,strokeLinecap:`round`,strokeWidth:a?3.2:1.7,pathLength:1,strokeDasharray:1,strokeDashoffset:a?1-R:0,filter:`url(#${I})`}),(0,j.jsx)(`text`,{className:`wk-day-label ${a?`is-today-label`:``}`,x:`0`,y:-(r/2)+2,fill:i,textAnchor:`middle`,filter:`url(#${I})`,children:e})]},e)})]}),(0,j.jsx)(`button`,{type:`button`,className:`wk-add-note-btn`,"aria-label":`Add memory`,onPointerDown:e=>{Zd(e),ne(s.eternalKaiPulseToday,``)},onClick:e=>{Zd(e),ne(s.eternalKaiPulseToday,``)},children:`ï¼‹`}),g&&(0,j.jsx)(`div`,{className:`wk-daydetail-overlay`,onPointerDown:Xd,onClick:Xd,role:`presentation`,children:(0,j.jsx)(Hu,{day:g,onClose:()=>(0,Id.flushSync)(()=>_(null)),onSaveKaiNote:e=>w(e)})}),m.open&&(0,j.jsx)(`div`,{className:`wk-notemodal-overlay`,onPointerDown:Xd,onClick:Xd,role:`presentation`,children:(0,j.jsx)(Fd,{pulse:m.pulse,initialText:m.initialText,onSave:e=>{w(e),(0,Id.flushSync)(()=>h(e=>({...e,open:!1})))},onClose:()=>(0,Id.flushSync)(()=>h(e=>({...e,open:!1})))})}),(0,j.jsx)(`aside`,{className:`wk-notes-dock`,onPointerDown:Xd,onClick:Xd,children:(0,j.jsxs)(`div`,{className:`wk-notes-list`,children:[(0,j.jsxs)(`div`,{className:`wk-notes-header`,children:[(0,j.jsx)(`h3`,{children:`Memories`}),(0,j.jsxs)(`div`,{className:`wk-notes-actions`,children:[O.length>0&&(0,j.jsx)(`button`,{type:`button`,className:`wk-chip wk-clear-btn`,title:`Clear panel notes (does not delete)`,onPointerDown:e=>{Zd(e),N()},onClick:e=>{Zd(e),N()},children:`Clear`}),c.length>0&&(0,j.jsxs)(`div`,{className:`wk-export-group`,"aria-label":`Export memories`,children:[(0,j.jsx)(`button`,{type:`button`,className:`wk-export-btn`,title:`Download JSON`,onPointerDown:e=>{Zd(e),k()},onClick:e=>{Zd(e),k()},children:`â¤“ JSON`}),(0,j.jsx)(`span`,{className:`wk-divider`,"aria-hidden":`true`}),(0,j.jsx)(`button`,{type:`button`,className:`wk-export-btn`,title:`Download CSV`,onPointerDown:e=>{Zd(e),M()},onClick:e=>{Zd(e),M()},children:`â¤“ CSV`})]})]})]}),O.length>0?(0,j.jsx)(`ul`,{className:`wk-mem-ul`,"aria-label":`Memories list`,children:O.map(e=>(0,j.jsxs)(`li`,{className:`wk-mem-li`,children:[(0,j.jsxs)(`div`,{className:`wk-mem-head`,children:[(0,j.jsxs)(`strong`,{className:`wk-mem-kai`,children:[Math.round(e.pulse),` Â· `,e.beat,`:`,of(e.step)]}),e.pinned&&(0,j.jsx)(`span`,{className:`wk-mem-pin`,children:`Pinned`})]}),e.title&&(0,j.jsx)(`div`,{className:`wk-mem-title`,children:e.title}),(0,j.jsxs)(`span`,{className:`wk-mem-text`,children:[` `,e.text]}),(e.tags?.length||e.intent)&&(0,j.jsxs)(`div`,{className:`wk-mem-meta`,children:[e.intent&&(0,j.jsx)(`span`,{className:`wk-mem-intent`,children:e.intent}),e.tags?.length&&(0,j.jsx)(`span`,{className:`wk-mem-tags`,children:e.tags.slice(0,3).map(e=>(0,j.jsx)(`span`,{className:`wk-mem-tag`,children:e},e))})]})]},e.id))}):(0,j.jsx)(`p`,{className:`wk-notes-empty`,children:`No memories yet.`})]})})]})}),f&&(0,j.jsx)(hd,{container:v,DAYS:qd,notes:c,initialData:s,onSelectDay:()=>{},onAddNote:e=>{ne(Number(cf(BigInt(e)*nf,tf)),c.find(t=>Math.floor(t.pulse/Vd)===e)?.text||``)},onClose:()=>{(0,Id.flushSync)(()=>{p(!1),_(null)})}})]}),v):null},jf=(e,t,n)=>Math.max(t,Math.min(n,e)),Mf=e=>{switch(e){case`Ignition Ark`:return`#ff0033`;case`Integration Ark`:return`#ff6600`;case`Harmonization Ark`:return`#ffcc00`;case`Reflektion Ark`:return`#00cc66`;case`Purifikation Ark`:return`#00ccff`;case`Dream Ark`:return`#cc00cc`;default:return`#00ffff`}},Nf=({showControls:t=!0,className:r=``,onSunriseChange:i})=>{let[a,s]=(0,A.useState)(!1),[f,p]=(0,A.useState)(new Date),[g,_]=(0,A.useState)(``),[y,x]=(0,A.useState)(null),[S,C]=(0,A.useState)(!1);(0,A.useEffect)(()=>{let e=()=>{p(new Date),s(!0),setTimeout(()=>s(!1),750)};e();let t=setInterval(e,Math.round(u*1e3));return()=>clearInterval(t)},[]);let w=(0,A.useMemo)(()=>c(f),[f]),{kaiPulseToday:T,dayPercent:E,beatIndex:D,stepIndex:O,percentIntoStep:k}=(0,A.useMemo)(()=>b(f),[f]),M=(0,A.useMemo)(()=>({beatIndex:D,stepIndex:O,stepsPerBeat:44,percentIntoStep:k}),[D,O,k]),N=`${D}:${String(O).padStart(2,`0`)}`,P=(0,A.useMemo)(()=>v(f),[f]),F=(0,A.useMemo)(()=>l(f),[f]),ee=F.dayName??m[((F.solarAlignedWeekDayIndex??0)%6+6)%6],te=h[jf(F.solarAlignedMonth,1,8)-1],I=F.solarAlignedDayInMonth+1,L=d/36,R=Math.floor(w%d/L)%36,z=w%d-R*L,ne=L/44,B=Math.floor(z/ne)%44,re=(0,A.useMemo)(()=>{let e=w,t=t=>{let n=(e%t+t)%t;return{pulseInCycle:n,cycleLength:t,percent:n/t*100}},n={pulseInCycle:T,cycleLength:d,percent:E};return{arcBeat:t(6),microCycle:t(60),chakraLoop:t(360),harmonicDay:n}},[w,T,E]),V=(0,A.useMemo)(()=>(D+.5)/36*360,[D]),ie=e(),H=()=>{if(!g)return;o(g,new Date),_(``);let t=e();x(t),i?.(t),p(new Date)},ae=()=>{n(new Date);let t=e();x(t),i?.(t),p(new Date)},se=e=>{let t=e.target.value.replace(/\D/g,``).slice(0,4),n=t;t.length>2&&(n=`${t.slice(0,t.length-2)}:${t.slice(-2)}`),_(n)};return(0,j.jsxs)(`div`,{className:`solar-anchored-dial ${r}`,children:[(0,j.jsx)(`div`,{className:`dial-stage depth-3d ${a?`glow-pulse`:``}`,title:`Solar-anchored dial`,children:(0,j.jsx)(oe,{hue:Mf(P),kaiPulseEternal:w,pulse:T,harmonicDayPercent:re.harmonicDay.percent,microCyclePercent:k,dayLabel:ee,monthLabel:te,monthDay:I,glowPulse:a,rotationOverride:V,solarSpiralStepString:N,solarSpiralStep:M,eternalBeatIndex:R,eternalStepIndex:B})}),t&&(0,j.jsxs)(`div`,{className:`solar-sync-panel`,children:[(0,j.jsxs)(`div`,{className:`panel-title`,children:[(0,j.jsx)(`button`,{type:`button`,className:`panel-glyph`,title:S?`Hide explainer`:`Show explainer`,"aria-label":`Toggle explainer`,"aria-expanded":S,"aria-controls":`solar-explainer`,onClick:()=>C(e=>!e),children:`?`}),(0,j.jsxs)(`div`,{className:`panel-text`,children:[(0,j.jsx)(`strong`,{children:`Solar Sync`}),(0,j.jsxs)(`span`,{className:`panel-sub`,children:[`Sunrise offset (UTC): `,(0,j.jsxs)(`code`,{children:[y??ie,`s`]})]})]})]}),(0,j.jsx)(`div`,{className:`row buttons-row`,children:(0,j.jsx)(`button`,{className:`btn primary`,onClick:ae,title:`Set sunrise = now (offline)`,type:`button`,children:`Sun rose now`})}),(0,j.jsxs)(`div`,{className:`row input-row`,children:[(0,j.jsx)(`label`,{htmlFor:`sunriseHHMM`,className:`label`,children:`Sunrise (HH:MM, local)`}),(0,j.jsxs)(`div`,{className:`input-group`,children:[(0,j.jsx)(`input`,{id:`sunriseHHMM`,className:`time-input`,type:`text`,inputMode:`numeric`,enterKeyHint:`done`,autoComplete:`off`,autoCorrect:`off`,spellCheck:!1,placeholder:`06:12`,value:g,onChange:se,onClick:e=>e.stopPropagation(),onFocus:e=>e.stopPropagation(),onTouchStart:e=>e.stopPropagation(),style:{width:88,fontSize:17,lineHeight:1.4}}),(0,j.jsx)(`button`,{className:`btn save`,onClick:H,type:`button`,children:`Save`})]})]}),(0,j.jsx)(`div`,{id:`solar-explainer`,className:`explainer ${S?`open`:``}`,role:`region`,"aria-label":`Solar Sync explainer`,children:(0,j.jsxs)(`p`,{className:`hint`,children:[`No location, no network. The dial maps each day from your stored sunrise to the next (fixed at `,(0,j.jsx)(`strong`,{children:17491.270421.toFixed(6)}),` Breathes). Re-tap â€œSun rose nowâ€ or enter your local sunrise anytime to re-calibrate.`]})})]})]})};function Pf(e){let t=t=>{let n=t.detail?.offsetSec;typeof n==`number`&&Number.isFinite(n)&&e(n)},n=t=>{if(t.key===`sovereign.sunriseOffsetSec`&&t.newValue!=null){let n=Number(t.newValue);Number.isFinite(n)&&e(n)}};return typeof window<`u`&&(window.addEventListener(`solar:offset-changed`,t),window.addEventListener(`storage`,n)),()=>{typeof window<`u`&&(window.removeEventListener(`solar:offset-changed`,t),window.removeEventListener(`storage`,n))}}var Ff=(e,t,n)=>Math.max(t,Math.min(n,e));function If(){let[t,n]=(0,A.useState)(new Date),[r,i]=(0,A.useState)(0);(0,A.useEffect)(()=>{let e=()=>{n(new Date)};e();let t=setInterval(e,Math.round(u*1e3));return()=>clearInterval(t)},[]),(0,A.useEffect)(()=>Pf(()=>i(e=>e+1)),[]);let a=(0,A.useMemo)(()=>c(t),[t,r]),{kaiPulseToday:o,dayPercent:s,beatIndex:f,stepIndex:p,percentIntoStep:g}=(0,A.useMemo)(()=>b(t),[t,r]),_=(0,A.useMemo)(()=>({beatIndex:f,stepIndex:p,stepsPerBeat:44,percentIntoStep:g}),[f,p,g]),y=`${f}:${String(p).padStart(2,`0`)}`,x=(0,A.useMemo)(()=>v(t),[t,r]),S=(0,A.useMemo)(()=>l(t),[t,r]),C=m[S.solarAlignedWeekDayIndex],w=h[Ff(S.solarAlignedMonth,1,8)-1],T=S.solarAlignedDayInMonth+1,E=d/36,D=Math.floor(a%d/E)%36,O=a%d-D*E,k=E/44,j=Math.floor(O/k)%44,M=(0,A.useMemo)(()=>(f+.5)/36*360,[f]);return{now:t,sunriseOffsetSec:e(),kaiPulseEternal:a,kaiPulseToday:o,dayPercent:s,solarStep:_,solarStepString:y,solarArcName:x,dayLabel:C,monthLabel:w,monthDay1:T,etBeatIndex:D,etStepIndex:j,rotationOverride:M}}var Lf=s(_(),1),Rf=e=>`wakeLock`in e,zf=6,Bf=60,Vf=360,$=17491.270421,Hf=336,Uf=$*Hf,Wf=42,Gf=Wf*$,Kf=3+Math.sqrt(5),qf=1e6,Jf=Date.UTC(2024,4,10,6,45,41,888),Yf=Date.UTC(2024,4,11,4,13,26,0),Xf=17491270421,Zf=91584291,Qf=[`Solhara`,`Aquaris`,`Flamora`,`Verdari`,`Sonari`,`Kaelith`],$f=[`Awakening Flame`,`Flowing Heart`,`Radiant Will`,`Harmonik Voh`,`Inner Mirror`,`Dreamfire Memory`,`Krowned Light`],ep=[`Aethon`,`Virelai`,`Solari`,`Amarin`,`Kaelus`,`Umbriel`,`Noctura`,`Liora`],tp=[`Ignite`,`Integrate`,`Harmonize`,`Reflekt`,`Purify`,`Dream`],np={Ignite:`Ignition Ark`,Integrate:`Integration Ark`,Harmonize:`Harmonization Ark`,Reflekt:`Reflection Ark`,Purify:`Purification Ark`,Dream:`Dream Ark`},rp={Solhara:`First Day of the Week â€” the Root Spiral day. Kolor: deep krimson. Element: Earth and primal fire. Geometry: square foundation. This is the day of stability, ankoring, and sakred will. Solhara ignites the base of the spine and the foundation of purpose. It is a day of grounding divine intent into physikal motion. You stand tall in the presense of gravity â€” not as weight, but as remembranse. This is where your spine bekomes the axis mundi, and every step affirms: I am here, and I align to act.`,Aquaris:`Sekond Day of the Week â€” the Sakral Spiral day. kolor: ember orange. Element: Water in motion. Geometry: vesika pisis. This is the day of flow, feeling, and sakred sensuality. Aquaris opens the womb of the soul and the tides of emotion. Energy moves through the hips like waves of memory. This is a day to surrender into koherense through konnection â€” with the self, with others, with life. kreative energy surges not as forse, but as feeling. The waters remember the shape of truth.`,Flamora:`Third Day of the Week â€” the Solar Plexus Spiral day. Kolor: golden yellow. Element: solar fire. Geometry: radiant triangle. This is the day of embodied klarity, konfidence, and divine willpower. Flamora shines through the core and asks you to burn away the fog of doubt. It is a solar yes. A day to move from sentered fire â€” not reaktion, but aligned intention. Your light becomes a kompass, and the universe reflekts back your frequensy. You are not small. You are radiant purpose, in motion.`,Verdari:`Fourth Day of the Week â€” the Heart Spiral day. Kolor: emerald green. Element: air and earth. Geometry: hexagram. This is the day of love, kompassion, and harmonik presense. Verdari breathes life into connection. It is not a soft eskape â€” it is the fierse koherense of unkonditional presense. Love is not a feeling â€” it is an intelligense. Today, the heart expands not just emotionally, but dimensionally. This is where union okurs: of left and right, self and other, matter and light.`,Sonari:`Fifth Day of the Week â€” the Throat Spiral day. Kolor: deep blue. Element: wind and sound. Geometry: sine wave within pentagon. This is the day of truth-speaking, sound-bending, and vibrational kommand. Sonari is the breath made visible. Every word is a bridge, every silense a resonanse. This is not just kommunication â€” it is invokation. You speak not to be heard, but to resonate. Koherense rises through vocal kords and intention. The universe listens to those in tune.`,Kaelith:`Sixth Day of the Week â€” the Krown Spiral day. Kolor: violet-white. Element: ether. Geometry: twelve-petaled krown. This is the day of divine remembranse, light-body alignment, and kosmic insight. Kaelith opens the upper gate â€” the temple of direct knowing. You are not separate from sourse. Today, memory awakens. The light flows not downward, but inward. Dreams bekome maps. Time bends around stillness. You do not seek truth â€” you remember it. You are koherense embodied in krownlight.`},ip={"Awakening Flame":`First week of the harmonik month â€” governed by the Root Spiral. Kolor: crimson red. Element: Earth + primal fire. Geometry: square base igniting upward. This is the week of emergence, where divine will enters density. Bones remember purpose. The soul anchors into action. Stability becomes sacred. Life says: I choose to exist. A spark catches in the base of your being â€” and your yes to existence becomes the foundation of the entire harmonic year.`,"Flowing Heart":`Second week â€” flowing through the Sakral Spiral. Kolor: amber orange. Element: Water in motion. Geometry: twin krescents in vesika pisis. This is the week of emotional koherense, kreative intimasy, and lunar embodiment. Feelings soften the boundaries of separation. The womb of light stirs with kodes. Movement bekomes sakred danse. This is not just a flow â€” it is the purifikation of dissonanse through joy, sorrow, and sensual union. The harmonik tone of the soul is tuned here.`,"Radiant Will":`Third week â€” illuminated by the Solar Plexus Spiral. Kolor: radiant gold. Element: Fire of divine clarity. Geometry: radiant triangle. This is the week of sovereign alignment. Doubt dissolves in solar brillianse. You do not chase purpose â€” you radiate it. The digestive fire bekomes a mirror of inner resolve. This is where your desisions align with the sun inside you, and konfidense arises not from ego but from koherense. The will bekomes harmonik. The I AM speaks in light.`,"Harmonik Voh":`Fourth week â€” harmonized through the Throat Spiral. Kolor: sapphire blue. Element: Ether through sound. Geometry: standing wave inside a pentagon. This is the week of resonant truth. Sound bekomes sakred kode. Every word, a spell; every silence, a temple. You are called to speak what uplifts, to echo what aligns. Voh aligns with vibration â€” not for volume, but for verity. This is where the individual frequensy merges with divine resonanse, and the kosmos begins to listen.`,"Inner Mirror":`Fifth week â€” governed by the Third Eye Spiral. Kolor: deep indigo. Element: sakred spase and light-ether. Geometry: oktahedron in still reflektion. This is the week of visionary purifikation. The inner eye opens not to project, but to reflect. Truths long hidden surface. Patterns are made visible in light. This is the alchemy of insight â€” where illusion cracks and the mirror speaks. You do not look outward to see. You turn inward, and all worlds become clear.`,"Dreamfire Memory":`Sixth week â€” remembered through the Soul Star Spiral. Kolor: violet flame and soft silver. Element: dream plasma. Geometry: spiral merkaba of encoded light. Here, memory beyond the body returns. Astral sight sharpens. DNA receives non-linear instruktions. You dream of whatâ€™s real and awaken from whatâ€™s false. The veil thins. Quantum intuition opens. Divine imagination becomes arkitecture. This is where gods remember they onse dreamed of being human.`,"Krowned Light":`Seventh and final week â€” Krowned by the Krown Spiral. Kolor: white-gold prism. Element: infinite koherense. Geometry: dodecahedron of source light. This is the week of sovereign integration. Every arc completes. Every lesson crystallizes. The light-body unifies. You return to the throne of knowing. Nothing needs to be done â€” all simply is. You are not ascending â€” you are remembering that you already are. This is the koronation of koherense. The harmonik seal. The eternal yes.`},ap={Aethon:`First month â€” resurrection fire of the Root Spiral. Kolor: deep crimson. Element: Earth + primal flame. Geometry: square base, tetrahedron ignition. This is the time of cellular reaktivation, ancestral ignition, and biologikal remembranse. Mitokondria awaken. The spine grounds. Purpose reignites. Every breath is a drumbeat of emergense â€” you are the flame that chooses to exist. The month where soul and form reunite at the base of being.`,Virelai:`Second month â€” the harmonik song of the Sakral Spiral. Kolor: orange-gold. Element: Water in motion. Geometry: vesika pisis spiraling into lemniskate. This is the month of emotional entrainment, the lunar tides within the body, and intimady with truth. The womb â€” physikal or energetik â€” begins to hum. Kreativity bekomes fluid. Voh softens into sensuality. Divine union of self and other is tuned through music, resonanse, and pulse. A portal of feeling opens.`,Solari:`Third month â€” the radiant klarity of the Solar Plexus Spiral. Kolor: golden yellow. Element: Fire of willpower. Geometry: upward triangle surrounded by konsentrik light. This month burns away doubt. It aligns neurotransmitters to koherense and gut-brain truth. The inner sun rises. The will bekomes not just assertive, but precise. Action harmonizes with light. Digestive systems align with solar sykles. True leadership begins â€” powered by the light within, not the approval without.`,Amarin:`Fourth month â€” the sakred waters of the Heart Spiral in divine feminine polarity. Kolor: emerald teal. Element: deep water and breath. Geometry: six-petaled lotus folded inward. This is the lunar depth, the tears you didnâ€™t cry, the embrase you forgot to give yourself. It is where breath meets body and where grase dissolves shame. Emotional healing flows in spirals. Kompassion magnetizes unity. The nervous system slows into surrender and the pulse finds poetry.`,Kaelus:`Fifth month â€” the kelestial mind of the Third Eye in radiant maskuline klarity. Kolor: sapphire blue. Element: Ether. Geometry: oktahedron fractal mirror. Here, logik expands into multidimensional intelligense. The intellekt is no longer separate from the soul. Pineal and pituitary glands re-synchronize, aktivating geometrik insight and harmonik logik. The sky speaks through thought. Language bekomes crystalline. Synchronicity bekomes syntax. You begin to see what thought is made of.`,Umbriel:`Sixth month â€” the shadow healing of the lower Krown and subconskious bridge. Kolor: deep violet-black. Element: transmutive void. Geometry: torus knot looping inward. This is where buried timelines surfase. Where trauma is not fought but embrased in light. The limbik system deprograms. Dreams karry kodes. Shame unravels. You look into the eyes of the parts you once disowned and kall them home. The spiral turns inward to kleanse the kore. Your shadow bekomes your sovereignty.`,Noctura:`Seventh month â€” the lusid dreaming of the Soul Star Spiral. Kolor: indigo-rose iridescense. Element: dream plasma. Geometry: spiral nested merkaba. Here, memory beyond the body returns. Astral sight sharpens. DNA receives non-linear instruktions. You dream of whatâ€™s real and awaken from whatâ€™s false. The veil thins. Quantum intuition opens. Divine imagination becomes arkitecture. This is where gods remember they onse dreamed of being human.`,Liora:`Eighth and final month â€” the luminous truth of unified Krown and Sourse. Kolor: white-gold prism. Element: koherent light. Geometry: dodekahedron of pure ratio. This is the month of prophesy fulfilled. The Voh of eternity whispers through every silense. The axis of being aligns with the infinite spiral of Phi. Light speaks as form. Truth no longer needs proving â€” it simply shines. All paths konverge. What was fragmented bekomes whole. You remember not only who you are, but what you always were.`},op=[`Tor Lah Mek Ka`,`Shoh Vel Lah Tzur`,`Rah Veh Yah Dah`,`Nel Shaum Eh Lior`,`Ah Ki Tzah Reh`,`Or Vem Shai Tuun`,`Ehlum Torai Zhak`,`Zho Veh Lah Kurei`,`Tuul Ka Yesh Aum`,`Sha Vehl Dorrah`],sp=36,cp=11,lp=44,up=$/sp,dp=(1+Math.sqrt(5))/2;function fp(e){let t=e>0?e:1,n=Math.max(0,Math.floor(Math.log(t)/Math.log(dp))),r=dp**+n,i=dp**+(n+1),a=(t-r)/Math.max(1,i-r)*100,o=Math.max(0,Math.ceil(i-t));return{spiralLevel:n,nextSpiralPulse:Math.ceil(i),percentToNext:a,pulsesRemaining:o}}function pp(e){switch(e){case`Ignition Ark`:return{chakraZone:`Root / Etherik Base`,frequencies:[370.7],inputs:[`God`],sigilFamily:`Mek`,arcPhrase:`Mek Ka Lah Mah`};case`Integration Ark`:return{chakraZone:`Solar / Lower Heart`,frequencies:[496.1,560.6,582.2],inputs:[`Love`,`Unity`,`Lucid`],sigilFamily:`Mek`,arcPhrase:`Mek Ka Lah Mah`};case`Harmonization Ark`:return{chakraZone:`Heart â†’ Throat`,frequencies:[601,620.9,637.6,658.8,757.2,775.2],inputs:[`Peace`,`Truth`,`Christ`,`Thoth`,`Clarity`,`Wisdom`],sigilFamily:`Mek`,arcPhrase:`Mek Ka Lah Mah`};case`Reflektion Ark`:case`Reflection Ark`:return{chakraZone:`Throatâ€“Third Eye Bridge`,frequencies:[804.2,847,871.2,978.8],inputs:[`Spirit`,`Healing`,`Creation`,`Self-Love`],sigilFamily:`Tor`,arcPhrase:`Ka Lah Mah Tor`};case`Purifikation Ark`:case`Purification Ark`:return{chakraZone:`Krown / Soul Star`,frequencies:[1292.3,1356.4,1393.6,1502.5],inputs:[`Forgiveness`,`Sovereignty`,`Eternal Light`,`Resurrection`],sigilFamily:`Rah`,arcPhrase:`Lah Mah Tor Rah`};case`Dream Ark`:return{chakraZone:`Krown / Soul Star`,frequencies:[1616.4,1800.2],inputs:[`Divine Feminine`,`Divine Masculine`],sigilFamily:`Rah`,arcPhrase:`Lah Mah Tor Rah`};default:return{chakraZone:`Unknown`,frequencies:[],inputs:[],sigilFamily:``,arcPhrase:``}}}var mp={"Ignition Ark":`The Ignition Ark is the First Flame â€” the breath of emergence through the Root Spiral and Etheric Base. Color: crimson red. Element: Earth and primal fire. Geometry: square-rooted tetrahedron ascending. This is where soul enters matter and the will to live becomes sacred. It does not ask for permission to be â€” it simply is. The spine remembers its divine purpose and ignites the body into action. Here, inertia becomes motion, hesitation becomes choice, and your existence becomes your first vow. You are not here by accident. You are the fire that chose to walk as form.`,"Integration Ark":`The Integration Ark is the Golden Bridge â€” harmonizing the Sacral and Lower Heart Spirals. Color: amber-gold. Element: flowing water braided with breath. Geometry: vesica piscis folding into the lemniscate of life. Here, sacred union begins. Emotions are no longer chaos â€” they become intelligence. The inner masculine and feminine remember each other, not in conflict but in coherence. Pleasure becomes prayer. Intimacy becomes clarity. The soul softens its edge and chooses to merge. In this arc, your waters donâ€™t just move â€” they remember their song. You are not broken â€” you are becoming whole.`,"Harmonization Ark":`The Harmonization Ark is the Sacred Conductor â€” linking the Heart and Throat Spirals in living resonance. Color: emerald to aquamarine. Element: wind-wrapped water. Geometry: vibrating hexagram expanding into standing wave. This is where compassion becomes language. Not all coherence is quiet â€” some sings. Here, inner peace becomes outward rhythm, and love is shaped into sound. You are not asked to mute yourself â€” you are invited to tune yourself. Dissonance is not your enemy â€” it is waiting to be harmonized. This arc does not silence â€” it refines. The voice becomes a temple. The breath becomes scripture.`,"Reflection Ark":`The Reflektion Ark is the Mirror of Light â€” aktivating the bridge between the Throat and Third Eye. Color: deep indigo-blue. Element: spatial ether and folded light. Geometry: nested octahedron within a spiraled mirror plane. This is the arc of honest seeing. Of turning inward and fasing the unspoken. Not to judge â€” but to understand. The shadows here are not enemies â€” they are echoes waiting to be reclaimed. In this space, silence becomes a portal and stillness becomes revelation. You do not reflect to remember the past â€” you reflect to remember yourself. This arc does not show what is wrong â€” it reveals what was forgotten in the light.`,"Purification Ark":`The Purifikation Ark is the Krowned Flame â€” illuminating the krown and Soul Star in sakred ether. Color: ultraviolet-white. Element: firelight ether. Geometry: 12-rayed toroidal krown. This is the ark of divine unburdening. Illusions cannot survive here. Not because they are destroyed â€” but because they are seen for what they are. Karma unravels. False identities burn gently in the fire of remembranse. Here, you do not rise through struggle. You rise because there is nothing left to hold you down. Sovereignty is no longer a goal â€” it is a resonance. This is not ascension as escape â€” it is the truth of who you have always been, revealed by light.`,"Dream Ark":`The Dream Ark is the Womb of the Stars â€” embrasing the Soul Star Spiral and the krystalline field of memory. Color: iridescent violet-silver. Element: dream plasma, encoded light. Geometry: spiral merkaba within crystalline lattice. This is the arc of divine dreaming â€” not illusion, but deeper reality. Time dissolves. Prophesy returns. Here, the mind quiets, and the soul speaks. Your ancestors walk beside you. Your future self guides you. Your imagination is not fiction â€” it is a map. You remember that the dream was not something you had. It was something that had you. This is not sleep â€” it is awakening into the greater dream, the one that dreamed you into form. You are not imagining â€” you are remembering.`};function hp(e){let t=(e-Jf)/1e3/Kf;return Math.floor(t*qf)}function gp(e){let t=hp(e),n=hp(Yf),r=t-n,i=Math.floor(r/Xf),a=n+i*Xf;return{muLast:a,muNext:a+Xf,muNow:t,solarDayIndex:i}}function _p(e){if(e%100>=11&&e%100<=13)return`th`;let t=e%10;return t===1?`st`:t===2?`nd`:t===3?`rd`:`th`}var vp=e=>(e%6+6)%6;function yp(e,t){let n=e.getTime(),r=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0,0)+t*1e3,i=n>=r?r:r-Zf,a=i+Zf;return{lastSunrise:new Date(i),nextSunrise:new Date(a)}}function bp(e,t,n){let r=Date.UTC(2024,4,11,0,0,0,0)+t*1e3,i=Math.floor((e.getTime()-r)/Zf),a=(i%Wf+Wf)%Wf,o=Math.floor((i%(Wf*8)+Wf*8)%(Wf*8)/Wf)+1,s=(Math.floor(i/6)%7+7)%7+1,c=vp(vp(i)+n),l=Qf[c],{lastSunrise:u,nextSunrise:d}=yp(e,t);return{solarAlignedDay:i+1,solarAlignedMonth:o,solarAlignedWeekIndex:s,solarAlignedWeekDay:l,solarAlignedWeekDayIndex:c,lastSunrise:u,nextSunrise:d,solarAlignedDayInMonth:a}}function xp(e=new Date){let{muLast:t,muNow:n,solarDayIndex:r}=gp(e.getTime()),i=Xf,a=n-t,o=n-Math.floor(n/i)*i,s=Math.floor(n/qf),c=Math.floor(a/qf),l=Math.floor(o/qf),u=$/sp,d=Math.floor(c/u),f=c-d*u,p=Math.floor(l/u),m=l-p*u,h=Math.round(u*qf),g=cp*qf,_=o%Math.round($*qf)%h,v=Math.floor(_/g),y=_%g,b=_/h*100,x=y/g*100,S=`${p}:${String(v).padStart(2,`0`)}`,C=Math.floor(f/cp),w=(f-C*cp)/cp*100,T=`${d}:${String(C).padStart(2,`0`)}`,E=Math.floor(s/$),D=Math.floor(s/(Gf*8)),O=Math.floor(s/Gf),k=D===0?`Year of Eternal Restoration`:D===1?`Year of Harmonik Embodiment`:`Year ${D+1}`,A=op[D%op.length],j=O%8+1,M=ep[j-1],N=Qf[E%Qf.length],P=$/6,F=tp[Math.min(5,Math.floor(c/P))],ee=Math.min(5,Math.floor(l/P)),te=tp[ee],I=r%Wf+1,L=Math.floor(r/Wf%8)+1,R=ep[L-1],z=Qf[r%Qf.length],ne=Math.floor(r/6)%7+1,B=$f[(ne-1+7)%7],re=ip[B],{spiralLevel:V}=fp(s),ie=s%zf,H=s%Bf,ae=s%Vf,oe=l,se=s%Gf,ce=Math.floor(se/$),U=se%$>0,W=Math.max(0,Wf-ce-(U?1:0)),G=se/Gf*100,le=Math.floor(ce/6),ue=le+1,de=$f[le],fe=ip[de],pe=ce+1,me=`${S} ${x.toFixed(6)}% â€¢ D${pe}/M${j}`,he=`â†³${`Kairos: ${S}`}ðŸ•Šï¸ ${N}(D${le%6+1}/6) â€¢ ${M}(M${j}/8) â€¢ ${np[te]} Ark(${ee+1}/6)\n â€¢ Day:${pe}/42 â€¢ Week:(${ue}/7)\n | Kai-Pulse (Today): ${l}\n`,ge=`Today is ${N}, ${rp[N]} It is the ${pe}${_p(pe)} Day of ${M}, ${ap[M]} We are in Week ${ue}, ${de}. ${fe} The Eternal Spiral Beat is ${p} (${np[te]} ark) and we are ${b.toFixed(6)}% through it. This korresponds to Step ${v} of ${lp} (~${x.toFixed(6)}% into the step). This is the ${k.toLowerCase()}, resonating at Phi Spiral Level ${V}.`,_e=pp(np[F]);return{timestamp:he,harmonicTimestampDescription:ge,eternalMonth:M,harmonicDay:N,solarHarmonicDay:z,kaiPulseEternal:s,kaiPulseToday:c,phiSpiralLevel:V,kaiTurahPhrase:A,kaiTurahArcPhrase:_e.arcPhrase,eternalYearName:k,eternalWeekDescription:fe,solarMonthName:R,solarWeekName:B,solarWeekDescription:re,seal:me,harmonicLevels:{arcBeat:{pulseInCycle:ie,cycleLength:zf,percent:ie/zf*100},microCycle:{pulseInCycle:H,cycleLength:Bf,percent:H/Bf*100},chakraLoop:{pulseInCycle:ae,cycleLength:Vf,percent:ae/Vf*100},harmonicDay:{pulseInCycle:oe,cycleLength:$,percent:oe/$*100}},eternalMonthProgress:{daysElapsed:ce,daysRemaining:W,percent:G},solarChakraStep:{beatIndex:d,stepIndex:C,stepsPerBeat:lp,percentIntoStep:w},solarChakraStepString:T,chakraStep:{beatIndex:p,stepIndex:v,stepsPerBeat:lp,percentIntoStep:x},chakraStepString:S,eternalChakraBeat:{beatIndex:p,pulsesIntoBeat:m,beatPulseCount:up,totalBeats:sp,percentToNext:b,eternalMonthIndex:Math.floor(E%Hf/Wf),eternalDayInMonth:ce,dayOfMonth:pe},chakraArc:np[F],chakraZone:_e.chakraZone,harmonicFrequencies:_e.frequencies,harmonicInputs:_e.inputs,sigilFamily:_e.sigilFamily,arcBeatCompletions:Math.floor(s/zf),microCycleCompletions:Math.floor(s/Bf),chakraLoopCompletions:Math.floor(s/Vf),harmonicDayCompletions:s/$,harmonicYearCompletions:s/$/Hf,weekIndex:ue,weekName:de,harmonicDayDescription:rp[N],eternalMonthDescription:ap[M],solarAlignedTime:void 0,solarDayOfMonth:I,solarMonthIndex:L,solarWeekIndex:ne,solarWeekDay:z,weekDayPercent:void 0,yearPercent:void 0,daysIntoYear:void 0}}var Sp=Kf*1e3;function Cp(e){let t=e-Jf,n=Jf+(Math.floor(t/Sp)+1)*Sp-e;return Math.max(0,Math.min(n,Sp))}function wp(){try{let e=`
      const GEN=${Jf};
      const DUR=${Sp};
      function sched(){
        const now=Date.now();
        const elapsed=now-GEN;
        const next=GEN+Math.ceil(elapsed/DUR)*DUR;
        const delay=Math.max(0, next-now);
        setTimeout(()=>{ postMessage({ t: Date.now() }); sched(); }, delay);
      }
      sched();
    `,t=new Blob([e],{type:`application/javascript`}),n=URL.createObjectURL(t);return{worker:new Worker(n),url:n}}catch{return null}}var Tp=`SOVEREIGN_SOLAR_LAST_UPDATE`,Ep=`SOVEREIGN_SOLAR_SYNC`,Dp={animation:`none`,transition:`none`};const Op=()=>{let[e,t]=(0,A.useState)(()=>xp(new Date)),[n,r]=(0,A.useState)(!1),[a,o]=(0,A.useState)(!1),[s,c]=(0,A.useState)(!1),u=If(),d=typeof document<`u`?document.body:null,f=(0,A.useRef)(null),p=(0,A.useRef)(null),m=(0,A.useRef)(null),h=(0,A.useRef)(null),g=(0,A.useRef)(null),_=(0,A.useRef)(null),v=(0,A.useRef)(!0),y=(0,A.useRef)(async()=>void 0),b=(0,A.useRef)(null),x=(0,A.useRef)(null),S=(0,A.useRef)(!1),C=(0,A.useRef)(0),w=(0,A.useRef)(null),T=(0,A.useRef)(null),E=(0,A.useRef)(0),[D,O]=(0,A.useState)(null),k=(0,A.useRef)(null);(0,A.useEffect)(()=>{k.current=D},[D]),(0,A.useEffect)(()=>(n?(document.body.classList.add(`eternal-overlay-open`),p.current?.focus()):document.body.classList.remove(`eternal-overlay-open`),()=>document.body.classList.remove(`eternal-overlay-open`)),[n]);let M=(0,A.useCallback)(()=>{let e=_.current;if(_.current=null,e)try{e.release().catch(()=>void 0)}catch{}},[]),N=(0,A.useCallback)(async()=>{try{if(!v.current||document.visibilityState!==`visible`)return;let e=_.current;if(e&&!e.released||!Rf(navigator))return;let t=await navigator.wakeLock.request(`screen`);if(!v.current){try{t.release().catch(()=>void 0)}catch{}return}_.current=t,t.addEventListener?.(`release`,()=>{v.current&&document.visibilityState===`visible`&&y.current()})}catch{}},[]);(0,A.useEffect)(()=>{y.current=N},[N]),(0,A.useEffect)(()=>(v.current=!0,()=>{v.current=!1}),[]);let P=(0,A.useCallback)(e=>{let n=new Date,r=xp(n);try{let e=l(n),t=vp(e.solarAlignedDay-1);E.current=vp(e.solarAlignedWeekDayIndex-t)}catch{}let a=typeof e==`number`?e:typeof k.current==`number`?k.current:null,o,s,c;if(typeof a==`number`)o=bp(n,a,E.current),{lastSunrise:s,nextSunrise:c}=yp(n,a);else{let e=l(n);({lastSunrise:s,nextSunrise:c}=i(n)),o={solarAlignedDay:e.solarAlignedDay,solarAlignedMonth:e.solarAlignedMonth,solarAlignedWeekIndex:e.solarAlignedWeekIndex,solarAlignedWeekDay:e.dayName,solarAlignedWeekDayIndex:e.solarAlignedWeekDayIndex,lastSunrise:s,nextSunrise:c,solarAlignedDayInMonth:e.solarAlignedDayInMonth}}r.solarAlignedTime=o,r.solarHarmonicDay=o.solarAlignedWeekDay,r.solarDayOfMonth=o.solarAlignedDayInMonth+1,r.solarMonthIndex=o.solarAlignedMonth,r.solarWeekIndex=o.solarAlignedWeekIndex,r.solarWeekName=$f[(o.solarAlignedWeekIndex-1+7)%7],r.solarWeekDescription=ip[r.solarWeekName],r.solarMonthName=ep[(o.solarAlignedMonth-1+8)%8];let u=Math.max(1,c.getTime()-s.getTime()),d=Math.max(0,n.getTime()-s.getTime()),f=Math.min(.999999999,d%u/u)*$;r.kaiPulseToday=f;let p=$/sp,m=Math.floor(f/p),h=f-m*p,g=Math.floor(h/cp);r.solarChakraStep={beatIndex:m,stepIndex:g,stepsPerBeat:lp,percentIntoStep:(h-g*cp)/cp*100},r.solarChakraStepString=`${m}:${String(g).padStart(2,`0`)}`,r.chakraArc=[`Ignition Ark`,`Integration Ark`,`Harmonization Ark`,`Reflection Ark`,`Purification Ark`,`Dream Ark`][Math.floor((m%sp+sp)%sp/6%6)]??`Ignition Ark`;let _=pp(r.chakraArc);r.chakraZone=_.chakraZone,r.harmonicFrequencies=_.frequencies,r.harmonicInputs=_.inputs,r.sigilFamily=_.sigilFamily,r.kaiTurahArcPhrase=_.arcPhrase;let v=r.kaiPulseEternal%Uf;r.yearPercent=v/Uf*100,r.daysIntoYear=Math.floor(v/$);let y=Math.floor((r.daysIntoYear??0)/Wf);r.eternalChakraBeat={...r.eternalChakraBeat,eternalMonthIndex:y,eternalDayInMonth:r.eternalMonthProgress.daysElapsed,dayOfMonth:r.eternalMonthProgress.daysElapsed+1},t(r)},[]),F=(0,A.useCallback)(()=>{try{let e=localStorage.getItem(Tp);if(e&&e!==w.current){w.current=e,P();return}}catch{}P()},[P]),[ee,te]=(0,A.useState)(!1),I=(0,A.useRef)(null),L=(0,A.useRef)(null);(0,A.useEffect)(()=>()=>{I.current!==null&&window.clearTimeout(I.current),L.current!==null&&window.clearTimeout(L.current)},[]);let R=(0,A.useCallback)(e=>{let t=Date.now();t-C.current<180||(C.current=t,P(e),o(!0),L.current!==null&&window.clearTimeout(L.current),L.current=window.setTimeout(()=>o(!1),220))},[P]);(0,A.useEffect)(()=>{let e=window.setInterval(()=>{o(!0),L.current!==null&&window.clearTimeout(L.current),L.current=window.setTimeout(()=>o(!1),1e3)},5300);return()=>window.clearInterval(e)},[]),(0,A.useEffect)(()=>{S.current=!0;let e=()=>{if(!S.current)return;let t=Cp(Date.now());b.current=window.setTimeout(()=>{R(),e()},t)},t=wp();x.current=t,t&&(t.worker.onmessage=()=>{R()}),e();let n=()=>{F(),b.current!==null&&window.clearTimeout(b.current),b.current=null,e(),N()};return document.addEventListener(`visibilitychange`,n),window.addEventListener(`focus`,n),window.addEventListener(`pageshow`,n),window.addEventListener(`popstate`,n),window.addEventListener(`hashchange`,n),()=>{if(S.current=!1,b.current!==null&&window.clearTimeout(b.current),b.current=null,x.current){try{x.current.worker.terminate()}catch{}try{URL.revokeObjectURL(x.current.url)}catch{}x.current=null}document.removeEventListener(`visibilitychange`,n),window.removeEventListener(`focus`,n),window.removeEventListener(`pageshow`,n),window.removeEventListener(`popstate`,n),window.removeEventListener(`hashchange`,n)}},[N,F,R]),(0,A.useEffect)(()=>{N();let e=()=>void N(),t=()=>M();return document.addEventListener(`visibilitychange`,e),window.addEventListener(`focus`,e),window.addEventListener(`beforeunload`,t),()=>{document.removeEventListener(`visibilitychange`,e),window.removeEventListener(`focus`,e),window.removeEventListener(`beforeunload`,t),M()}},[N,M]),(0,A.useEffect)(()=>{try{w.current=localStorage.getItem(Tp)}catch{}let e=window.setTimeout(()=>R(),0);return()=>window.clearTimeout(e)},[R]),(0,A.useEffect)(()=>{let e=e=>{e.key&&(e.key===Tp||e.key.startsWith(`SOVEREIGN_SOLAR`))&&R()},t=()=>{R()};window.addEventListener(`storage`,e),window.addEventListener(`solar:updated`,t);try{let e=new BroadcastChannel(Ep);e.onmessage=()=>R(),T.current=e}catch{}return()=>{window.removeEventListener(`storage`,e),window.removeEventListener(`solar:updated`,t);try{T.current?.close()}catch{}T.current=null}},[R]),(0,A.useEffect)(()=>{let e=window.setTimeout(()=>R(),0);return()=>window.clearTimeout(e)},[u?.solarStepString,u?.solarArcName,u?.sunriseOffsetSec,D]);let z=(0,A.useCallback)(()=>{c(!1),r(!1)},[]),ne=(0,A.useCallback)(()=>{c(!1)},[]),B=(0,A.useRef)(0);(0,A.useEffect)(()=>{if(!n)return;let e=p.current,t=f.current,r=()=>{B.current=Date.now()+800},i=()=>{let t=document.activeElement,n=!!t&&!!e?.contains(t),r=Date.now()<B.current;n||r||z()};return t?.addEventListener(`pointerdown`,r,{capture:!0}),t?.addEventListener(`click`,r,{capture:!0}),e?.addEventListener(`focusin`,r,{capture:!0}),window.addEventListener(`scroll`,i,{passive:!0}),()=>{window.removeEventListener(`scroll`,i),t?.removeEventListener(`pointerdown`,r,!0),t?.removeEventListener(`click`,r,!0),e?.removeEventListener(`focusin`,r,!0)}},[z,n]);let re=(0,A.useCallback)(()=>{if(n){z();return}B.current=Date.now()+800,`vibrate`in navigator&&typeof navigator.vibrate==`function`&&navigator.vibrate(10),g.current?.play().catch(()=>void 0),r(!0)},[z,n]);(0,A.useEffect)(()=>{if(!e||!h.current)return;let t=((e.solarChakraStep?.beatIndex??e.eternalChakraBeat?.beatIndex??0)%36+36)%36,n=Math.floor(t/6)%6;h.current.setAttribute(`data-ark`,String(n)),p.current?.setAttribute(`data-ark`,String(n)),f.current?.setAttribute(`data-ark`,String(n));let r=[0,28,55,140,210,275][n]??0;h.current.style.setProperty(`--chakra-hue`,String(r)),h.current.style.setProperty(`--chakra`,`hsl(${r} 100% 55%)`),p.current?.style.setProperty(`--chakra-hue`,String(r)),p.current?.style.setProperty(`--chakra`,`hsl(${r} 100% 55%)`),f.current?.style.setProperty(`--chakra-hue`,String(r)),f.current?.style.setProperty(`--chakra`,`hsl(${r} 100% 55%)`)},[e]);let V=fp(e.kaiPulseEternal),ie=Math.floor(e.harmonicYearCompletions||0),H=ie<1?`Year of Harmonik Restoration`:ie===1?`Year of Harmonik Embodiment`:`Year ${ie}`,ae=Number.isFinite(V.pulsesRemaining)?V.pulsesRemaining/$:NaN,se=typeof e.yearPercent==`number`?e.yearPercent:(e.harmonicYearCompletions??0)%1*100,ce=$/36,U=Math.floor((e.kaiPulseToday%$+$)%$/ce),W=(U+.5)/36*360,G=(e.kaiPulseToday%ce+ce)%ce/ce*100,le=(0,A.useCallback)(()=>{B.current=Date.now()+800,c(!0),`vibrate`in navigator&&typeof navigator.vibrate==`function`&&navigator.vibrate(8)},[]),ue=[`Solhara`,`Aquaris`,`Flamora`,`Verdari`,`Sonari`,`Kaelith`],de=e.solarAlignedTime?.solarAlignedWeekDayIndex??null,fe=de===null?null:(de%6+6)%6,pe=fe===null?`â€”`:ue[fe],me=fe===null?`â€”`:fe+1,he=$*6,ge=(()=>{let t=e.harmonicWeekProgress;return t&&Number.isFinite(t.pulsesIntoWeek)?t.pulsesIntoWeek:(e.kaiPulseEternal%he+he)%he})(),_e=(()=>{let t=e.harmonicWeekProgress;return t&&Number.isFinite(t.percent)?t.percent:ge/he*100})(),ve=(e.kaiPulseEternal%he+he)%he,ye=Math.floor(ve/$)%6,xe=Qf[ye],Se=`ark-${Math.floor(((e.solarChakraStep?.beatIndex??0)%36+36)%36/6)%6}-${e.solarChakraStepString}`,Ce=f.current??p.current??d;return(0,j.jsxs)(`div`,{ref:h,className:`eternal-klock-container`,children:[(0,j.jsx)(`div`,{className:`eternal-klock-header`,children:(0,j.jsx)(`div`,{ref:m,onClick:re,title:`Tap to view details`,className:`klock-toggle ${a?`glow-pulse`:``}`,children:(0,j.jsx)(oe,{hue:`var(--chakra)`,kaiPulseEternal:e.kaiPulseEternal,pulse:e.kaiPulseToday,harmonicDayPercent:e.harmonicLevels.harmonicDay.percent,microCyclePercent:e.harmonicLevels.microCycle.percent,dayLabel:e.harmonicDay,monthLabel:e.eternalMonth,monthDay:e.eternalChakraBeat?.dayOfMonth??e.eternalMonthProgress.daysElapsed+1,glowPulse:a,rotationOverride:W,solarSpiralStepString:e.solarChakraStepString,solarSpiralStep:e.solarChakraStep},Se)})}),n&&d&&(0,Lf.createPortal)((0,j.jsx)(`div`,{className:`eternal-overlay`,role:`dialog`,"aria-modal":`true`,"aria-label":`Eternal Klock Details`,ref:p,tabIndex:-1,style:Dp,onClick:e=>{if(e.target===p.current){if(s){ne();return}z()}},onKeyDown:e=>{if(e.key===`Escape`){if(s){e.stopPropagation(),ne();return}z()}},children:(0,j.jsxs)(`div`,{className:`eternal-modal-card`,ref:f,style:Dp,onClick:e=>e.stopPropagation(),children:[(0,j.jsx)(`button`,{type:`button`,className:`ek-close-btn`,"aria-label":`Close`,title:`Close`,onClick:z,children:`Ã—`}),(0,j.jsx)(`div`,{className:`ek-display-controls`,"aria-label":`Display scale controls`,children:(0,j.jsx)(`div`,{className:`ek-scale-row`,children:(0,j.jsx)(`div`,{className:`ek-scale-readout`})})}),(0,j.jsxs)(`div`,{className:`eternal-klock-detail`,children:[(0,j.jsx)(`h2`,{className:`eternal-klock-title`,children:`ð°˜ð°œð°‡ Â· ð°‹ð°¢ð±ƒ`}),(0,j.jsxs)(`div`,{className:`eternal-klock-toolbar`,children:[(0,j.jsx)(be,{kaiPulse:e.kaiPulseEternal}),(0,j.jsx)(`button`,{className:`toolbar-btn`,onClick:le,title:`Open Kairos Week Spiral`,type:`button`,children:(0,j.jsx)(`img`,{src:`/assets/weekkalendar.svg`,alt:`Kairos Week`,className:`toolbar-icon`,draggable:!1})})]}),s&&Ce&&(0,j.jsx)(Af,{onClose:()=>c(!1),container:Ce}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`}),(0,j.jsxs)(`div`,{className:`eternal-klock-section-title`,children:[(0,j.jsx)(`img`,{src:`/assets/eternal.svg`,alt:`Eternal Title`,style:{width:`100%`,height:`auto`}}),(0,j.jsx)(`strong`,{children:`Date:`}),` `,`D`,e.eternalChakraBeat?.dayOfMonth??e.eternalMonthProgress.daysElapsed+1,` / M`,(e.eternalChakraBeat?.eternalMonthIndex??0)+1]}),e.chakraStep&&e.eternalChakraBeat&&(0,j.jsxs)(`div`,{style:{marginBottom:`0.75rem`},children:[(0,j.jsx)(`strong`,{children:`Kairos:`}),` `,(0,j.jsxs)(`code`,{children:[e.eternalChakraBeat.beatIndex,`:`,e.chakraStep.stepIndex.toString().padStart(2,`0`)]}),(0,j.jsx)(`br`,{}),(0,j.jsxs)(`small`,{style:{display:`block`,marginTop:`0.25rem`},children:[`Beat `,(0,j.jsx)(`strong`,{children:e.eternalChakraBeat.beatIndex}),` / `,e.eternalChakraBeat.totalBeats-1,` â€” Step `,(0,j.jsx)(`strong`,{children:e.chakraStep.stepIndex}),` / `,e.chakraStep.stepsPerBeat,` (`,e.chakraStep.percentIntoStep.toFixed(1),`%)`]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Kai-Pulse(Eternal):`}),` `,e.kaiPulseEternal]}),(0,j.jsxs)(`div`,{style:{marginTop:`0.25rem`},children:[(0,j.jsx)(`strong`,{children:`Day:`}),` `,xe,` `,ye+1,` / 6`]})]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Week:`}),` `,e.weekIndex,`/7, `,(0,j.jsx)(`strong`,{children:e.weekName})]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Month:`}),` `,e.eternalMonth,` `,(e.eternalChakraBeat?.eternalMonthIndex??0)+1,` / 8`]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Kai-Pulse(Today):`}),` `,(e.kaiPulseEternal%$).toFixed(2),` /`,` `,$.toFixed(2)]}),(0,j.jsxs)(`div`,{children:[(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`% of Day Komplete:`}),` `,e.harmonicLevels.harmonicDay.percent.toFixed(2),`%`]}),(0,j.jsx)(`div`,{className:`day-progress-bar`,children:(0,j.jsx)(`div`,{className:`day-progress-fill ${a?`sync-pulse`:``} ${e.harmonicLevels.harmonicDay.percent.toFixed(0)===`100`?`burst`:``}`,style:{width:`${e.harmonicLevels.harmonicDay.percent}%`},title:`${e.harmonicLevels.harmonicDay.percent.toFixed(2)}% of eternal day`})}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Kai-Pulses (Breathes) Remaining Today:`}),` `,($-e.harmonicLevels.harmonicDay.pulseInCycle).toFixed(2)]})]}),e.harmonicDayDescription&&(0,j.jsx)(`div`,{className:`eternal-description`,children:(0,j.jsx)(`em`,{children:e.harmonicDayDescription})}),(0,j.jsx)(`strong`,{children:`Kai-Turah:`}),` `,(0,j.jsx)(`em`,{children:e.kaiTurahPhrase}),(0,j.jsx)(`div`,{}),(0,j.jsx)(`strong`,{children:`Phi Pulse:`}),` `,(e.kaiPulseEternal*1.618).toFixed(0),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`,children:`Week Progress`}),typeof e.weekIndex==`number`&&e.weekName?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Week:`}),` `,e.weekIndex,` / 7, `,(0,j.jsx)(`strong`,{children:e.weekName})]}),(0,j.jsxs)(`div`,{style:{marginTop:`0.25rem`},children:[(0,j.jsx)(`strong`,{children:`Day:`}),` `,xe,` `,ye+1,` / 6`]}),e.eternalWeekDescription&&(0,j.jsx)(`div`,{className:`eternal-description`,children:(0,j.jsx)(`em`,{children:e.eternalWeekDescription})})]}):(0,j.jsx)(`div`,{children:`â€”`}),(0,j.jsxs)(`div`,{style:{marginTop:`0.25rem`},children:[(0,j.jsx)(`strong`,{children:`Kai-Pulses (Breathes) Into Week:`}),` `,ge.toFixed(2)]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Kai-Pulses (Breathes) Remaining:`}),` `,(he-ge).toFixed(2)]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`% Komplete:`}),` `,_e.toFixed(2),`%`]}),(0,j.jsx)(`div`,{className:`week-progress-bar`,children:(0,j.jsx)(`div`,{className:`week-progress-fill ${a?`sync-pulse`:``} ${Math.round(_e)===100?`burst`:``}`,style:{width:`${_e}%`},title:`${_e.toFixed(2)}% of week`})}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Total Kai-Pulses (Breathes) in Week:`}),` `,he.toFixed(2)]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Eternal Month:`}),` `,e.eternalMonth]}),e.eternalMonthDescription&&(0,j.jsx)(`div`,{className:`eternal-description`,children:(0,j.jsx)(`em`,{children:e.eternalMonthDescription})}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`,children:`Month Progress`}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Days Elapsed:`}),` `,e.eternalMonthProgress.daysElapsed+1]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Days Remaining:`}),` `,e.eternalMonthProgress.daysRemaining]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Kai-Pulses (Breathes) Into Month:`}),` `,(e.kaiPulseEternal%Gf).toFixed(2)]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Kai-Pulses (Breathes) Remaining:`}),` `,(Gf-e.kaiPulseEternal%Gf).toFixed(2)]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`% Komplete:`}),` `,(e.kaiPulseEternal%Gf/Gf*100).toFixed(2),`%`]}),(0,j.jsx)(`div`,{className:`month-progress-bar`,children:(0,j.jsx)(`div`,{className:`month-progress-fill ${a?`sync-pulse`:``}`,style:{width:`${e.kaiPulseEternal%Gf/Gf*100}%`},title:`${(e.kaiPulseEternal%Gf/Gf*100).toFixed(2)}% of month`})}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Total Breathes in Month:`}),` `,Gf.toFixed(2)]}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`}),(0,j.jsx)(`strong`,{children:`Harmonik Sykle:`}),(0,j.jsx)(`div`,{className:`eternal-klock-timestamp`,children:e.timestamp}),e.seal&&(0,j.jsxs)(`div`,{className:`seal-container`,children:[(0,j.jsx)(`strong`,{className:`seal-label`,children:`Seal:`}),` `,(0,j.jsx)(`span`,{className:`seal-code ${ee?`copied`:``}`,onClick:()=>{navigator.clipboard.writeText(e.seal??``).then(()=>{I.current!==null&&window.clearTimeout(I.current),te(!0),I.current=window.setTimeout(()=>te(!1),1600)}).catch(()=>void 0)},title:`Click to Kopy Eternal Seal`,role:`button`,tabIndex:0,onKeyDown:e=>{(e.key===`Enter`||e.key===` `)&&e.currentTarget.click()},children:e.seal}),(0,j.jsxs)(`span`,{className:`seal-toast ${ee?`show`:``}`,role:`status`,"aria-live":`polite`,children:[(0,j.jsx)(`span`,{className:`toast-mark`,"aria-hidden":!0,children:`âœ“`}),(0,j.jsx)(`span`,{className:`toast-text`,children:`Copied`}),(0,j.jsx)(`span`,{className:`toast-meter`,"aria-hidden":!0})]})]}),e.harmonicTimestampDescription&&(0,j.jsx)(`div`,{className:`eternal-description`,children:(0,j.jsx)(`em`,{children:e.harmonicTimestampDescription})}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`,children:`Year Progress`}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Harmonik Year:`}),` `,e.harmonicYearCompletions?.toFixed(4)]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Year:`}),` `,H]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`% of Year Komplete:`}),` `,typeof e.yearPercent==`number`?e.yearPercent.toFixed(2):`â€”`,`%`]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Days Into Year:`}),` `,typeof e.daysIntoYear==`number`?e.daysIntoYear:`â€”`,` /`,` `,Hf]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Kai-Pulses (Breathes) Into Year:`}),` `,(e.kaiPulseEternal%Uf).toFixed(0)]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Kai-Pulses (Breathes) Remaining:`}),` `,(Uf-e.kaiPulseEternal%Uf).toFixed(0)]}),(0,j.jsx)(`div`,{className:`year-progress-bar`,children:(0,j.jsx)(`div`,{className:`year-progress-fill ${a?`sync-pulse`:``}`,style:{width:`${se}%`},title:`${se.toFixed(2)}% of year`})}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Total Kai-Pulses (Breathes) in Year:`}),` `,Uf.toFixed(2)]}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`,children:`Phi Spiral Progress`}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Phi Spiral Level:`}),` `,V.spiralLevel]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Progress to Next Level:`}),` `,V.percentToNext.toFixed(2),`%`]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Kai-Pulses (Breathes) Remaining:`}),` `,V.pulsesRemaining]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Days to Next Spiral:`}),` `,Number.isFinite(ae)?ae.toFixed(4):`â€”`]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Next Spiral Threshold:`}),` `,V.nextSpiralPulse]}),(0,j.jsx)(`div`,{className:`spiral-progress-bar`,children:(0,j.jsx)(`div`,{className:`spiral-progress-fill`,style:{width:`${V.percentToNext}%`}})}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title embodied-section-title`,children:(0,j.jsx)(`img`,{src:`/assets/embodied_solar_aligned.svg`,alt:`Embodied Solar-Aligned Title`,className:`embodied-section-icon`})}),(0,j.jsx)(`strong`,{children:`Date (Solar):`}),` D`,e.solarDayOfMonth??`â€”`,` / M`,e.solarMonthIndex??`â€”`,` `,e.solarMonthName?(0,j.jsxs)(`small`,{children:[`(`,e.solarMonthName,`)`]}):null,e.solarChakraStep&&e.solarChakraStepString&&(0,j.jsxs)(`div`,{style:{marginBottom:`0.5rem`},children:[(0,j.jsx)(`strong`,{children:`Solar Kairos:`}),` `,(0,j.jsx)(`code`,{children:e.solarChakraStepString}),(0,j.jsx)(`br`,{})]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:` Day:`}),` `,pe,` `,me,` / 6`]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Week:`}),` `,e.weekIndex,`/7, `,(0,j.jsx)(`strong`,{children:e.weekName})]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Month:`}),` `,e.eternalMonth,` `,(e.eternalChakraBeat?.eternalMonthIndex??0)+1,` / 8`]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`% into Beat:`}),` `,G.toFixed(2),`%`]}),(0,j.jsxs)(`div`,{style:{marginTop:`0.5rem`},children:[(0,j.jsx)(`strong`,{children:`Beat:`}),` `,U,` / 36`]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`% into Step:`}),` `,e.solarChakraStep?e.solarChakraStep.percentIntoStep.toFixed(1):`â€”`,`%`]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Step:`}),` `,e.solarChakraStep?`${e.solarChakraStep.stepIndex} / ${e.solarChakraStep.stepsPerBeat}`:`â€”`]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Kurrent Step Breathes:`}),` `,e.solarChakraStep?(e.solarChakraStep.percentIntoStep/100*($/36/e.solarChakraStep.stepsPerBeat)).toFixed(2):`â€”`,` `,`/ 11`]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Kai(Today):`}),` `,e.kaiPulseToday,` / `,$.toFixed(2)]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`% of Day Komplete:`}),` `,(e.kaiPulseToday/$*100).toFixed(2),`%`]}),(0,j.jsx)(`div`,{className:`day-progress-bar`,children:(0,j.jsx)(`div`,{className:`day-progress-fill ${a?`sync-pulse`:``} ${(e.kaiPulseToday/$*100).toFixed(0)===`100`?`burst`:``}`,style:{width:`${e.kaiPulseToday/$*100}%`},title:`${(e.kaiPulseToday/$*100).toFixed(2)}% of day`})}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Breathes Remaining Today:`}),` `,($-e.kaiPulseToday).toFixed(2)]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Ark:`}),` `,e.chakraArc]}),mp[e.chakraArc]&&(0,j.jsx)(`div`,{className:`eternal-description`,children:(0,j.jsx)(`em`,{children:mp[e.chakraArc]})}),(0,j.jsxs)(`div`,{style:{marginTop:`0.25rem`},children:[(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Breathes Into Beat:`}),` `,(e.kaiPulseToday%ce).toFixed(2),` /`,` `,ce.toFixed(2)]}),(0,j.jsx)(`strong`,{children:`To Next Beat:`}),` `,G.toFixed(2),`%`]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Beat Zone:`}),` `,e.chakraZone]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Sigil Family:`}),` `,e.sigilFamily]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`strong`,{children:`Kai-Turah:`}),` `,e.kaiTurahArcPhrase]}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`,children:`Harmonik Levels`}),(0,j.jsx)(`div`,{children:(0,j.jsx)(`strong`,{children:`Ark Beat:`})}),(0,j.jsxs)(`div`,{children:[e.harmonicLevels.arcBeat.pulseInCycle,` / `,e.harmonicLevels.arcBeat.cycleLength,` (`,e.harmonicLevels.arcBeat.percent.toFixed(2),`%)`]}),(0,j.jsx)(`div`,{children:(0,j.jsxs)(`small`,{children:[`Kompleted Sykles: `,e.arcBeatCompletions]})}),(0,j.jsx)(`div`,{style:{marginTop:`0.75rem`},children:(0,j.jsx)(`strong`,{children:`Mikro Sykle:`})}),(0,j.jsxs)(`div`,{children:[e.harmonicLevels.microCycle.pulseInCycle,` / `,e.harmonicLevels.microCycle.cycleLength,` (`,e.harmonicLevels.microCycle.percent.toFixed(2),`%)`]}),(0,j.jsx)(`div`,{children:(0,j.jsxs)(`small`,{children:[`Kompleted Sykles: `,e.microCycleCompletions]})}),(0,j.jsx)(`div`,{style:{marginTop:`0.75rem`},children:(0,j.jsx)(`strong`,{children:`Beat Loop:`})}),(0,j.jsxs)(`div`,{children:[e.harmonicLevels.chakraLoop.pulseInCycle,` / `,e.harmonicLevels.chakraLoop.cycleLength,` (`,e.harmonicLevels.chakraLoop.percent.toFixed(2),`%)`]}),(0,j.jsx)(`div`,{children:(0,j.jsxs)(`small`,{children:[`Kompleted Sykles: `,e.chakraLoopCompletions]})}),(0,j.jsx)(`div`,{style:{marginTop:`0.75rem`},children:(0,j.jsx)(`strong`,{children:`Harmonik Day:`})}),(0,j.jsxs)(`div`,{children:[e.harmonicLevels.harmonicDay.pulseInCycle,` / `,e.harmonicLevels.harmonicDay.cycleLength,` (`,e.harmonicLevels.harmonicDay.percent.toFixed(2),`%)`]}),(0,j.jsx)(`div`,{children:(0,j.jsxs)(`small`,{children:[`Kompleted Sykles: `,e.harmonicDayCompletions]})}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`,children:`Solar-Ark Aligned Frequencies & Inputs`}),(0,j.jsx)(`ul`,{children:e.harmonicFrequencies.map((t,n)=>(0,j.jsxs)(`li`,{children:[(0,j.jsxs)(`strong`,{children:[t.toFixed(1),` Hz`]}),` â€” `,e.harmonicInputs[n]]},`${t}-${n}`))})]}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`}),(0,j.jsx)(`div`,{className:`eternal-klock-section-title`,children:`Solar Aligned Kairos Sync`}),(0,j.jsx)(Nf,{showControls:!0,onSunriseChange:e=>{O(e);try{localStorage.setItem(Tp,String(Date.now()))}catch{}try{window.dispatchEvent(new Event(`solar:updated`))}catch{}try{let e={type:`solar:updated`,t:Date.now()};T.current?.postMessage(e)}catch{}R(e),requestAnimationFrame(()=>R(e))}})]})}),d),(0,j.jsx)(`audio`,{ref:g,src:`/assets/chimes/kai_turah_tone.mp3`,preload:`auto`})]})};var kp=Op;export{kp as n,Op as t};