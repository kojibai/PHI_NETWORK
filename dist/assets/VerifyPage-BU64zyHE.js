import{At as e,D as t,F as n,Gt as r,I as i,K as a,M as ee,O as o,Ut as s,Wt as c,_ as l,a as u,b as te,c as ne,d as re,f as ie,fi as d,g as f,j as ae,l as oe,m as se,n as p,o as m,p as ce,r as le,s as ue,t as de,vi as h,x as fe}from"./index-DPAAloO3.js";import{r as pe}from"./webauthnKAS-BpEPEpZt.js";import{t as me}from"./VerifierFrame-B8vdqDJP.js";import"./browser-ON_KRrN9.js";import{n as he,t as ge}from"./useValuation-CZx-uzj0.js";import{n as _e,t as ve}from"./verifySigil-wUNFZl2H.js";var g=h(d(),1),_=h(r(),1);function ye(e){if(e==null)return`‚Äî`;if(typeof e==`string`)return e;try{return JSON.stringify(e,null,2)}catch{return String(e)}}async function be(e){return(await te(e)).toLowerCase()}function xe(e){if(typeof e!=`string`)return e;let t=e.trim();if(!t||!(t.startsWith(`{`)||t.startsWith(`[`)))return e;try{return JSON.parse(t)}catch{return e}}function v(e){return typeof e==`object`&&!!e}function Se(e){if(!v(e))return null;let t=typeof e.originalAmount==`number`&&Number.isFinite(e.originalAmount)?e.originalAmount:null;if(t==null)return null;let n=(Array.isArray(e.debits)?e.debits:[]).reduce((e,t)=>{if(!v(t))return e;let n=t.amount;return typeof n!=`number`||!Number.isFinite(n)||n<=0?e:e+n},0);return{originalAmount:t,remaining:Math.max(0,t-n)}}function y(e){if(typeof e==`number`)return!Number.isFinite(e)||Math.abs(e)<1e-12?null:Math.abs(e);if(typeof e==`string`){let t=Number(e);if(!Number.isNaN(t)&&Math.abs(t)>=1e-12)return Math.abs(t)}return null}function Ce(e){if(!v(e))return null;let t=[e],n=e.feed,r=e.preview,i=e.meta;v(n)&&t.push(n),v(r)&&t.push(r),v(i)&&t.push(i);for(let e of t){let t=y(e.transferAmountPhi)??y(e.transferPhi)??y(e.amountPhi)??y(e.phiAmount)??y(e.childAllocationPhi)??y(e.branchBasePhi)??y(e.valuePhi)??y(e.value);if(t!=null)return t}return null}function we(e){if(!v(e))return null;let t=e.receiveSig;return p(t)?t:null}function Te(){if(typeof window>`u`)return``;let e=window.location.pathname||``,t=window.location.hash||``,n=e.match(/\/verify\/([^/?#]+)/);if(n?.[1])return n[1];let r=t.match(/\/verify\/([^/?#]+)/);return r?.[1]?r[1]:``}function b(e){return!v(e)||e.v!==`KPV-1`||typeof e.pulse!=`number`||!Number.isFinite(e.pulse)||typeof e.chakraDay!=`string`||typeof e.kaiSignature!=`string`||typeof e.phiKey!=`string`||typeof e.verifierSlug!=`string`?null:e}function Ee(e){if(!v(e))return null;let t=b(e.proofCapsule);return t?{proofCapsule:t,capsuleHash:typeof e.capsuleHash==`string`?e.capsuleHash:void 0,svgHash:typeof e.svgHash==`string`?e.svgHash:void 0,bundleHash:typeof e.bundleHash==`string`?e.bundleHash:void 0,verifierUrl:typeof e.verifierUrl==`string`?e.verifierUrl:void 0,shareUrl:typeof e.shareUrl==`string`?e.shareUrl:void 0,authorSig:e.authorSig,zkPoseidonHash:typeof e.zkPoseidonHash==`string`?e.zkPoseidonHash:void 0,zkProof:`zkProof`in e?e.zkProof:void 0,proofHints:`proofHints`in e?e.proofHints:void 0,zkPublicInputs:`zkPublicInputs`in e?e.zkPublicInputs:void 0}:null}function De(){if(typeof window>`u`)return null;let e=new URLSearchParams(window.location.search),t=e.get(`r`)??e.get(`receipt`);if(!t)return null;try{let e=new TextDecoder().decode(f(t));return Ee(JSON.parse(e))}catch{return null}}function Oe(e){if(!e.trim().startsWith(`{`))return null;try{return Ee(JSON.parse(e))}catch{return null}}function x(e){return l(new TextEncoder().encode(e))}function ke(e,t){let n=e||`/verify`,r=new URL(n,typeof window<`u`?window.location.origin:`http://localhost`);return r.searchParams.set(`r`,x(t)),r.toString()}async function Ae(e){return await new Promise((t,n)=>{let r=new FileReader;r.onerror=()=>n(Error(`Failed to read file.`)),r.onload=()=>t(String(r.result??``)),r.readAsText(e)})}function S(e,t=18,n=14){let r=(e||``).trim();return r?r.length<=t+n+3?r:`${r.slice(0,t)}‚Ä¶${r.slice(r.length-n)}`:`‚Äî`}function je(e){return Array.from(e).map(e=>e.toString(16).padStart(2,`0`)).join(``)}function Me(e){try{return je(f(e.challenge))}catch{return null}}function Ne(e){let t=(e.name||``).toLowerCase(),n=(e.type||``).toLowerCase();return t.endsWith(`.svg`)||n===`image/svg+xml`}async function Pe(e){let t=e.trim();if(!t)return!1;try{if(navigator.clipboard?.writeText)return await navigator.clipboard.writeText(t),!0}catch{}try{let e=document.createElement(`textarea`);e.value=t,e.setAttribute(`readonly`,``),e.style.position=`fixed`,e.style.opacity=`0`,e.style.pointerEvents=`none`,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length);let n=document.execCommand(`copy`);return document.body.removeChild(e),n}catch{return!1}}function C(e,t,n){if(typeof document>`u`||!n)return;let r=`meta[${e}="${t}"]`,i=document.head?.querySelector(r);i||(i=document.createElement(`meta`),i.setAttribute(e,t),document.head?.appendChild(i)),i.setAttribute(`content`,n)}function Fe(){return(0,_.jsxs)(`svg`,{className:`mark`,viewBox:`0 0 24 24`,"aria-hidden":`true`,focusable:`false`,children:[(0,_.jsx)(`path`,{d:`M12 2.25 20.25 7v10L12 21.75 3.75 17V7L12 2.25Z`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.4`,opacity:`0.95`}),(0,_.jsx)(`circle`,{cx:`12`,cy:`12`,r:`2.2`,fill:`currentColor`,opacity:`0.95`}),(0,_.jsx)(`path`,{d:`M7.2 12c0-2.65 2.15-4.8 4.8-4.8`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.4`,strokeLinecap:`round`,opacity:`0.55`})]})}function Ie(){return(0,_.jsxs)(`svg`,{className:`mark`,viewBox:`0 0 24 24`,"aria-hidden":`true`,focusable:`false`,children:[(0,_.jsx)(`path`,{d:`M9.5 7.5a2.5 2.5 0 0 1 4 0l.7 1a3.6 3.6 0 0 0 2.3 1.4l1.2.2a2.5 2.5 0 0 1 0 4.9l-1.2.2a3.6 3.6 0 0 0-2.3 1.4l-.7 1a2.5 2.5 0 0 1-4 0l-.7-1a3.6 3.6 0 0 0-2.3-1.4l-1.2-.2a2.5 2.5 0 0 1 0-4.9l1.2-.2a3.6 3.6 0 0 0 2.3-1.4l.7-1Z`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.4`,opacity:`0.95`}),(0,_.jsx)(`path`,{d:`M8.7 12.2 11 14.4l4.6-4.7`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.6`,strokeLinecap:`round`,strokeLinejoin:`round`})]})}function w(e){return(0,_.jsx)(`button`,{type:`button`,className:e.kind===`primary`?`vbtn vbtn--primary`:`vbtn`,title:e.title,"aria-label":e.ariaLabel??e.title,onClick:e.onClick,disabled:e.disabled,children:(0,_.jsx)(`span`,{className:`vbtn-ic`,"aria-hidden":`true`,children:e.icon})})}function T(e){return(0,_.jsxs)(`button`,{type:`button`,role:`tab`,"aria-selected":e.active,className:e.active?`vtab active`:`vtab`,onClick:e.onClick,title:e.title,"aria-label":e.title,children:[(0,_.jsx)(`span`,{className:`vtab-ic`,"aria-hidden":`true`,children:e.icon}),(0,_.jsx)(`span`,{className:`vtab-txt`,children:e.text})]})}function Le(e){let t=e.kind===`ok`?`ok`:e.kind===`fail`?`fail`:e.kind===`busy`?`busy`:`idle`,n=e.kind===`ok`;return(0,_.jsxs)(`div`,{className:`official`,"data-kind":t,"aria-live":`polite`,children:[(0,_.jsxs)(`div`,{className:`official-top`,children:[(0,_.jsx)(`div`,{className:`official-ring`,"aria-hidden":`true`,children:n?(0,_.jsx)(`span`,{className:`official-check`,children:`‚úì`}):null}),(0,_.jsx)(`div`,{className:`official-title`,children:e.title})]}),e.subtitle?(0,_.jsx)(`div`,{className:`official-sub`,children:e.subtitle}):null]})}function E(e){let t=e.state===`valid`?`‚úì`:e.state===`invalid`?`‚úï`:e.state===`busy`?`‚ü°`:e.state===`na`?`‚Äî`:`¬∑`,n=e.state===`valid`?`VERIFIED`:e.state===`invalid`?`INVALID`:e.state===`busy`?`CHECKING`:e.state===`na`?`N/A`:`ABSENT`;return(0,_.jsxs)(`div`,{className:`seal`,"data-state":e.state,title:e.detail??``,children:[(0,_.jsx)(`span`,{className:`seal-ic`,"aria-hidden":`true`,children:t}),(0,_.jsx)(`span`,{className:`seal-lbl`,children:e.label}),(0,_.jsx)(`span`,{className:`seal-txt`,children:n})]})}function D(e){return(0,_.jsxs)(`div`,{className:`mini`,children:[(0,_.jsx)(`div`,{className:`mini-k`,children:e.label}),(0,_.jsx)(`div`,{className:`mini-v mono`,title:e.title??e.value,children:e.value||`‚Äî`})]})}function Re(e){return(0,_.jsxs)(`div`,{className:`vseal-value`,"aria-label":e.ariaLabel,children:[(0,_.jsx)(`div`,{className:`vseal-value-label`,children:e.label}),(0,_.jsx)(`div`,{className:`vseal-value-phi`,children:n(e.phiValue)}),(0,_.jsx)(`div`,{className:`vseal-value-usd`,children:e.usdValue==null?`‚Äî`:i(e.usdValue)})]})}function ze(e){return e.open?(0,_.jsx)(`div`,{className:`vmodal-backdrop`,role:`dialog`,"aria-modal":`true`,"aria-label":e.title,onMouseDown:e.onClose,onClick:e.onClose,children:(0,_.jsxs)(`div`,{className:`vmodal`,onMouseDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),children:[(0,_.jsxs)(`div`,{className:`vmodal-head`,children:[(0,_.jsxs)(`div`,{className:`vmodal-head-left`,children:[(0,_.jsx)(`div`,{className:`vmodal-title`,children:e.title}),e.subtitle?(0,_.jsx)(`div`,{className:`vmodal-sub`,children:e.subtitle}):null]}),(0,_.jsx)(`button`,{type:`button`,className:`vmodal-close`,onClick:e.onClose,"aria-label":`Close`,title:`Close`,children:`√ó`})]}),(0,_.jsx)(`div`,{className:`vmodal-body`,children:e.children})]})}):null}function O(){let r=(0,g.useRef)(null),l=(0,g.useMemo)(()=>Te(),[]),u=(0,g.useMemo)(()=>ve(l),[l]),te=(0,g.useMemo)(()=>De(),[]),[d,f]=(0,g.useState)(`inhale`),[p,h]=(0,g.useState)(``),[v,y]=(0,g.useState)({status:`idle`}),[b,Ee]=(0,g.useState)(!1),[x,je]=(0,g.useState)(te),[O,Be]=(0,g.useState)(null),[k,Ve]=(0,g.useState)(``),[A,He]=(0,g.useState)(``),[j,Ue]=(0,g.useState)(``),[We,Ge]=(0,g.useState)(``),[M,Ke]=(0,g.useState)(null),[qe,N]=(0,g.useState)(``),[P,F]=(0,g.useState)(null),[Je,I]=(0,g.useState)(null),[Ye,L]=(0,g.useState)(`missing`),[Xe,Ze]=(0,g.useState)(`missing`),[R,Qe]=(0,g.useState)(null),[$e,et]=(0,g.useState)(null),[z,tt]=(0,g.useState)(null),[nt,rt]=(0,g.useState)(!1),{pulse:it}=he(),at=(0,g.useMemo)(()=>new URLSearchParams(typeof window<`u`?window.location.search:``),[]),B=(0,g.useMemo)(()=>{if(v.status!==`ok`)return null;let e=v.embedded,t=e.pulse??u.pulse??void 0;return{pulse:t,kaiPulse:t,beat:e.beat,stepIndex:e.stepIndex,frequencyHz:e.frequencyHz,chakraDay:e.chakraDay,chakraGate:e.chakraGate,kaiSignature:e.kaiSignature,userPhiKey:e.phiKey}},[v,u.pulse]),{valSeal:ot,livePrice:st}=ge({payload:B,urlSearchParams:at,currentPulse:it}),{usdPerPhi:ct}=(0,g.useMemo)(()=>{if(!B)return{usdPerPhi:0};try{return{usdPerPhi:c({meta:B,nowPulse:it??a(new Date),usd:100,currentStreakDays:0,lifetimeUsdSoFar:0},s).usdPerPhi??0}}catch{return{usdPerPhi:0}}},[B,it]),lt=(0,g.useMemo)(()=>{if(!B)return null;let e=st??ot?.valuePhi??null;return typeof e==`number`&&Number.isFinite(e)?e:null},[B,st,ot]),ut=(0,g.useMemo)(()=>v.status===`ok`?Se(v.embedded.raw)??Se(M?.raw):null,[M?.raw,v]),dt=(0,g.useMemo)(()=>v.status===`ok`?Ce(v.embedded.raw)??Ce(M?.raw):null,[M?.raw,v]),V=ut?.remaining??dt??lt,H=ut?`balance`:dt==null?`live`:`embedded`,ft=(0,g.useMemo)(()=>V==null||!Number.isFinite(ct)||ct<=0?null:V*ct,[V,ct]),pt=H===`balance`?`BALANCE`:H===`embedded`?`GLYPH`:`LIVE`,mt=H===`balance`?`Glyph balance`:H===`embedded`?`Glyph embedded value`:`Live glyph valuation`,[ht,gt]=(0,g.useState)(!1),[_t,vt]=(0,g.useState)(!1),[yt,bt]=(0,g.useState)(!1),[xt,St]=(0,g.useState)(!1),[Ct,wt]=(0,g.useState)(!1),[Tt,Et]=(0,g.useState)(``);g.useEffect(()=>{let e=document.documentElement,t=document.body;return e.classList.add(`verify-shell`),t.classList.add(`verify-shell`),()=>{e.classList.remove(`verify-shell`),t.classList.remove(`verify-shell`)}},[]),g.useEffect(()=>{let e=p.trim();if(!e){Et(``);return}try{let t=new Blob([e],{type:`image/svg+xml`}),n=URL.createObjectURL(t);return Et(n),()=>{URL.revokeObjectURL(n)}}catch{Et(``);return}},[p]),g.useEffect(()=>{let e=!0,n=p.trim();if(!n){Ge(``);return}let r=new TextEncoder().encode(t(n));return(async()=>{let t=await be(r);e&&Ge(t)})(),()=>{e=!1}},[p]),g.useEffect(()=>{if(!qe)return;let e=window.setTimeout(()=>N(``),2400);return()=>window.clearTimeout(e)},[qe]),g.useEffect(()=>{if(typeof window>`u`)return;let e=v.status===`ok`?`VERIFIED`:v.status===`error`?`FAILED`:`STANDBY`,t=window.location.origin,n=u.raw||l||``,r=new URL(`${t}/verify/${encodeURIComponent(n)}`),i=new URL(`${t}/api/og/verify`);i.searchParams.set(`slug`,n),i.searchParams.set(`status`,e.toLowerCase()),v.status===`ok`&&(i.searchParams.set(`pulse`,String(v.embedded.pulse??u.pulse??``)),i.searchParams.set(`phiKey`,v.derivedPhiKey??``),v.embedded.chakraDay&&i.searchParams.set(`chakraDay`,v.embedded.chakraDay),P!=null&&i.searchParams.set(`kas`,P?`1`:`0`),R!=null&&i.searchParams.set(`g16`,R?`1`:`0`)),document.title=`Proof of Breath‚Ñ¢ ‚Äî ${e}`,C(`property`,`og:title`,`Proof of Breath‚Ñ¢ ‚Äî ${e}`),C(`property`,`og:description`,`Proof of Breath‚Ñ¢ ‚Ä¢ ${e} ‚Ä¢ Pulse ${u.pulse??`‚Äî`}`),C(`property`,`og:url`,r.toString()),C(`property`,`og:image`,i.toString()),C(`name`,`twitter:card`,`summary_large_image`),C(`name`,`twitter:title`,`Proof of Breath‚Ñ¢ ‚Äî ${e}`),C(`name`,`twitter:description`,`Proof of Breath‚Ñ¢ ‚Ä¢ ${e} ‚Ä¢ Pulse ${u.pulse??`‚Äî`}`),C(`name`,`twitter:image`,i.toString())},[P,v,u.pulse,u.raw,l,R]);let U=(0,g.useMemo)(()=>M||(v.status!==`ok`||!v.embedded.zkProof&&!v.embedded.zkPublicInputs&&!v.embedded.zkPoseidonHash&&!v.embedded.proofHints?null:{zkPoseidonHash:v.embedded.zkPoseidonHash,zkProof:v.embedded.zkProof,zkPublicInputs:v.embedded.zkPublicInputs,proofHints:v.embedded.proofHints}),[M,v]),W=(0,g.useMemo)(()=>U?.zkProof?ye(U.zkProof):``,[U]),G=(0,g.useMemo)(()=>U?.zkPublicInputs?ye(U.zkPublicInputs):``,[U]),K=(0,g.useMemo)(()=>U?.proofHints?ye(U.proofHints):``,[U]),q=(0,g.useMemo)(()=>O?oe(O.pulse,O.kaiSignature):``,[O]),J=(0,g.useMemo)(()=>typeof window>`u`?``:window.location.href,[l]),Y=(0,g.useCallback)(async(e,t)=>{let n=(e||``).trim();if(n)try{if(!navigator.clipboard?.writeText){N(`Clipboard unavailable. Use manual copy.`);return}await navigator.clipboard.writeText(n),N(`${t} remembered.`)}catch(e){N(`Remember failed. Use manual copy.`),console.error(e)}},[]),Dt=(0,g.useCallback)(async e=>{if(!Ne(e)){y({status:`error`,message:`Upload a sealed .svg (embedded <metadata> JSON).`,slug:u});return}h(await Ae(e)),y({status:`idle`}),N(``)},[u]),Ot=(0,g.useCallback)(e=>{if(!e||e.length===0)return;let t=Array.from(e).find(Ne);if(!t){y({status:`error`,message:`Drop/select a sealed .svg file.`,slug:u});return}Dt(t)},[Dt,u]),kt=(0,g.useCallback)(async()=>{let e=p.trim();if(!e){y({status:`error`,message:`Inhale or paste the sealed SVG (Œ¶Key).`,slug:u});return}let t=Oe(e);if(t){je(t),h(``),y({status:`idle`}),N(`Receipt loaded.`);return}Ee(!0);try{y(await _e(u,e))}finally{Ee(!1)}},[u,p]);g.useEffect(()=>{let e=!0;return(async()=>{if(v.status!==`ok`){Be(null),Ve(``),He(``),Ue(``),Ke(null),F(null),N(``);return}if(x&&!p.trim()){Be(x.proofCapsule),He(x.svgHash??``),Ve(x.capsuleHash??``),Ue(x.bundleHash??``),Ke({proofCapsule:x.proofCapsule,svgHash:x.svgHash,capsuleHash:x.capsuleHash,bundleHash:x.bundleHash,shareUrl:x.shareUrl,verifierUrl:x.verifierUrl,authorSig:x.authorSig,zkPoseidonHash:x.zkPoseidonHash,zkProof:x.zkProof,proofHints:x.proofHints,zkPublicInputs:x.zkPublicInputs}),F(null);return}let t=v.embedded.kaiSignature??``,n=v.embedded.pulse??v.slug.pulse??0,r={v:`KPV-1`,pulse:n,chakraDay:se(v.embedded.chakraDay??``)??`Crown`,kaiSignature:t,phiKey:v.derivedPhiKey,verifierSlug:ne(n,t)},i=await ce(p),a=ae(p),o=a?.proofCapsule??r,s=await ie(o),c=await re(ue(a?.raw&&typeof a.raw==`object`&&a.raw!==null?{...a.raw,svgHash:i,capsuleHash:s,proofCapsule:o}:{hashAlg:a?.hashAlg??`sha256`,canon:a?.canon??`JCS`,proofCapsule:o,capsuleHash:s,svgHash:i,shareUrl:a?.shareUrl,verifierUrl:a?.verifierUrl,zkPoseidonHash:a?.zkPoseidonHash,zkProof:a?.zkProof,proofHints:a?.proofHints,zkPublicInputs:a?.zkPublicInputs,authorSig:a?.authorSig??null})),l=a?.authorSig,u=null;l&&(u=ee(l)?await pe(Me(l)??c,l):!1),e&&(Be(o),He(i),Ve(s),Ue(c),Ke(a),F(u))})(),()=>{e=!1}},[v,x,u.raw,p]),g.useEffect(()=>{let t=!0;if(!x||p.trim())return;let n=x.proofCapsule,r={proofCapsule:n,svgHash:x.svgHash,capsuleHash:x.capsuleHash,bundleHash:x.bundleHash,shareUrl:x.shareUrl,verifierUrl:x.verifierUrl,authorSig:x.authorSig,zkPoseidonHash:x.zkPoseidonHash,zkProof:x.zkProof,proofHints:x.proofHints,zkPublicInputs:x.zkPublicInputs};return(async()=>{let i=await e(n.kaiSignature),a=u.pulse==null?null:u.pulse===n.pulse,ee=u.shortSig==null?null:u.shortSig===n.kaiSignature.slice(0,u.shortSig.length),o=n.phiKey?i===n.phiKey:null;if(!t)return;let s={hasSignature:!0,slugPulseMatches:a,slugShortSigMatches:ee,derivedPhiKeyMatchesEmbedded:o},c=s.slugPulseMatches===!1||s.slugShortSigMatches===!1||s.derivedPhiKeyMatchesEmbedded===!1,l={pulse:n.pulse,chakraDay:n.chakraDay,kaiSignature:n.kaiSignature,phiKey:n.phiKey,proofCapsule:n};y(c?{status:`error`,message:`Verification failed: one or more checks did not match.`,slug:u,embedded:l,derivedPhiKey:i,checks:s}:{status:`ok`,slug:u,embedded:l,derivedPhiKey:i,checks:s}),Ke(r),Be(n),Ve(x.capsuleHash??``),He(x.svgHash??``),Ue(x.bundleHash??``)})(),()=>{t=!1}},[x,u,p]),g.useEffect(()=>{if(v.status!==`ok`||!j){tt(null),I(null);return}let e=we(M?.raw??v.embedded.raw);if(e){tt(e);return}tt(null),I(null)},[v.status,j,M?.raw]),g.useEffect(()=>{let e=!0;if(!z||!j){I(null);return}return(async()=>{let t=z.binds.bundleHash;if(!t){e&&I(!1);return}let{challengeBytes:n}=await de(`receive`,t,z.nonce),r=await le({assertion:z.assertion,expectedChallenge:n,pubKeyJwk:z.pubKeyJwk,expectedCredId:z.credId});e&&I(r)})(),()=>{e=!1}},[z,j]),g.useEffect(()=>{let e=!0;if(!M?.authorSig||!j||P!==null)return;let t=M.authorSig;return(async()=>{if(!ee(t)){e&&F(!1);return}let n=await pe(Me(t)??j,t);e&&F(n)})(),()=>{e=!1}},[P,j,M?.authorSig]),g.useEffect(()=>{let e=!0;if(!x){L(`missing`);return}let t=x.authorSig,n=x.capsuleHash??``;if(!t||!n){L(`missing`);return}return(async()=>{let r=await ie(x.proofCapsule),i=r===n,a=await re(ue({hashAlg:m,canon:`JCS`,proofCapsule:x.proofCapsule,capsuleHash:r,svgHash:x.svgHash,shareUrl:x.shareUrl,verifierUrl:x.verifierUrl,zkPoseidonHash:x.zkPoseidonHash,zkProof:x.zkProof,proofHints:x.proofHints,zkPublicInputs:x.zkPublicInputs,authorSig:x.authorSig??null})),o=ee(t)?Me(t):null,s=x.bundleHash??``,c=s?s===a:null,l=o?o===a:null,u=c===!1||l===!1?!1:c===null&&l===null?null:!0,te=ee(t)?await pe(o??a,t):!1;if(e){if(!i){L(!1);return}if(u===!1){L(!1);return}if(u===null){L(`missing`);return}L(te)}})(),()=>{e=!1}},[x]),g.useEffect(()=>{if(!p.trim()){Ze(`missing`);return}let e=x?.svgHash??M?.svgHash??``;if(!e){Ze(`missing`);return}We&&Ze(We===e)},[M?.svgHash,x?.svgHash,We,p]),g.useEffect(()=>{let e=!0;return(async()=>{if(!U?.zkProof||!U?.zkPublicInputs){e&&Qe(null);return}if(!$e)try{let t=await fetch(`/zk/verification_key.json`,{cache:`no-store`});if(!t.ok)return;let n=await t.json();if(!e)return;et(n);return}catch{return}let t=xe(U.zkProof),n=xe(U.zkPublicInputs),r=await o({proof:t,publicSignals:Array.isArray(n)||typeof n==`object`?n:[n],vkey:$e??void 0,fallbackVkey:$e??void 0});e&&Qe(r)})(),()=>{e=!1}},[U,$e]);let At=(0,g.useMemo)(()=>b?{kind:`busy`,title:`SEALING`,subtitle:`Deterministic proof rails executing.`}:v.status===`ok`?{kind:`ok`,title:`PROOF OF BREATH‚Ñ¢`,subtitle:`Human-origin seal affirmed.`}:v.status===`error`?{kind:`fail`,title:`REJECTED`,subtitle:`Inhale a sealed Œ¶Key, then verify.`}:{kind:`idle`,title:`STANDBY`,subtitle:`Inhale a Œ¶Key to begin.`},[b,v.status]),jt=(0,g.useMemo)(()=>v.status===`ok`?String(v.embedded.pulse??u.pulse??0):String(u.pulse??0),[v,u.pulse]),Mt=(0,g.useMemo)(()=>v.status===`ok`&&v.derivedPhiKey||`‚Äî`,[v]),Nt=(0,g.useMemo)(()=>b?`busy`:M?.authorSig?P===null?`na`:P?`valid`:`invalid`:`off`,[b,M?.authorSig,P]),Pt=(0,g.useMemo)(()=>b?`busy`:U?.zkPoseidonHash?R===null?`na`:R?`valid`:`invalid`:`off`,[b,U?.zkPoseidonHash,R]),Ft=!!p.trim(),It=x?.svgHash??M?.svgHash??``,Lt=Ye===!0?`Verified`:Ye===!1?`Not Present`:`Not provided`,Rt=Xe===!0?`Verified`:Xe===!1?`Failed`:Ft?It?`Not present`:`No reference hash`:`Not present`,zt=(0,g.useMemo)(()=>z?z.credId:``,[z]),Bt=(0,g.useMemo)(()=>z?z.nonce:``,[z]),Vt=(0,g.useMemo)(()=>z?.binds.bundleHash?z.binds.bundleHash:j||``,[z,j]),X=(0,g.useMemo)(()=>O?JSON.stringify({hashAlg:m,canon:`JCS`,proofCapsule:O,capsuleHash:k,svgHash:A,bundleHash:j,shareUrl:M?.shareUrl??null,verifierUrl:q,authorSig:M?.authorSig??null,zkPoseidonHash:U?.zkPoseidonHash??null,zkProof:U?.zkProof??null,proofHints:U?.proofHints??null,zkPublicInputs:U?.zkPublicInputs??null},null,2):``,[O,k,A,j,M,q,U]),Ht=(0,g.useMemo)(()=>{let e=p.trim();if(!e)return``;let t=e.split(`
`);return t.slice(0,Math.min(t.length,8)).join(`
`)},[p]),Z=v.status===`ok`?v.embedded.pulse??u.pulse??0:u.pulse??0,Ut=v.status===`ok`?v.embedded.kaiSignature??u.shortSig??`unknown`:u.shortSig??`unknown`,Q=v.status===`ok`?v.derivedPhiKey:`‚Äî`,Wt=v.status===`ok`?v.embedded.chakraDay:void 0,Gt=v.status===`ok`?`VERIFIED`:v.status===`error`?`FAILED`:`STANDBY`,Kt=Q&&Q!==`‚Äî`?S(Q,12,10):`‚Äî`,qt=Nt===`valid`?`‚úÖ`:`‚ùå`,Jt=Pt===`valid`?`‚úÖ`:`‚ùå`,$=(0,g.useMemo)(()=>{if(!O)return``;let e={hashAlg:m,canon:`JCS`,proofCapsule:O,capsuleHash:k,verifierUrl:q||J};return A&&(e.svgHash=A),j&&(e.bundleHash=j),M?.shareUrl&&(e.shareUrl=M.shareUrl),M?.authorSig&&(e.authorSig=M.authorSig),M?.zkProof&&(e.zkProof=M.zkProof),M?.proofHints&&(e.proofHints=M.proofHints),M?.zkPublicInputs&&(e.zkPublicInputs=M.zkPublicInputs),U?.zkPoseidonHash&&(e.zkPoseidonHash=U.zkPoseidonHash,e.zkVerified=!!R,e.zkScheme=`groth16-poseidon`),fe(e)},[j,k,J,M?.shareUrl,O,q,A,U?.zkPoseidonHash,R]),Yt=(0,g.useMemo)(()=>{if(!$)return``;let e=q||J;return e?ke(e,$):``},[J,q,$]),Xt=(0,g.useCallback)(async()=>{let e=Yt||q||J,t=`Proof of Breath‚Ñ¢ ‚Äî ${Gt}`,n=`${Gt} ‚Ä¢ Pulse ${Z} ‚Ä¢ Œ¶Key ${Kt} ‚Ä¢ KAS ${qt} ‚Ä¢ G16 ${Jt}`;if(navigator.share)try{await navigator.share({title:t,text:n,url:e});return}catch(e){if(e instanceof Error&&e.name===`AbortError`)return}N(await Pe(e)?`Link Remembered.`:`Remember failed. Use manual remember.`)},[J,q,Jt,qt,Kt,Yt,Gt,Z]),Zt=(0,g.useCallback)(async()=>{$&&N(await Pe($)?`Proof JSON remembered.`:`Remember failed. Use manual remember.`)},[$]),Qt=d===`inhale`?`Inhale`:d===`capsule`?`Vessel`:d===`proof`?`Proof`:d===`zk`?`ZK`:`Audit`,$t=(0,g.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),rt(!0)},[]),en=(0,g.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),rt(!1)},[]),tn=(0,g.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),rt(!1),Ot(e.dataTransfer?.files)},[Ot]);return(0,_.jsxs)(`div`,{className:`vapp`,role:`application`,"aria-label":`‚ò§Kai Sigil-Glyph Attestation`,children:[qe?(0,_.jsx)(`button`,{type:`button`,className:`vtoast vtoast-floating`,onClick:()=>N(``),"aria-label":`Dismiss notice`,title:`Dismiss`,children:qe}):null,(0,_.jsxs)(`header`,{className:`vhead`,children:[(0,_.jsxs)(`div`,{className:`vhead-left`,children:[(0,_.jsxs)(`div`,{className:`vbrand`,children:[(0,_.jsx)(`div`,{className:`vtitle`,children:`‚ò§Kai Sigil-Glyph Attestation`}),(0,_.jsx)(`div`,{className:`vsub`,children:`Sovereign proof of human origin ‚Äî ‚ò§Kai-Signature ‚Üí Œ¶-Key.`})]}),(0,_.jsxs)(`div`,{className:`vlink`,children:[(0,_.jsx)(`span`,{className:`vlink-k`,children:`Path`}),(0,_.jsxs)(`code`,{className:`vlink-v mono`,children:[`/verify/`,u.raw||`‚Äî`]})]})]}),(0,_.jsxs)(`div`,{className:`vhead-right`,children:[(0,_.jsxs)(`div`,{className:`vhead-top`,"aria-label":`Primary verification`,children:[Tt?(0,_.jsx)(`div`,{className:`vsigil-thumb`,"aria-label":`Uploaded sigil preview`,title:`Uploaded sigil preview`,children:(0,_.jsx)(`img`,{className:`vsigil-img`,src:Tt,alt:`Uploaded sigil`})}):null,(0,_.jsx)(Le,{kind:At.kind,title:At.title,subtitle:At.subtitle})]}),(0,_.jsxs)(`div`,{className:`vseals`,"aria-label":`Sovereign seals`,children:[(0,_.jsx)(E,{label:`KAS`,state:Nt,detail:M?.authorSig?`Author seal (WebAuthn KAS)`:`No author seal present`}),(0,_.jsx)(E,{label:`G16`,state:Pt,detail:U?.zkPoseidonHash?`Groth16 + Poseidon rail`:`No ZK rail present`}),v.status===`ok`&&V!=null?(0,_.jsx)(Re,{phiValue:V,usdValue:ft,label:pt,ariaLabel:mt}):null]}),(0,_.jsxs)(`div`,{className:`vkpis`,"aria-label":`Primary identifiers`,children:[(0,_.jsx)(D,{label:`Pulse`,value:jt}),(0,_.jsx)(D,{label:`Œ¶-Key`,value:Mt===`‚Äî`?`‚Äî`:S(Mt,12,10),title:Mt})]}),O?(0,_.jsxs)(`div`,{className:`vreceipt-row`,"aria-label":`Proof actions`,children:[(0,_.jsx)(`div`,{className:`vreceipt-label`,children:`Proof`}),(0,_.jsxs)(`div`,{className:`vreceipt-actions`,children:[(0,_.jsx)(`button`,{type:`button`,className:`vbtn vbtn--ghost`,onClick:()=>void Xt(),children:`‚û¶`}),(0,_.jsx)(`button`,{type:`button`,className:`vbtn vbtn--ghost`,onClick:()=>void Zt(),children:`üí†`})]})]}):null]})]}),(0,_.jsxs)(`div`,{className:`vbody`,children:[(0,_.jsxs)(`section`,{className:`vpanel`,role:`tabpanel`,"aria-label":`Active panel`,children:[d===`inhale`?(0,_.jsxs)(`div`,{className:`vcard`,"data-panel":`inhale`,children:[(0,_.jsxs)(`div`,{className:`vcard-head`,children:[(0,_.jsx)(`div`,{className:`vcard-title`,children:`Inhale Œ¶Key`}),(0,_.jsx)(`div`,{className:`vcard-sub`,children:`Tap to inhale a sealed Œ¶Key. Deep payloads open in Expanded Views.`})]}),(0,_.jsxs)(`div`,{className:`vcard-body vfit`,children:[(0,_.jsxs)(`div`,{className:nt?`vdropzone is-drag`:`vdropzone`,onDragOver:$t,onDragEnter:$t,onDragLeave:en,onDrop:tn,children:[(0,_.jsx)(`input`,{ref:r,className:`vfile`,type:`file`,accept:`.svg,image/svg+xml`,onChange:e=>{Ot(e.currentTarget.files),e.currentTarget.value=``}}),(0,_.jsxs)(`div`,{className:`vgrid-2 vgrid-2--inhale`,children:[(0,_.jsxs)(`div`,{className:`vcontrol`,"aria-label":`Inhale controls`,children:[(0,_.jsxs)(`button`,{type:`button`,className:`vdrop`,"aria-label":`Inhale sealed Œ¶Key (SVG)`,title:`Inhale sealed Œ¶Key (.svg)`,onClick:()=>r.current?.click(),children:[(0,_.jsx)(`span`,{className:`vdrop-ic`,"aria-hidden":`true`,children:(0,_.jsx)(`img`,{className:`vphi-ic`,src:`/phi.svg`,alt:``,"aria-hidden":`true`})}),(0,_.jsx)(`span`,{className:`vdrop-txt`,children:`Inhale`}),(0,_.jsxs)(`span`,{className:`vdrop-mark`,"aria-label":`PhiKey mark`,children:[(0,_.jsx)(`img`,{className:`vphi`,src:`/phi.svg`,alt:`Œ¶`}),(0,_.jsx)(`span`,{className:`vdrop-mark-txt`,children:`Œ¶Key`})]})]}),(0,_.jsxs)(`div`,{className:`vcontrol-row`,"aria-label":`Quick actions`,children:[(0,_.jsx)(w,{icon:`‚ü°`,title:b?`Verifying‚Ä¶`:`Verify`,ariaLabel:`Verify`,onClick:()=>void kt(),disabled:b,kind:`primary`}),(0,_.jsx)(w,{icon:`‚§¢`,title:`Focus View (paste/edit)`,ariaLabel:`Focus View (paste/edit)`,onClick:()=>gt(!0),disabled:!p.trim()}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember Œ¶Key`,ariaLabel:`Remember Œ¶Key`,onClick:()=>void Y(p,`Œ¶Key`),disabled:!p.trim()}),(0,_.jsx)(w,{icon:`‚®Ø`,title:`Clear`,ariaLabel:`Clear`,onClick:()=>{h(``),je(null),y({status:`idle`}),N(``)},disabled:!p.trim()})]}),(0,_.jsxs)(`div`,{className:`vmini-grid vmini-grid--2`,"aria-label":`Attestation status`,children:[(0,_.jsx)(D,{label:`Identity`,value:Lt}),(0,_.jsx)(D,{label:`Sigil-Glyph`,value:Rt})]}),(0,_.jsxs)(`div`,{className:`vmini-grid vmini-grid--2`,"aria-label":`Quick readout`,children:[(0,_.jsx)(D,{label:`Inhaled`,value:p.trim()?`true`:`false`}),(0,_.jsx)(D,{label:`Attestation`,value:M?`present`:`‚Äî`})]})]}),(0,_.jsxs)(`div`,{className:`vconsole`,"aria-label":`Œ¶Key preview`,children:[(0,_.jsx)(`pre`,{className:`vpre`,children:(0,_.jsx)(`code`,{className:`mono`,children:Ht||`inhale a sealed Œ¶Key (.SVG) to begin‚Ä¶`})}),(0,_.jsxs)(`div`,{className:`vconsole-foot`,children:[(0,_.jsxs)(`div`,{className:`vchip`,title:`Sovereign verification rail`,children:[`Sovereign ¬∑ `,m,` ¬∑ `,`JCS`]}),(0,_.jsxs)(`div`,{className:`vactions`,"aria-label":`Console actions`,children:[(0,_.jsx)(w,{icon:`‚§¢`,title:`Focus View`,ariaLabel:`Focus View`,onClick:()=>gt(!0),disabled:!p.trim()}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember Œ¶Key`,ariaLabel:`Remember Œ¶Key`,onClick:()=>void Y(p,`Œ¶Key`),disabled:!p.trim()})]})]})]})]}),(0,_.jsx)(`div`,{className:`vdropzone-hint`,"aria-hidden":`true`,children:`Drag & drop Œ¶Key anywhere in this panel`})]}),v.status===`error`?(0,_.jsx)(`div`,{className:`verror`,children:v.message??`Not verified.`}):null]})]}):null,d===`capsule`?(0,_.jsxs)(`div`,{className:`vcard`,"data-panel":`capsule`,children:[(0,_.jsxs)(`div`,{className:`vcard-head`,children:[(0,_.jsx)(`div`,{className:`vcard-title`,children:`Proof Vessel`}),(0,_.jsx)(`div`,{className:`vcard-sub`,children:`Determinate identity seal: ‚ò§Kai (pulse) + spiral (chakra) day + ‚ò§Kai-Signature ‚Üí Œ¶-Key.`})]}),(0,_.jsx)(`div`,{className:`vcard-body vfit`,children:(0,_.jsxs)(`div`,{className:`vgrid-2 vgrid-2--capsule`,children:[(0,_.jsx)(`div`,{className:`vframe-wrap`,children:(0,_.jsx)(me,{pulse:Z,kaiSignature:Ut,phiKey:Q,chakraDay:Wt,compact:!0})}),(0,_.jsxs)(`div`,{className:`vstack`,children:[(0,_.jsxs)(`div`,{className:`vmini-grid vmini-grid--3`,"aria-label":`Slug and embed checks`,children:[(0,_.jsx)(D,{label:`pathMark pulse`,value:v.status===`ok`?v.checks.slugPulseMatches===null?`n/a`:String(v.checks.slugPulseMatches):`‚Äî`}),(0,_.jsx)(D,{label:`pathMark sig`,value:v.status===`ok`?v.checks.slugShortSigMatches===null?`n/a`:String(v.checks.slugShortSigMatches):`‚Äî`}),(0,_.jsx)(D,{label:`Œ¶-Key seal`,value:v.status===`ok`?v.checks.derivedPhiKeyMatchesEmbedded===null?`n/a`:String(v.checks.derivedPhiKeyMatchesEmbedded):`‚Äî`})]}),(0,_.jsxs)(`div`,{className:`vrail-grid`,"aria-label":`Capsule fields`,children:[(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`‚ò§Kai (pulse)`}),(0,_.jsx)(`code`,{className:`vv mono`,children:Z?String(Z):`‚Äî`}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember pulse`,ariaLabel:`Remember pulse`,onClick:()=>void Y(String(Z),`Pulse`),disabled:!Z})]}),(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`Spiral (chakra)`}),(0,_.jsx)(`code`,{className:`vv mono`,children:Wt??`‚Äî`}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember Spiral (chakra)`,ariaLabel:`Remember Spiral (chakra)`,onClick:()=>void Y(String(Wt??``),`Spiral (Chakra)`),disabled:!Wt})]}),(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`‚ò§kai-Signature`}),(0,_.jsx)(`code`,{className:`vv mono`,title:Ut,children:S(Ut,16,12)}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember ‚ò§Kai-Signature`,ariaLabel:`Remember ‚ò§Kai-Signature`,onClick:()=>void Y(Ut,`‚ò§Kai-Signature`),disabled:!Ut})]}),(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`Œ¶-Key`}),(0,_.jsx)(`code`,{className:`vv mono`,title:Q,children:Q===`‚Äî`?`‚Äî`:S(Q,16,12)}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember Œ¶-Key`,ariaLabel:`Remember Œ¶-Key`,onClick:()=>void Y(Q,`Œ¶-Key`),disabled:!Q||Q===`‚Äî`})]})]})]})]})})]}):null,d===`proof`?(0,_.jsxs)(`div`,{className:`vcard`,"data-panel":`proof`,children:[(0,_.jsxs)(`div`,{className:`vcard-head`,children:[(0,_.jsx)(`div`,{className:`vcard-title`,children:`Attestation Spine`}),(0,_.jsx)(`div`,{className:`vcard-sub`,children:`vesselHash + sigilHash ‚Üí bundleHash (offline integrity rail).`})]}),(0,_.jsxs)(`div`,{className:`vcard-body vfit`,children:[(0,_.jsxs)(`div`,{className:`vrail-grid vrail-grid--2`,"aria-label":`Proof hash rail`,children:[(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`hash`}),(0,_.jsx)(`code`,{className:`vv mono`,children:m}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember hash algorithm`,ariaLabel:`Remember hash algorithm`,onClick:()=>void Y(m,`Hash algorithm`)})]}),(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`canon`}),(0,_.jsx)(`code`,{className:`vv mono`,children:`JCS`}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember canonicalization`,ariaLabel:`Remember canonicalization`,onClick:()=>void Y(`JCS`,`Canonicalization`)})]}),(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`verifier`}),(0,_.jsx)(`code`,{className:`vv mono`,title:q||`‚Äî`,children:q?S(q,22,16):`‚Äî`}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember verifier URL`,ariaLabel:`Remember verifier URL`,onClick:()=>void Y(q,`Verifier URL`),disabled:!q})]}),(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`sigilHash`}),(0,_.jsx)(`code`,{className:`vv mono`,title:A||`‚Äî`,children:A?S(A,22,16):`‚Äî`}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember Œ¶Key hash`,ariaLabel:`Remember SVG hash`,onClick:()=>void Y(A,`SVG hash`),disabled:!A})]}),(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`vesselHash`}),(0,_.jsx)(`code`,{className:`vv mono`,title:k||`‚Äî`,children:k?S(k,22,16):`‚Äî`}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember vessel hash`,ariaLabel:`Remember vessel hash`,onClick:()=>void Y(k,`Vessel hash`),disabled:!k})]}),(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`bundleHash`}),(0,_.jsx)(`code`,{className:`vv mono`,title:j||`‚Äî`,children:j?S(j,22,16):`‚Äî`}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember bundle hash`,ariaLabel:`Remember bundle hash`,onClick:()=>void Y(j,`Bundle hash`),disabled:!j})]})]}),v.status===`ok`&&V!=null?(0,_.jsxs)(`div`,{className:`vmini-grid vmini-grid--2 vvaluation-dashboard`,"aria-label":`Live valuation`,children:[(0,_.jsx)(D,{label:H===`balance`?`Glyph Œ¶ balance`:H===`embedded`?`Glyph Œ¶ value`:`Live Œ¶ value`,value:n(V)}),(0,_.jsx)(D,{label:H===`balance`?`Glyph USD balance`:H===`embedded`?`Glyph USD value`:`Live USD value`,value:ft==null?`‚Äî`:i(ft)})]}):null,(0,_.jsxs)(`div`,{className:`vfoot`,"aria-label":`Proof actions`,children:[(0,_.jsx)(`div`,{className:`vfoot-left`,children:(0,_.jsx)(`div`,{className:`vchip`,title:`Canonical audit payload`,children:`Audit JSON`})}),(0,_.jsxs)(`div`,{className:`vfoot-right`,children:[(0,_.jsx)(w,{icon:`‚§¢`,title:`Focus View (Audit JSON)`,ariaLabel:`Focus View (Audit JSON)`,onClick:()=>vt(!0),disabled:!X}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember Audit JSON`,ariaLabel:`Remember Audit JSON`,onClick:()=>void Y(X,`Audit JSON`),disabled:!X})]})]})]})]}):null,d===`zk`?(0,_.jsxs)(`div`,{className:`vcard`,"data-panel":`zk`,children:[(0,_.jsxs)(`div`,{className:`vcard-head`,children:[(0,_.jsx)(`div`,{className:`vcard-title`,children:`Zero Knowledge Proof`}),(0,_.jsx)(`div`,{className:`vcard-sub`,children:`Groth16 + Poseidon status; full payloads in Expanded Views.`})]}),(0,_.jsx)(`div`,{className:`vcard-body vfit`,children:(0,_.jsxs)(`div`,{className:`vrail-grid vrail-grid--2`,"aria-label":`ZK rail values`,children:[(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`poseidon`}),(0,_.jsx)(`code`,{className:`vv mono`,title:String(U?.zkPoseidonHash??`‚Äî`),children:U?.zkPoseidonHash?S(String(U.zkPoseidonHash),22,16):`‚Äî`}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember Poseidon hash`,ariaLabel:`Remember Poseidon hash`,onClick:()=>void Y(String(U?.zkPoseidonHash??``),`Poseidon hash`),disabled:!U?.zkPoseidonHash})]}),(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`groth16`}),(0,_.jsx)(`div`,{className:`vseal-inline`,children:(0,_.jsx)(E,{label:`G16`,state:Pt,detail:`Groth16 verification status`})}),(0,_.jsx)(`span`,{})]}),(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`zkProof`}),(0,_.jsx)(`code`,{className:`vv mono`,title:W||`‚Äî`,children:W?S(W.replace(/\s+/g,` `),22,18):`‚Äî`}),(0,_.jsxs)(`div`,{className:`vrow-actions`,children:[(0,_.jsx)(w,{icon:`‚§¢`,title:`Focus View (ZK proof)`,ariaLabel:`Focus View (ZK proof)`,onClick:()=>bt(!0),disabled:!W}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember ZK proof`,ariaLabel:`Remember ZK proof`,onClick:()=>void Y(W,`ZK proof`),disabled:!W})]})]}),(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`publicInputs`}),(0,_.jsx)(`code`,{className:`vv mono`,title:G||`‚Äî`,children:G?S(G.replace(/\s+/g,` `),22,18):`‚Äî`}),(0,_.jsxs)(`div`,{className:`vrow-actions`,children:[(0,_.jsx)(w,{icon:`‚§¢`,title:`Focus View (public inputs)`,ariaLabel:`Focus View (public inputs)`,onClick:()=>St(!0),disabled:!G}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember public inputs`,ariaLabel:`Remember public inputs`,onClick:()=>void Y(G,`Public inputs`),disabled:!G})]})]}),(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`hints`}),(0,_.jsx)(`code`,{className:`vv mono`,title:K||`‚Äî`,children:K?S(K.replace(/\s+/g,` `),22,18):`‚Äî`}),(0,_.jsxs)(`div`,{className:`vrow-actions`,children:[(0,_.jsx)(w,{icon:`‚§¢`,title:`Focus View (hints)`,ariaLabel:`Focus View (hints)`,onClick:()=>wt(!0),disabled:!K}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember hints`,ariaLabel:`Remember hints`,onClick:()=>void Y(K,`Proof hints`),disabled:!K})]})]}),(0,_.jsxs)(`div`,{className:`vrow`,children:[(0,_.jsx)(`span`,{className:`vk`,children:`audit`}),(0,_.jsx)(`code`,{className:`vv mono`,children:`bundle JSON`}),(0,_.jsxs)(`div`,{className:`vrow-actions`,children:[(0,_.jsx)(w,{icon:`‚§¢`,title:`Focus View (Audit JSON)`,ariaLabel:`Focus View (Audit JSON)`,onClick:()=>vt(!0),disabled:!X}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember Audit JSON`,ariaLabel:`Remember Audit JSON`,onClick:()=>void Y(X,`Audit JSON`),disabled:!X})]})]})]})})]}):null,d===`audit`?(0,_.jsxs)(`div`,{className:`vcard`,"data-panel":`audit`,children:[(0,_.jsxs)(`div`,{className:`vcard-head`,children:[(0,_.jsx)(`div`,{className:`vcard-title`,children:`Audit`}),(0,_.jsx)(`div`,{className:`vcard-sub`,children:`Attestation bundle parity + author seal validity.`})]}),(0,_.jsxs)(`div`,{className:`vcard-body vfit`,children:[(0,_.jsxs)(`div`,{className:`vmini-grid vmini-grid--6`,"aria-label":`Audit checks`,children:[(0,_.jsx)(D,{label:`Attestation bundle`,value:M?`present`:`‚Äî`}),(0,_.jsx)(D,{label:`Author signature`,value:M?.authorSig?`present`:`‚Äî`}),(0,_.jsx)(D,{label:`Author verified`,value:P===null?`n/a`:P?`true`:`false`}),(0,_.jsx)(D,{label:`Receive signature`,value:z?`present`:`‚Äî`}),(0,_.jsx)(D,{label:`Receive verified`,value:Je===null?`n/a`:Je?`true`:`false`}),(0,_.jsx)(D,{label:`sigilHash parity`,value:M?.svgHash?String(M.svgHash===A):`n/a`}),(0,_.jsx)(D,{label:`vesselHash parity`,value:M?.capsuleHash?String(M.capsuleHash===k):`n/a`}),(0,_.jsx)(D,{label:`bundleHash parity`,value:M?.bundleHash?String(M.bundleHash===j):`n/a`})]}),(0,_.jsx)(`div`,{className:`vmini-grid vmini-grid--3`,"aria-label":`Receive signature status`,children:(0,_.jsx)(D,{label:`Receive credId`,value:zt?S(zt,12,10):`‚Äî`,title:zt||`‚Äî`})}),z?(0,_.jsxs)(`div`,{className:`vmini-grid vmini-grid--2`,"aria-label":`Receive signature summary`,children:[(0,_.jsx)(D,{label:`Receive nonce`,value:Bt?S(Bt,14,12):`‚Äî`,title:Bt||`‚Äî`}),(0,_.jsx)(D,{label:`Receive bundle`,value:Vt?S(Vt,14,12):`‚Äî`,title:Vt||`‚Äî`})]}):null,(0,_.jsxs)(`div`,{className:`vfoot`,"aria-label":`Audit actions`,children:[(0,_.jsx)(`div`,{className:`vfoot-left`,children:(0,_.jsxs)(`div`,{className:`vseals`,"aria-label":`Seal summary`,children:[(0,_.jsx)(E,{label:`KAS`,state:Nt}),(0,_.jsx)(E,{label:`G16`,state:Pt})]})}),(0,_.jsxs)(`div`,{className:`vfoot-right`,children:[(0,_.jsx)(w,{icon:`‚§¢`,title:`Focus View (Audit JSON)`,ariaLabel:`Focus View (Audit JSON)`,onClick:()=>vt(!0),disabled:!X}),(0,_.jsx)(w,{icon:`üí†`,title:`Remember Audit JSON`,ariaLabel:`Remember Audit JSON`,onClick:()=>void Y(X,`Audit JSON`),disabled:!X})]})]})]})]}):null]}),(0,_.jsxs)(`nav`,{className:`vtabs`,role:`tablist`,"aria-label":`Verifier views`,children:[(0,_.jsx)(T,{active:d===`inhale`,title:`Inhale`,text:`Inhale`,onClick:()=>f(`inhale`),icon:(0,_.jsx)(`img`,{className:`vtab-phi`,src:`/phi.svg`,alt:``,"aria-hidden":`true`})}),(0,_.jsx)(T,{active:d===`capsule`,title:`Vessel`,text:`Vessel`,onClick:()=>f(`capsule`),icon:`‚óà`}),(0,_.jsx)(T,{active:d===`proof`,title:`Proof`,text:`Proof`,onClick:()=>f(`proof`),icon:(0,_.jsx)(Ie,{})}),(0,_.jsx)(T,{active:d===`zk`,title:`ZK`,text:`ZK`,onClick:()=>f(`zk`),icon:(0,_.jsx)(Fe,{})}),(0,_.jsx)(T,{active:d===`audit`,title:`Audit`,text:`Audit`,onClick:()=>f(`audit`),icon:`‚ñ¶`}),(0,_.jsx)(`div`,{className:`vtabs-spacer`,"aria-hidden":`true`}),(0,_.jsxs)(`button`,{type:`button`,className:`vverify`,onClick:()=>void kt(),disabled:b,"aria-label":`Verify now`,title:b?`Verifying‚Ä¶`:`Verify (${Qt})`,children:[(0,_.jsx)(`span`,{className:`vverify-ic`,"aria-hidden":`true`,children:`‚ü°`}),(0,_.jsx)(`span`,{className:`vverify-txt`,children:b?`VERIFYING`:`VERIFY`})]})]})]}),(0,_.jsxs)(ze,{open:ht,title:`Œ¶Key Focus View`,subtitle:`Paste/edit sealed SVG (must include <metadata id="kai-voh-proof">{...}</metadata>).`,onClose:()=>gt(!1),children:[(0,_.jsx)(`textarea`,{className:`vta`,value:p,onChange:e=>{h(e.currentTarget.value),y({status:`idle`})},spellCheck:!1}),(0,_.jsxs)(`div`,{className:`vmodal-actions`,children:[(0,_.jsxs)(`button`,{type:`button`,className:`vcta`,onClick:()=>void kt(),disabled:b,title:b?`Verifying‚Ä¶`:`Verify`,children:[`‚ü° `,b?`VERIFYING`:`VERIFY`]}),(0,_.jsx)(`button`,{type:`button`,className:`vcta vcta--ghost`,onClick:()=>void Y(p,`SVG`),disabled:!p.trim(),title:`üí† Remember`,children:`üí† REMEMBER`})]})]}),(0,_.jsxs)(ze,{open:_t,title:`Audit JSON`,subtitle:`Canonical audit payload (vesselHash + sigilHash ‚Üí bundleHash).`,onClose:()=>vt(!1),children:[(0,_.jsx)(`textarea`,{className:`vta vta--readonly`,readOnly:!0,value:X||`‚Äî`}),(0,_.jsxs)(`div`,{className:`vmodal-actions`,children:[(0,_.jsx)(`button`,{type:`button`,className:`vcta`,onClick:()=>void Y(X,`Audit JSON`),disabled:!X,title:`üí† Remember`,children:`üí† REMEMBER`}),(0,_.jsx)(`button`,{type:`button`,className:`vcta vcta--ghost`,onClick:()=>vt(!1),title:`Close`,children:`CLOSE`})]})]}),(0,_.jsxs)(ze,{open:yt,title:`ZK Proof`,subtitle:`Full embedded Groth16 proof payload.`,onClose:()=>bt(!1),children:[(0,_.jsx)(`textarea`,{className:`vta vta--readonly`,readOnly:!0,value:W||`‚Äî`}),(0,_.jsxs)(`div`,{className:`vmodal-actions`,children:[(0,_.jsx)(`button`,{type:`button`,className:`vcta`,onClick:()=>void Y(W,`ZK proof`),disabled:!W,title:`üí† Remember`,children:`üí† REMEMBER`}),(0,_.jsx)(`button`,{type:`button`,className:`vcta vcta--ghost`,onClick:()=>bt(!1),title:`Close`,children:`CLOSE`})]})]}),(0,_.jsxs)(ze,{open:xt,title:`ZK Public Inputs`,subtitle:`Full embedded public inputs payload.`,onClose:()=>St(!1),children:[(0,_.jsx)(`textarea`,{className:`vta vta--readonly`,readOnly:!0,value:G||`‚Äî`}),(0,_.jsxs)(`div`,{className:`vmodal-actions`,children:[(0,_.jsx)(`button`,{type:`button`,className:`vcta`,onClick:()=>void Y(G,`Public inputs`),disabled:!G,title:`üí† Remember`,children:`üí† REMEMBER`}),(0,_.jsx)(`button`,{type:`button`,className:`vcta vcta--ghost`,onClick:()=>St(!1),title:`Close`,children:`CLOSE`})]})]}),(0,_.jsxs)(ze,{open:Ct,title:`Proof Hints`,subtitle:`Explorer/API hints embedded in the bundle.`,onClose:()=>wt(!1),children:[(0,_.jsx)(`textarea`,{className:`vta vta--readonly`,readOnly:!0,value:K||`‚Äî`}),(0,_.jsxs)(`div`,{className:`vmodal-actions`,children:[(0,_.jsx)(`button`,{type:`button`,className:`vcta`,onClick:()=>void Y(K,`Proof hints`),disabled:!K,title:`üí† Remember`,children:`üí† REMEMBER`}),(0,_.jsx)(`button`,{type:`button`,className:`vcta vcta--ghost`,onClick:()=>wt(!1),title:`Close`,children:`CLOSE`})]})]})]})}export{O as default};