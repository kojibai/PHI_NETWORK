import{Rr as e,Wr as t,a as n,bt as r,c as i,l as a,s as o,st as s}from"./index-CPbILZeD.js";import{a as c,c as l,d as u,f as ee,i as d,o as te,p as ne,r as re,s as ie,u as ae}from"./webauthnKAS-DipqK1Wc.js";import"./prop-types-DzptqAaV.js";import{t as oe}from"./VerifierFrame-DK05uYyd.js";var f=t(e(),1);function se(e){let t=decodeURIComponent(e||``).trim(),n=t.match(/^(\d+)-([A-Za-z0-9]+)$/);if(!n)return{raw:t,pulse:null,shortSig:null};let r=Number(n[1]);return{raw:t,pulse:Number.isFinite(r)&&r>0?r:null,shortSig:n[2]?String(n[2]):null}}function p(e,t){return e.length<=t?e:e.slice(0,t)}async function ce(e,t){try{let n=o(t),r=(n.kaiSignature??``).trim();if(!r)return{status:`error`,message:`No kaiSignature found in the SVG metadata.`,slug:e,embedded:n};let i=await s(r),a=(n.phiKey??``).trim(),c=n.pulseExact,l=c&&Number.isFinite(Number(c))?Number(c):n.pulse,u={hasSignature:!0,slugPulseMatches:e.pulse==null||l==null?null:e.pulse===l,slugShortSigMatches:e.shortSig==null?null:e.shortSig===p(r,e.shortSig.length),derivedPhiKeyMatchesEmbedded:a.length===0?null:i===a};return u.slugPulseMatches===!1||u.slugShortSigMatches===!1||u.derivedPhiKeyMatchesEmbedded===!1?{status:`error`,message:`Verification failed: one or more checks did not match.`,slug:e,embedded:n,derivedPhiKey:i,checks:u}:{status:`ok`,slug:e,embedded:{...n,pulse:l??n.pulse,phiKey:a.length>0?a:i},derivedPhiKey:i,checks:u}}catch(t){return{status:`error`,message:t instanceof Error?t.message:`Verification failed.`,slug:e}}}var m=t(r(),1);function h(e){if(e==null)return`‚Äî`;if(typeof e==`string`)return e;try{return JSON.stringify(e,null,2)}catch{return String(e)}}function le(){if(typeof window>`u`)return``;let e=window.location.pathname||``,t=window.location.hash||``,n=e.match(/\/verify\/([^/?#]+)/);if(n?.[1])return n[1];let r=t.match(/\/verify\/([^/?#]+)/);return r?.[1]?r[1]:``}async function ue(e){return await new Promise((t,n)=>{let r=new FileReader;r.onerror=()=>n(Error(`Failed to read file.`)),r.onload=()=>t(String(r.result??``)),r.readAsText(e)})}function g(e,t=18,n=14){let r=(e||``).trim();return r?r.length<=t+n+3?r:`${r.slice(0,t)}‚Ä¶${r.slice(r.length-n)}`:`‚Äî`}function de(e){let t=(e.name||``).toLowerCase(),n=(e.type||``).toLowerCase();return t.endsWith(`.svg`)||n===`image/svg+xml`}function fe(){return(0,m.jsxs)(`svg`,{className:`mark`,viewBox:`0 0 24 24`,"aria-hidden":`true`,focusable:`false`,children:[(0,m.jsx)(`path`,{d:`M12 2.25 20.25 7v10L12 21.75 3.75 17V7L12 2.25Z`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.4`,opacity:`0.95`}),(0,m.jsx)(`circle`,{cx:`12`,cy:`12`,r:`2.2`,fill:`currentColor`,opacity:`0.95`}),(0,m.jsx)(`path`,{d:`M7.2 12c0-2.65 2.15-4.8 4.8-4.8`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.4`,strokeLinecap:`round`,opacity:`0.55`})]})}function pe(){return(0,m.jsxs)(`svg`,{className:`mark`,viewBox:`0 0 24 24`,"aria-hidden":`true`,focusable:`false`,children:[(0,m.jsx)(`path`,{d:`M9.5 7.5a2.5 2.5 0 0 1 4 0l.7 1a3.6 3.6 0 0 0 2.3 1.4l1.2.2a2.5 2.5 0 0 1 0 4.9l-1.2.2a3.6 3.6 0 0 0-2.3 1.4l-.7 1a2.5 2.5 0 0 1-4 0l-.7-1a3.6 3.6 0 0 0-2.3-1.4l-1.2-.2a2.5 2.5 0 0 1 0-4.9l1.2-.2a3.6 3.6 0 0 0 2.3-1.4l.7-1Z`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.4`,opacity:`0.95`}),(0,m.jsx)(`path`,{d:`M8.7 12.2 11 14.4l4.6-4.7`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.6`,strokeLinecap:`round`,strokeLinejoin:`round`})]})}function _(e){return(0,m.jsx)(`button`,{type:`button`,className:e.kind===`primary`?`vbtn vbtn--primary`:`vbtn`,title:e.title,"aria-label":e.ariaLabel??e.title,onClick:e.onClick,disabled:e.disabled,children:(0,m.jsx)(`span`,{className:`vbtn-ic`,"aria-hidden":`true`,children:e.icon})})}function v(e){return(0,m.jsxs)(`button`,{type:`button`,role:`tab`,"aria-selected":e.active,className:e.active?`vtab active`:`vtab`,onClick:e.onClick,title:e.title,"aria-label":e.title,children:[(0,m.jsx)(`span`,{className:`vtab-ic`,"aria-hidden":`true`,children:e.icon}),(0,m.jsx)(`span`,{className:`vtab-txt`,children:e.text})]})}function me(e){let t=e.kind===`ok`?`ok`:e.kind===`fail`?`fail`:e.kind===`busy`?`busy`:`idle`,n=e.kind===`ok`;return(0,m.jsxs)(`div`,{className:`official`,"data-kind":t,"aria-live":`polite`,children:[(0,m.jsxs)(`div`,{className:`official-top`,children:[(0,m.jsx)(`div`,{className:`official-ring`,"aria-hidden":`true`,children:n?(0,m.jsx)(`span`,{className:`official-check`,children:`‚úì`}):null}),(0,m.jsx)(`div`,{className:`official-title`,children:e.title})]}),e.subtitle?(0,m.jsx)(`div`,{className:`official-sub`,children:e.subtitle}):null]})}function y(e){let t=e.state===`valid`?`‚úì`:e.state===`invalid`?`‚úï`:e.state===`busy`?`‚ü°`:e.state===`na`?`‚Äî`:`¬∑`,n=e.state===`valid`?`VERIFIED`:e.state===`invalid`?`INVALID`:e.state===`busy`?`CHECKING`:e.state===`na`?`N/A`:`ABSENT`;return(0,m.jsxs)(`div`,{className:`seal`,"data-state":e.state,title:e.detail??``,children:[(0,m.jsx)(`span`,{className:`seal-ic`,"aria-hidden":`true`,children:t}),(0,m.jsx)(`span`,{className:`seal-lbl`,children:e.label}),(0,m.jsx)(`span`,{className:`seal-txt`,children:n})]})}function b(e){return(0,m.jsxs)(`div`,{className:`mini`,children:[(0,m.jsx)(`div`,{className:`mini-k`,children:e.label}),(0,m.jsx)(`div`,{className:`mini-v mono`,title:e.title??e.value,children:e.value||`‚Äî`})]})}function x(e){return e.open?(0,m.jsx)(`div`,{className:`vmodal-backdrop`,role:`dialog`,"aria-modal":`true`,"aria-label":e.title,onMouseDown:e.onClose,onClick:e.onClose,children:(0,m.jsxs)(`div`,{className:`vmodal`,onMouseDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)(`div`,{className:`vmodal-head`,children:[(0,m.jsxs)(`div`,{className:`vmodal-head-left`,children:[(0,m.jsx)(`div`,{className:`vmodal-title`,children:e.title}),e.subtitle?(0,m.jsx)(`div`,{className:`vmodal-sub`,children:e.subtitle}):null]}),(0,m.jsx)(`button`,{type:`button`,className:`vmodal-close`,onClick:e.onClose,"aria-label":`Close`,title:`Close`,children:`√ó`})]}),(0,m.jsx)(`div`,{className:`vmodal-body`,children:e.children})]})}):null}function S(){let e=(0,f.useRef)(null),t=(0,f.useMemo)(()=>le(),[]),r=(0,f.useMemo)(()=>se(t),[t]),[o,s]=(0,f.useState)(`inhale`),[d,p]=(0,f.useState)(``),[S,C]=(0,f.useState)({status:`idle`}),[w,he]=(0,f.useState)(!1),[T,ge]=(0,f.useState)(null),[E,_e]=(0,f.useState)(``),[D,ve]=(0,f.useState)(``),[O,ye]=(0,f.useState)(``),[k,be]=(0,f.useState)(null),[A,j]=(0,f.useState)(``),[M,xe]=(0,f.useState)(null),[N,Se]=(0,f.useState)(null),[P,Ce]=(0,f.useState)(null),[we,F]=(0,f.useState)(!1),[Te,I]=(0,f.useState)(!1),[Ee,L]=(0,f.useState)(!1),[De,R]=(0,f.useState)(!1),[Oe,z]=(0,f.useState)(!1),[ke,B]=(0,f.useState)(!1),[Ae,V]=(0,f.useState)(``);f.useEffect(()=>{let e=document.documentElement,t=document.body;return e.classList.add(`verify-shell`),t.classList.add(`verify-shell`),()=>{e.classList.remove(`verify-shell`),t.classList.remove(`verify-shell`)}},[]),f.useEffect(()=>{let e=d.trim();if(!e){V(``);return}try{let t=new Blob([e],{type:`image/svg+xml`}),n=URL.createObjectURL(t);return V(n),()=>{URL.revokeObjectURL(n)}}catch{V(``);return}},[d]),f.useEffect(()=>{if(!A)return;let e=window.setTimeout(()=>j(``),2400);return()=>window.clearTimeout(e)},[A]);let H=(0,f.useMemo)(()=>k||(S.status!==`ok`||!S.embedded.zkProof&&!S.embedded.zkPublicInputs&&!S.embedded.zkPoseidonHash&&!S.embedded.proofHints?null:{zkPoseidonHash:S.embedded.zkPoseidonHash,zkProof:S.embedded.zkProof,zkPublicInputs:S.embedded.zkPublicInputs,proofHints:S.embedded.proofHints}),[k,S]),U=(0,f.useMemo)(()=>H?.zkProof?h(H.zkProof):``,[H]),W=(0,f.useMemo)(()=>H?.zkPublicInputs?h(H.zkPublicInputs):``,[H]),G=(0,f.useMemo)(()=>H?.proofHints?h(H.proofHints):``,[H]),K=(0,f.useMemo)(()=>T?l(T.pulse,T.kaiSignature):``,[T]),q=(0,f.useCallback)(async(e,t)=>{let n=(e||``).trim();if(n)try{if(!navigator.clipboard?.writeText){j(`Clipboard unavailable. Use manual copy.`);return}await navigator.clipboard.writeText(n),j(`${t} remembered.`)}catch(e){j(`Remember failed. Use manual copy.`),console.error(e)}},[]),je=(0,f.useCallback)(async e=>{if(!de(e)){C({status:`error`,message:`Upload a sealed .svg (embedded <metadata> JSON).`,slug:r});return}p(await ue(e)),C({status:`idle`}),j(``)},[r]),Me=(0,f.useCallback)(e=>{if(!e||e.length===0)return;let t=Array.from(e).find(de);if(!t){C({status:`error`,message:`Drop/select a sealed .svg file.`,slug:r});return}je(t)},[je,r]),Ne=(0,f.useCallback)(async()=>{let e=d.trim();if(!e){C({status:`error`,message:`Inhale or paste the sealed SVG (Œ¶Key).`,slug:r});return}he(!0);try{C(await ce(r,e))}finally{he(!1)}},[r,d]);f.useEffect(()=>{let e=!0;return(async()=>{if(S.status!==`ok`){ge(null),_e(``),ve(``),ye(``),be(null),xe(null),j(``);return}let t=S.embedded.kaiSignature??``,n=S.embedded.pulse??S.slug.pulse??0,r={v:`KPV-1`,pulse:n,chakraDay:ne(S.embedded.chakraDay??``)??`Crown`,kaiSignature:t,phiKey:S.derivedPhiKey,verifierSlug:ie(n,t)},o=await ee(d),s=i(d),c=s?.proofCapsule??r,l=await u(c),oe=await ae(te(s?.raw&&typeof s.raw==`object`&&s.raw!==null?{...s.raw,svgHash:o,capsuleHash:l,proofCapsule:c}:{hashAlg:s?.hashAlg??`sha256`,canon:s?.canon??`JCS`,proofCapsule:c,capsuleHash:l,svgHash:o,shareUrl:s?.shareUrl,verifierUrl:s?.verifierUrl,zkPoseidonHash:s?.zkPoseidonHash,zkProof:s?.zkProof,proofHints:s?.proofHints,zkPublicInputs:s?.zkPublicInputs,authorSig:s?.authorSig??null})),f=s?.authorSig,se=f?a(f)?await re(oe,f):!1:null;e&&(ge(c),ve(o),_e(l),ye(oe),be(s),xe(se))})(),()=>{e=!1}},[S,r.raw,d]),f.useEffect(()=>{let e=!0;return(async()=>{if(!H?.zkProof||!H?.zkPublicInputs){e&&Se(null);return}if(!P)try{let t=await fetch(`/zk/verification_key.json`,{cache:`no-store`});if(!t.ok)return;let n=await t.json();if(!e)return;Ce(n)}catch{return}let t=typeof H.zkPublicInputs==`string`?(()=>{try{return JSON.parse(H.zkPublicInputs)}catch{return[H.zkPublicInputs]}})():H.zkPublicInputs,r=await n({proof:H.zkProof,publicSignals:t,vkey:P??void 0,fallbackVkey:P??void 0});e&&Se(r)})(),()=>{e=!1}},[H,P]);let Pe=(0,f.useMemo)(()=>w?{kind:`busy`,title:`SEALING`,subtitle:`Deterministic proof rails executing.`}:S.status===`ok`?{kind:`ok`,title:`PROOF OF BREATH‚Ñ¢`,subtitle:`Human-origin seal affirmed.`}:S.status===`error`?{kind:`fail`,title:`REJECTED`,subtitle:`Inhale a sealed Œ¶Key, then verify.`}:{kind:`idle`,title:`STANDBY`,subtitle:`Inhale a Œ¶Key to begin.`},[w,S.status]),Fe=(0,f.useMemo)(()=>S.status===`ok`?String(S.embedded.pulse??r.pulse??0):String(r.pulse??0),[S,r.pulse]),J=(0,f.useMemo)(()=>S.status===`ok`&&S.derivedPhiKey||`‚Äî`,[S]),Ie=(0,f.useMemo)(()=>w?`busy`:k?.authorSig?M===null?`na`:M?`valid`:`invalid`:`off`,[w,k?.authorSig,M]),Le=(0,f.useMemo)(()=>w?`busy`:H?.zkPoseidonHash?N===null?`na`:N?`valid`:`invalid`:`off`,[w,H?.zkPoseidonHash,N]),Y=(0,f.useMemo)(()=>T?JSON.stringify({hashAlg:c,canon:`JCS`,proofCapsule:T,capsuleHash:E,svgHash:D,bundleHash:O,shareUrl:k?.shareUrl??null,verifierUrl:K,authorSig:k?.authorSig??null,zkPoseidonHash:H?.zkPoseidonHash??null,zkProof:H?.zkProof??null,proofHints:H?.proofHints??null,zkPublicInputs:H?.zkPublicInputs??null},null,2):``,[T,E,D,O,k,K,H]),Re=(0,f.useMemo)(()=>{let e=d.trim();if(!e)return``;let t=e.split(`
`);return t.slice(0,Math.min(t.length,8)).join(`
`)},[d]),X=S.status===`ok`?S.embedded.pulse??r.pulse??0:r.pulse??0,Z=S.status===`ok`?S.embedded.kaiSignature??r.shortSig??`unknown`:r.shortSig??`unknown`,Q=S.status===`ok`?S.derivedPhiKey:`‚Äî`,$=S.status===`ok`?S.embedded.chakraDay:void 0,ze=o===`inhale`?`Inhale`:o===`capsule`?`Vessel`:o===`proof`?`Proof`:o===`zk`?`ZK`:`Audit`,Be=(0,f.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),F(!0)},[]),Ve=(0,f.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),F(!1)},[]),He=(0,f.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),F(!1),Me(e.dataTransfer?.files)},[Me]);return(0,m.jsxs)(`div`,{className:`vapp`,role:`application`,"aria-label":`‚ò§Kai Sigil-Glyph Verifier`,children:[A?(0,m.jsx)(`button`,{type:`button`,className:`vtoast vtoast-floating`,onClick:()=>j(``),"aria-label":`Dismiss notice`,title:`Dismiss`,children:A}):null,(0,m.jsxs)(`header`,{className:`vhead`,children:[(0,m.jsxs)(`div`,{className:`vhead-left`,children:[(0,m.jsxs)(`div`,{className:`vbrand`,children:[(0,m.jsx)(`div`,{className:`vtitle`,children:`‚ò§Kai Sigil-Glyph Verifier`}),(0,m.jsx)(`div`,{className:`vsub`,children:`Sovereign proof of human origin ‚Äî ‚ò§Kai-Signature ‚Üí Œ¶-Key.`})]}),(0,m.jsxs)(`div`,{className:`vlink`,children:[(0,m.jsx)(`span`,{className:`vlink-k`,children:`Path`}),(0,m.jsxs)(`code`,{className:`vlink-v mono`,children:[`/verify/`,r.raw||`‚Äî`]})]})]}),(0,m.jsxs)(`div`,{className:`vhead-right`,children:[(0,m.jsxs)(`div`,{className:`vhead-top`,"aria-label":`Primary verification`,children:[Ae?(0,m.jsx)(`div`,{className:`vsigil-thumb`,"aria-label":`Uploaded sigil preview`,title:`Uploaded sigil preview`,children:(0,m.jsx)(`img`,{className:`vsigil-img`,src:Ae,alt:`Uploaded sigil`})}):null,(0,m.jsx)(me,{kind:Pe.kind,title:Pe.title,subtitle:Pe.subtitle})]}),(0,m.jsxs)(`div`,{className:`vseals`,"aria-label":`Official seals`,children:[(0,m.jsx)(y,{label:`KAS`,state:Ie,detail:k?.authorSig?`Author seal (WebAuthn KAS)`:`No author seal present`}),(0,m.jsx)(y,{label:`G16`,state:Le,detail:H?.zkPoseidonHash?`Groth16 + Poseidon rail`:`No ZK rail present`})]}),(0,m.jsxs)(`div`,{className:`vkpis`,"aria-label":`Primary identifiers`,children:[(0,m.jsx)(b,{label:`Pulse`,value:Fe}),(0,m.jsx)(b,{label:`Œ¶-Key`,value:J===`‚Äî`?`‚Äî`:g(J,12,10),title:J})]})]})]}),(0,m.jsxs)(`div`,{className:`vbody`,children:[(0,m.jsxs)(`section`,{className:`vpanel`,role:`tabpanel`,"aria-label":`Active panel`,children:[o===`inhale`?(0,m.jsxs)(`div`,{className:`vcard`,"data-panel":`inhale`,children:[(0,m.jsxs)(`div`,{className:`vcard-head`,children:[(0,m.jsx)(`div`,{className:`vcard-title`,children:`Inhale Œ¶Key`}),(0,m.jsx)(`div`,{className:`vcard-sub`,children:`Tap to inhale a sealed Œ¶Key. Deep payloads open in Expanded Views.`})]}),(0,m.jsxs)(`div`,{className:`vcard-body vfit`,children:[(0,m.jsxs)(`div`,{className:we?`vdropzone is-drag`:`vdropzone`,onDragOver:Be,onDragEnter:Be,onDragLeave:Ve,onDrop:He,children:[(0,m.jsx)(`input`,{ref:e,className:`vfile`,type:`file`,accept:`.svg,image/svg+xml`,onChange:e=>{Me(e.currentTarget.files),e.currentTarget.value=``}}),(0,m.jsxs)(`div`,{className:`vgrid-2 vgrid-2--inhale`,children:[(0,m.jsxs)(`div`,{className:`vcontrol`,"aria-label":`Inhale controls`,children:[(0,m.jsxs)(`button`,{type:`button`,className:`vdrop`,"aria-label":`Inhale sealed Œ¶Key SVG`,title:`Inhale sealed Œ¶Key (.svg)`,onClick:()=>e.current?.click(),children:[(0,m.jsx)(`span`,{className:`vdrop-ic`,"aria-hidden":`true`,children:(0,m.jsx)(`img`,{className:`vphi-ic`,src:`/phi.svg`,alt:``,"aria-hidden":`true`})}),(0,m.jsx)(`span`,{className:`vdrop-txt`,children:`Inhale`}),(0,m.jsxs)(`span`,{className:`vdrop-mark`,"aria-label":`PhiKey mark`,children:[(0,m.jsx)(`img`,{className:`vphi`,src:`/phi.svg`,alt:`Œ¶`}),(0,m.jsx)(`span`,{className:`vdrop-mark-txt`,children:`Œ¶Key`})]})]}),(0,m.jsxs)(`div`,{className:`vcontrol-row`,"aria-label":`Quick actions`,children:[(0,m.jsx)(_,{icon:`‚ü°`,title:w?`Verifying‚Ä¶`:`Verify`,ariaLabel:`Verify`,onClick:()=>void Ne(),disabled:w,kind:`primary`}),(0,m.jsx)(_,{icon:`‚§¢`,title:`Focus View (paste/edit)`,ariaLabel:`Focus View (paste/edit)`,onClick:()=>I(!0),disabled:!d.trim()}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember Œ¶Key`,ariaLabel:`Remember Œ¶Key`,onClick:()=>void q(d,`Œ¶Key`),disabled:!d.trim()}),(0,m.jsx)(_,{icon:`‚®Ø`,title:`Clear`,ariaLabel:`Clear`,onClick:()=>{p(``),C({status:`idle`}),j(``)},disabled:!d.trim()})]}),(0,m.jsxs)(`div`,{className:`vmini-grid vmini-grid--2`,"aria-label":`Quick readout`,children:[(0,m.jsx)(b,{label:`Inhaled`,value:d.trim()?`true`:`false`}),(0,m.jsx)(b,{label:`Attestation`,value:k?`present`:`‚Äî`})]})]}),(0,m.jsxs)(`div`,{className:`vconsole`,"aria-label":`Œ¶Key preview`,children:[(0,m.jsx)(`pre`,{className:`vpre`,children:(0,m.jsx)(`code`,{className:`mono`,children:Re||`inhale a sealed Œ¶Key SVG to begin‚Ä¶`})}),(0,m.jsxs)(`div`,{className:`vconsole-foot`,children:[(0,m.jsxs)(`div`,{className:`vchip`,title:`Sovereign verification rail`,children:[`Sovereign ¬∑ `,c,` ¬∑ `,`JCS`]}),(0,m.jsxs)(`div`,{className:`vactions`,"aria-label":`Console actions`,children:[(0,m.jsx)(_,{icon:`‚§¢`,title:`Focus View`,ariaLabel:`Focus View`,onClick:()=>I(!0),disabled:!d.trim()}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember Œ¶Key`,ariaLabel:`Remember Œ¶Key`,onClick:()=>void q(d,`Œ¶Key`),disabled:!d.trim()})]})]})]})]}),(0,m.jsx)(`div`,{className:`vdropzone-hint`,"aria-hidden":`true`,children:`Drag & drop Œ¶Key anywhere in this panel`})]}),S.status===`error`?(0,m.jsx)(`div`,{className:`verror`,children:S.message??`Not verified.`}):null]})]}):null,o===`capsule`?(0,m.jsxs)(`div`,{className:`vcard`,"data-panel":`capsule`,children:[(0,m.jsxs)(`div`,{className:`vcard-head`,children:[(0,m.jsx)(`div`,{className:`vcard-title`,children:`Proof Vessel`}),(0,m.jsx)(`div`,{className:`vcard-sub`,children:`Determinate identity seal: ‚ò§Kai (pulse) + spiral (chakra) day + ‚ò§Kai-Signature ‚Üí Œ¶-Key.`})]}),(0,m.jsx)(`div`,{className:`vcard-body vfit`,children:(0,m.jsxs)(`div`,{className:`vgrid-2 vgrid-2--capsule`,children:[(0,m.jsx)(`div`,{className:`vframe-wrap`,children:(0,m.jsx)(oe,{pulse:X,kaiSignature:Z,phiKey:Q,chakraDay:$,compact:!0})}),(0,m.jsxs)(`div`,{className:`vstack`,children:[(0,m.jsxs)(`div`,{className:`vmini-grid vmini-grid--3`,"aria-label":`Slug and embed checks`,children:[(0,m.jsx)(b,{label:`proofMark pulse`,value:S.status===`ok`?S.checks.slugPulseMatches===null?`n/a`:String(S.checks.slugPulseMatches):`‚Äî`}),(0,m.jsx)(b,{label:`proofMark sig`,value:S.status===`ok`?S.checks.slugShortSigMatches===null?`n/a`:String(S.checks.slugShortSigMatches):`‚Äî`}),(0,m.jsx)(b,{label:`Œ¶-Key seal`,value:S.status===`ok`?S.checks.derivedPhiKeyMatchesEmbedded===null?`n/a`:String(S.checks.derivedPhiKeyMatchesEmbedded):`‚Äî`})]}),(0,m.jsxs)(`div`,{className:`vrail-grid`,"aria-label":`Capsule fields`,children:[(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`‚ò§Kai (pulse)`}),(0,m.jsx)(`code`,{className:`vv mono`,children:X?String(X):`‚Äî`}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember pulse`,ariaLabel:`Remember pulse`,onClick:()=>void q(String(X),`Pulse`),disabled:!X})]}),(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`Spiral (chakra)`}),(0,m.jsx)(`code`,{className:`vv mono`,children:$??`‚Äî`}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember Spiral (chakra)`,ariaLabel:`Remember Spiral (chakra)`,onClick:()=>void q(String($??``),`Spiral (Chakra)`),disabled:!$})]}),(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`‚ò§kai-Signature`}),(0,m.jsx)(`code`,{className:`vv mono`,title:Z,children:g(Z,16,12)}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember ‚ò§Kai-Signature`,ariaLabel:`Remember ‚ò§Kai-Signature`,onClick:()=>void q(Z,`‚ò§Kai-Signature`),disabled:!Z})]}),(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`Œ¶-Key`}),(0,m.jsx)(`code`,{className:`vv mono`,title:Q,children:Q===`‚Äî`?`‚Äî`:g(Q,16,12)}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember Œ¶-Key`,ariaLabel:`Remember Œ¶-Key`,onClick:()=>void q(Q,`Œ¶-Key`),disabled:!Q||Q===`‚Äî`})]})]})]})]})})]}):null,o===`proof`?(0,m.jsxs)(`div`,{className:`vcard`,"data-panel":`proof`,children:[(0,m.jsxs)(`div`,{className:`vcard-head`,children:[(0,m.jsx)(`div`,{className:`vcard-title`,children:`Attestation Spine`}),(0,m.jsx)(`div`,{className:`vcard-sub`,children:`vesselHash + sigilHash ‚Üí bundleHash (offline integrity rail).`})]}),(0,m.jsxs)(`div`,{className:`vcard-body vfit`,children:[(0,m.jsxs)(`div`,{className:`vrail-grid vrail-grid--2`,"aria-label":`Proof hash rail`,children:[(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`hash`}),(0,m.jsx)(`code`,{className:`vv mono`,children:c}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember hash algorithm`,ariaLabel:`Remember hash algorithm`,onClick:()=>void q(c,`Hash algorithm`)})]}),(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`canon`}),(0,m.jsx)(`code`,{className:`vv mono`,children:`JCS`}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember canonicalization`,ariaLabel:`Remember canonicalization`,onClick:()=>void q(`JCS`,`Canonicalization`)})]}),(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`verifier`}),(0,m.jsx)(`code`,{className:`vv mono`,title:K||`‚Äî`,children:K?g(K,22,16):`‚Äî`}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember verifier URL`,ariaLabel:`Remember verifier URL`,onClick:()=>void q(K,`Verifier URL`),disabled:!K})]}),(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`sigilHash`}),(0,m.jsx)(`code`,{className:`vv mono`,title:D||`‚Äî`,children:D?g(D,22,16):`‚Äî`}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember Œ¶Key hash`,ariaLabel:`Remember SVG hash`,onClick:()=>void q(D,`SVG hash`),disabled:!D})]}),(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`vesselHash`}),(0,m.jsx)(`code`,{className:`vv mono`,title:E||`‚Äî`,children:E?g(E,22,16):`‚Äî`}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember vessel hash`,ariaLabel:`Remember vessel hash`,onClick:()=>void q(E,`Vessel hash`),disabled:!E})]}),(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`bundleHash`}),(0,m.jsx)(`code`,{className:`vv mono`,title:O||`‚Äî`,children:O?g(O,22,16):`‚Äî`}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember bundle hash`,ariaLabel:`Remember bundle hash`,onClick:()=>void q(O,`Bundle hash`),disabled:!O})]})]}),(0,m.jsxs)(`div`,{className:`vfoot`,"aria-label":`Proof actions`,children:[(0,m.jsx)(`div`,{className:`vfoot-left`,children:(0,m.jsx)(`div`,{className:`vchip`,title:`Canonical audit payload`,children:`Audit JSON`})}),(0,m.jsxs)(`div`,{className:`vfoot-right`,children:[(0,m.jsx)(_,{icon:`‚§¢`,title:`Focus View (Audit JSON)`,ariaLabel:`Focus View (Audit JSON)`,onClick:()=>L(!0),disabled:!Y}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember Audit JSON`,ariaLabel:`Remember Audit JSON`,onClick:()=>void q(Y,`Audit JSON`),disabled:!Y})]})]})]})]}):null,o===`zk`?(0,m.jsxs)(`div`,{className:`vcard`,"data-panel":`zk`,children:[(0,m.jsxs)(`div`,{className:`vcard-head`,children:[(0,m.jsx)(`div`,{className:`vcard-title`,children:`Zero Knowledge Proof`}),(0,m.jsx)(`div`,{className:`vcard-sub`,children:`Groth16 + Poseidon status; full payloads in Expanded Views.`})]}),(0,m.jsx)(`div`,{className:`vcard-body vfit`,children:(0,m.jsxs)(`div`,{className:`vrail-grid vrail-grid--2`,"aria-label":`ZK rail values`,children:[(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`poseidon`}),(0,m.jsx)(`code`,{className:`vv mono`,title:String(H?.zkPoseidonHash??`‚Äî`),children:H?.zkPoseidonHash?g(String(H.zkPoseidonHash),22,16):`‚Äî`}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember Poseidon hash`,ariaLabel:`Remember Poseidon hash`,onClick:()=>void q(String(H?.zkPoseidonHash??``),`Poseidon hash`),disabled:!H?.zkPoseidonHash})]}),(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`groth16`}),(0,m.jsx)(`div`,{className:`vseal-inline`,children:(0,m.jsx)(y,{label:`G16`,state:Le,detail:`Groth16 verification status`})}),(0,m.jsx)(`span`,{})]}),(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`zkProof`}),(0,m.jsx)(`code`,{className:`vv mono`,title:U||`‚Äî`,children:U?g(U.replace(/\s+/g,` `),22,18):`‚Äî`}),(0,m.jsxs)(`div`,{className:`vrow-actions`,children:[(0,m.jsx)(_,{icon:`‚§¢`,title:`Focus View (ZK proof)`,ariaLabel:`Focus View (ZK proof)`,onClick:()=>R(!0),disabled:!U}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember ZK proof`,ariaLabel:`Remember ZK proof`,onClick:()=>void q(U,`ZK proof`),disabled:!U})]})]}),(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`publicInputs`}),(0,m.jsx)(`code`,{className:`vv mono`,title:W||`‚Äî`,children:W?g(W.replace(/\s+/g,` `),22,18):`‚Äî`}),(0,m.jsxs)(`div`,{className:`vrow-actions`,children:[(0,m.jsx)(_,{icon:`‚§¢`,title:`Focus View (public inputs)`,ariaLabel:`Focus View (public inputs)`,onClick:()=>z(!0),disabled:!W}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember public inputs`,ariaLabel:`Remember public inputs`,onClick:()=>void q(W,`Public inputs`),disabled:!W})]})]}),(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`hints`}),(0,m.jsx)(`code`,{className:`vv mono`,title:G||`‚Äî`,children:G?g(G.replace(/\s+/g,` `),22,18):`‚Äî`}),(0,m.jsxs)(`div`,{className:`vrow-actions`,children:[(0,m.jsx)(_,{icon:`‚§¢`,title:`Focus View (hints)`,ariaLabel:`Focus View (hints)`,onClick:()=>B(!0),disabled:!G}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember hints`,ariaLabel:`Remember hints`,onClick:()=>void q(G,`Proof hints`),disabled:!G})]})]}),(0,m.jsxs)(`div`,{className:`vrow`,children:[(0,m.jsx)(`span`,{className:`vk`,children:`audit`}),(0,m.jsx)(`code`,{className:`vv mono`,children:`bundle JSON`}),(0,m.jsxs)(`div`,{className:`vrow-actions`,children:[(0,m.jsx)(_,{icon:`‚§¢`,title:`Focus View (Audit JSON)`,ariaLabel:`Focus View (Audit JSON)`,onClick:()=>L(!0),disabled:!Y}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember Audit JSON`,ariaLabel:`Remember Audit JSON`,onClick:()=>void q(Y,`Audit JSON`),disabled:!Y})]})]})]})})]}):null,o===`audit`?(0,m.jsxs)(`div`,{className:`vcard`,"data-panel":`audit`,children:[(0,m.jsxs)(`div`,{className:`vcard-head`,children:[(0,m.jsx)(`div`,{className:`vcard-title`,children:`Audit`}),(0,m.jsx)(`div`,{className:`vcard-sub`,children:`Attestation bundle parity + author seal validity.`})]}),(0,m.jsxs)(`div`,{className:`vcard-body vfit`,children:[(0,m.jsxs)(`div`,{className:`vmini-grid vmini-grid--6`,"aria-label":`Audit checks`,children:[(0,m.jsx)(b,{label:`Attestation bundle`,value:k?`present`:`‚Äî`}),(0,m.jsx)(b,{label:`Author signature`,value:k?.authorSig?`present`:`‚Äî`}),(0,m.jsx)(b,{label:`Author verified`,value:M===null?`n/a`:M?`true`:`false`}),(0,m.jsx)(b,{label:`sigilHash parity`,value:k?.svgHash?String(k.svgHash===D):`n/a`}),(0,m.jsx)(b,{label:`vesselHash parity`,value:k?.capsuleHash?String(k.capsuleHash===E):`n/a`}),(0,m.jsx)(b,{label:`bundleHash parity`,value:k?.bundleHash?String(k.bundleHash===O):`n/a`})]}),(0,m.jsxs)(`div`,{className:`vfoot`,"aria-label":`Audit actions`,children:[(0,m.jsx)(`div`,{className:`vfoot-left`,children:(0,m.jsxs)(`div`,{className:`vseals`,"aria-label":`Seal summary`,children:[(0,m.jsx)(y,{label:`KAS`,state:Ie}),(0,m.jsx)(y,{label:`G16`,state:Le})]})}),(0,m.jsxs)(`div`,{className:`vfoot-right`,children:[(0,m.jsx)(_,{icon:`‚§¢`,title:`Focus View (Audit JSON)`,ariaLabel:`Focus View (Audit JSON)`,onClick:()=>L(!0),disabled:!Y}),(0,m.jsx)(_,{icon:`üí†`,title:`Remember Audit JSON`,ariaLabel:`Remember Audit JSON`,onClick:()=>void q(Y,`Audit JSON`),disabled:!Y})]})]})]})]}):null]}),(0,m.jsxs)(`nav`,{className:`vtabs`,role:`tablist`,"aria-label":`Verifier views`,children:[(0,m.jsx)(v,{active:o===`inhale`,title:`Inhale`,text:`Inhale`,onClick:()=>s(`inhale`),icon:(0,m.jsx)(`img`,{className:`vtab-phi`,src:`/phi.svg`,alt:``,"aria-hidden":`true`})}),(0,m.jsx)(v,{active:o===`capsule`,title:`Vessel`,text:`Vessel`,onClick:()=>s(`capsule`),icon:`‚óà`}),(0,m.jsx)(v,{active:o===`proof`,title:`Proof`,text:`Proof`,onClick:()=>s(`proof`),icon:(0,m.jsx)(pe,{})}),(0,m.jsx)(v,{active:o===`zk`,title:`ZK`,text:`ZK`,onClick:()=>s(`zk`),icon:(0,m.jsx)(fe,{})}),(0,m.jsx)(v,{active:o===`audit`,title:`Audit`,text:`Audit`,onClick:()=>s(`audit`),icon:`‚ñ¶`}),(0,m.jsx)(`div`,{className:`vtabs-spacer`,"aria-hidden":`true`}),(0,m.jsxs)(`button`,{type:`button`,className:`vverify`,onClick:()=>void Ne(),disabled:w,"aria-label":`Verify now`,title:w?`Verifying‚Ä¶`:`Verify (${ze})`,children:[(0,m.jsx)(`span`,{className:`vverify-ic`,"aria-hidden":`true`,children:`‚ü°`}),(0,m.jsx)(`span`,{className:`vverify-txt`,children:w?`VERIFYING`:`VERIFY`})]})]})]}),(0,m.jsxs)(x,{open:Te,title:`Œ¶Key Focus View`,subtitle:`Paste/edit sealed SVG (must include <metadata id="kai-voh-proof">{...}</metadata>).`,onClose:()=>I(!1),children:[(0,m.jsx)(`textarea`,{className:`vta`,value:d,onChange:e=>{p(e.currentTarget.value),C({status:`idle`})},spellCheck:!1}),(0,m.jsxs)(`div`,{className:`vmodal-actions`,children:[(0,m.jsxs)(`button`,{type:`button`,className:`vcta`,onClick:()=>void Ne(),disabled:w,title:w?`Verifying‚Ä¶`:`Verify`,children:[`‚ü° `,w?`VERIFYING`:`VERIFY`]}),(0,m.jsx)(`button`,{type:`button`,className:`vcta vcta--ghost`,onClick:()=>void q(d,`SVG`),disabled:!d.trim(),title:`üí† Remember`,children:`üí† REMEMBER`})]})]}),(0,m.jsxs)(x,{open:Ee,title:`Audit JSON`,subtitle:`Canonical audit payload (vesselHash + sigilHash ‚Üí bundleHash).`,onClose:()=>L(!1),children:[(0,m.jsx)(`textarea`,{className:`vta vta--readonly`,readOnly:!0,value:Y||`‚Äî`}),(0,m.jsxs)(`div`,{className:`vmodal-actions`,children:[(0,m.jsx)(`button`,{type:`button`,className:`vcta`,onClick:()=>void q(Y,`Audit JSON`),disabled:!Y,title:`üí† Remember`,children:`üí† REMEMBER`}),(0,m.jsx)(`button`,{type:`button`,className:`vcta vcta--ghost`,onClick:()=>L(!1),title:`Close`,children:`CLOSE`})]})]}),(0,m.jsxs)(x,{open:De,title:`ZK Proof`,subtitle:`Full embedded Groth16 proof payload.`,onClose:()=>R(!1),children:[(0,m.jsx)(`textarea`,{className:`vta vta--readonly`,readOnly:!0,value:U||`‚Äî`}),(0,m.jsxs)(`div`,{className:`vmodal-actions`,children:[(0,m.jsx)(`button`,{type:`button`,className:`vcta`,onClick:()=>void q(U,`ZK proof`),disabled:!U,title:`üí† Remember`,children:`üí† REMEMBER`}),(0,m.jsx)(`button`,{type:`button`,className:`vcta vcta--ghost`,onClick:()=>R(!1),title:`Close`,children:`CLOSE`})]})]}),(0,m.jsxs)(x,{open:Oe,title:`ZK Public Inputs`,subtitle:`Full embedded public inputs payload.`,onClose:()=>z(!1),children:[(0,m.jsx)(`textarea`,{className:`vta vta--readonly`,readOnly:!0,value:W||`‚Äî`}),(0,m.jsxs)(`div`,{className:`vmodal-actions`,children:[(0,m.jsx)(`button`,{type:`button`,className:`vcta`,onClick:()=>void q(W,`Public inputs`),disabled:!W,title:`üí† Remember`,children:`üí† REMEMBER`}),(0,m.jsx)(`button`,{type:`button`,className:`vcta vcta--ghost`,onClick:()=>z(!1),title:`Close`,children:`CLOSE`})]})]}),(0,m.jsxs)(x,{open:ke,title:`Proof Hints`,subtitle:`Explorer/API hints embedded in the bundle.`,onClose:()=>B(!1),children:[(0,m.jsx)(`textarea`,{className:`vta vta--readonly`,readOnly:!0,value:G||`‚Äî`}),(0,m.jsxs)(`div`,{className:`vmodal-actions`,children:[(0,m.jsx)(`button`,{type:`button`,className:`vcta`,onClick:()=>void q(G,`Proof hints`),disabled:!G,title:`üí† Remember`,children:`üí† REMEMBER`}),(0,m.jsx)(`button`,{type:`button`,className:`vcta vcta--ghost`,onClick:()=>B(!1),title:`Close`,children:`CLOSE`})]})]})]})}export{S as default};