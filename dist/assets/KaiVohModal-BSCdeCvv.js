const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/KaiVohApp-qerVwFb7.js","assets/index-UCB0cA71.js","assets/index-BjumX9GF.css","assets/prop-types-Dy6_UEG4.js","assets/VerifierFrame-CWXfnnDA.js","assets/VerifierFrame-FeNZTUNm.css","assets/SigilAuthContext-BTKPSeIH.js","assets/ticker-kwBYmcvy.js","assets/ticker-B0glx6FE.css","assets/postSeal-DE4BCNSp.js","assets/webauthnKAS-CwfM0m6j.js","assets/KaiVohApp-Brroi08x.css","assets/KaiRealms-CBOi6IBo.js","assets/x-DXfi4_V5.js","assets/KaiRealms-BZJvSAmB.css"])))=>i.map(i=>d[i]);
import{t as e}from"./x-DXfi4_V5.js";import{Bt as t,ii as n,ri as r,ti as i,ui as a}from"./index-UCB0cA71.js";import{t as o}from"./SigilAuthContext-BTKPSeIH.js";import{t as s}from"./SigilAuthProvider-DS9NPYpw.js";var c=a(r(),1),l=a(n(),1),u=a(t(),1),d=class extends l.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){console.error(`[KaiVoh] render error:`,e,t)}render(){return this.state.error?(0,u.jsxs)(`div`,{style:{padding:`1rem`,textAlign:`center`},children:[(0,u.jsx)(`h2`,{style:{fontSize:18,fontWeight:600},children:`KaiVoh failed to load`}),(0,u.jsx)(`p`,{style:{opacity:.8,marginTop:8},children:this.state.error.message}),(0,u.jsxs)(`details`,{style:{opacity:.65,marginTop:12,textAlign:`left`},children:[(0,u.jsx)(`summary`,{children:`Details`}),(0,u.jsx)(`pre`,{style:{whiteSpace:`pre-wrap`},children:String(this.state.error.stack??``)})]})]}):this.props.children}};function f(){let e=(0,l.useContext)(o);if(!e)throw Error(`useSigilAuth must be used inside <SigilAuthProvider>`);return e}var p=(0,l.lazy)(()=>i(()=>import(`./KaiVohApp-qerVwFb7.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),m=(0,l.lazy)(()=>i(()=>import(`./KaiRealms-CBOi6IBo.js`),__vite__mapDeps([12,1,2,13,14]))),h=(1+Math.sqrt(5))/2,g=5.236,_=610,v=377;function y({className:e}){let t=(0,l.useId)();return(0,u.jsxs)(`svg`,{className:e,width:_,height:v,viewBox:`0 0 ${_} ${v}`,"aria-hidden":`true`,focusable:`false`,children:[(0,u.jsx)(`defs`,{children:(0,u.jsxs)(`linearGradient`,{id:t,x1:`0`,y1:`0`,x2:`1`,y2:`1`,children:[(0,u.jsx)(`stop`,{offset:`0%`,stopColor:`currentColor`,stopOpacity:`0.0`}),(0,u.jsx)(`stop`,{offset:`40%`,stopColor:`currentColor`,stopOpacity:`0.5`}),(0,u.jsx)(`stop`,{offset:`100%`,stopColor:`currentColor`,stopOpacity:`0.0`})]})}),(0,u.jsxs)(`g`,{fill:`none`,stroke:`url(#${t})`,strokeWidth:`2`,children:[(0,u.jsx)(`path`,{d:`M377 0 A377 377 0 0 1 0 377`}),(0,u.jsx)(`path`,{d:`M233 0 A233 233 0 0 1 0 233`}),(0,u.jsx)(`path`,{d:`M144 0 A144 144 0 0 1 0 144`}),(0,u.jsx)(`path`,{d:`M89 0 A89 89 0 0 1 0 89`}),(0,u.jsx)(`path`,{d:`M55 0 A55 55 0 0 1 0 55`}),(0,u.jsx)(`path`,{d:`M34 0 A34 34 0 0 1 0 34`}),(0,u.jsx)(`path`,{d:`M21 0 A21 21 0 0 1 0 21`})]})]})}function b({className:e}){return(0,u.jsxs)(`div`,{className:`seal-emblem ${e??``}`,"aria-hidden":`true`,children:[(0,u.jsx)(`div`,{className:`seal-ring seal-ring--outer`}),(0,u.jsx)(`div`,{className:`seal-ring seal-ring--inner`}),(0,u.jsx)(`div`,{className:`seal-core`})]})}function x({className:e}){let{auth:t}=f(),n=t.meta;if(!n)return null;let r=[`Pulse: ${n.pulse}`,`Beat: ${n.beat}`,`Step: ${n.stepIndex}`,`Day: ${n.chakraDay}`];return n.sigilId&&r.push(`Sigil: ${n.sigilId}`),n.userPhiKey&&r.push(`PhiKey: ${n.userPhiKey}`),(0,u.jsxs)(`div`,{className:`sigil-auth-pill ${e??``}`,role:`status`,"aria-live":`polite`,title:r.join(` â€¢ `),style:{maxWidth:`100%`,overflowX:`auto`,whiteSpace:`nowrap`},children:[(0,u.jsx)(`span`,{className:`sigil-auth-pill__dot`,"aria-hidden":`true`}),(0,u.jsxs)(`span`,{className:`sigil-auth-pill__text mono`,children:[`Sealed â€¢ `,n.pulse,` â€¢ `,n.chakraDay,n.sigilId?` â€¢ ${n.sigilId}`:``]})]})}function S(e){return e?Array.from(e.querySelectorAll([`a[href]`,`button:not([disabled])`,`input:not([disabled])`,`select:not([disabled])`,`textarea:not([disabled])`,`[tabindex]:not([tabindex='-1'])`].join(`,`))).filter(e=>!e.hasAttribute(`disabled`)&&!e.getAttribute(`aria-hidden`)):[]}function C(e){return e?e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement?!e.disabled:!!(e instanceof HTMLElement&&e.isContentEditable):!1}function w(e){if(!e||e instanceof HTMLTextAreaElement)return!1;if(e instanceof HTMLSelectElement)return!0;if(e instanceof HTMLInputElement){let t=e.type.toLowerCase();return![`button`,`submit`,`reset`,`checkbox`,`radio`,`file`,`range`,`color`].includes(t)}return!1}function T({open:t,onClose:n}){let r=(0,l.useRef)(null),i=(0,l.useRef)(null),a=(0,l.useRef)(null),o=(0,l.useRef)(0),f=(0,l.useRef)(0),[_,v]=(0,l.useState)(`voh`),[T,E]=(0,l.useState)(!1),D=(0,l.useCallback)(e=>{e===`realms`&&!T&&E(!0),v(e)},[T]),O=(0,l.useMemo)(()=>({breath:`${g}s`,phi:`${h}`}),[]);(0,l.useEffect)(()=>{if(!t)return;let e={bodyOverflow:document.body.style.overflow,bodyPosition:document.body.style.position,bodyTop:document.body.style.top,bodyLeft:document.body.style.left,bodyRight:document.body.style.right,bodyWidth:document.body.style.width,bodyHeight:document.body.style.height,htmlOverflow:document.documentElement.style.overflow,htmlHeight:document.documentElement.style.height,docOverscroll:document.documentElement.style.getPropertyValue(`overscroll-behavior`),bodyOverscroll:document.body.style.getPropertyValue(`overscroll-behavior`),touchAction:document.documentElement.style.touchAction,breath:document.documentElement.style.getPropertyValue(`--kai-breath`),phi:document.documentElement.style.getPropertyValue(`--kai-phi`),kaiVh:document.documentElement.style.getPropertyValue(`--kai-vh`)};f.current=window.scrollY||window.pageYOffset||0,document.body.style.position=`fixed`,document.body.style.top=`-${f.current}px`,document.body.style.left=`0`,document.body.style.right=`0`,document.body.style.width=`100%`,document.body.style.height=`100%`,document.body.style.overflow=`hidden`,document.documentElement.style.overflow=`hidden`,document.documentElement.style.height=`100%`,document.documentElement.style.setProperty(`overscroll-behavior`,`none`),document.body.style.setProperty(`overscroll-behavior`,`none`),document.documentElement.style.touchAction=`manipulation`,document.documentElement.style.setProperty(`--kai-breath`,O.breath),document.documentElement.style.setProperty(`--kai-phi`,O.phi);let s=()=>{document.documentElement.style.setProperty(`--kai-vh`,`${window.innerHeight}px`)};s(),window.addEventListener(`resize`,s,{passive:!0});let c=a.current;c&&(c.style.overscrollBehavior=`contain`,c.style.webkitOverflowScrolling=`touch`),i.current?.focus();let l=e=>{o.current=e.touches[0]?.clientY??0},u=e=>{if(e.touches.length!==1)return;let t=a.current;if(!t){e.preventDefault();return}let n=e.target;if(!(n&&t.contains(n))){e.preventDefault();return}let r=(e.touches[0]?.clientY??o.current)-o.current,i=t.scrollTop<=0,s=t.scrollTop+t.clientHeight>=t.scrollHeight-1;(i&&r>0||s&&r<0)&&e.preventDefault()},d=e=>{let t=a.current;if(!t){e.preventDefault();return}let n=e.target;if(!(n&&t.contains(n))){e.preventDefault();return}let r=e.deltaY,i=t.scrollTop<=0,o=t.scrollTop+t.clientHeight>=t.scrollHeight-1;(i&&r<0||o&&r>0)&&e.preventDefault()},p=e=>{if(e.key===`Escape`){if(C(document.activeElement))return;e.preventDefault(),e.stopPropagation(),n();return}if(e.key===`Enter`){let t=e.target;w(t)&&r.current?.contains(t)&&e.preventDefault()}if(e.key!==`Tab`)return;let t=r.current,i=S(t);if(i.length===0)return;let a=document.activeElement,o=i[0],s=i[i.length-1];if(!a||!t?.contains(a)){e.preventDefault(),o.focus();return}e.shiftKey?a===o&&(e.preventDefault(),s.focus()):a===s&&(e.preventDefault(),o.focus())},m=new AbortController,h={passive:!0,signal:m.signal,capture:!0},g={passive:!1,signal:m.signal,capture:!0},_={passive:!1,signal:m.signal,capture:!0},v={signal:m.signal,capture:!0};document.addEventListener(`touchstart`,l,h),document.addEventListener(`touchmove`,u,g),document.addEventListener(`wheel`,d,_),document.addEventListener(`keydown`,p,v);let y=e=>{e.preventDefault()};return document.addEventListener(`gesturestart`,y,{passive:!1,signal:m.signal}),document.addEventListener(`gesturechange`,y,{passive:!1,signal:m.signal}),document.addEventListener(`gestureend`,y,{passive:!1,signal:m.signal}),document.addEventListener(`submit`,e=>{let t=e.target;t&&r.current?.contains(t)&&(e.preventDefault(),e.stopPropagation())},{capture:!0,signal:m.signal}),()=>{m.abort(),window.removeEventListener(`resize`,s),document.body.style.overflow=e.bodyOverflow,document.body.style.position=e.bodyPosition,document.body.style.top=e.bodyTop,document.body.style.left=e.bodyLeft,document.body.style.right=e.bodyRight,document.body.style.width=e.bodyWidth,document.body.style.height=e.bodyHeight,document.documentElement.style.overflow=e.htmlOverflow,document.documentElement.style.height=e.htmlHeight,e.docOverscroll?document.documentElement.style.setProperty(`overscroll-behavior`,e.docOverscroll):document.documentElement.style.removeProperty(`overscroll-behavior`),e.bodyOverscroll?document.body.style.setProperty(`overscroll-behavior`,e.bodyOverscroll):document.body.style.removeProperty(`overscroll-behavior`),document.documentElement.style.touchAction=e.touchAction,e.breath?document.documentElement.style.setProperty(`--kai-breath`,e.breath):document.documentElement.style.removeProperty(`--kai-breath`),e.phi?document.documentElement.style.setProperty(`--kai-phi`,e.phi):document.documentElement.style.removeProperty(`--kai-phi`),e.kaiVh?document.documentElement.style.setProperty(`--kai-vh`,e.kaiVh):document.documentElement.style.removeProperty(`--kai-vh`);let t=f.current||0;window.scrollTo(0,t)}},[t,n,O.breath,O.phi]);let k=(0,l.useCallback)(e=>{e.stopPropagation(),n()},[n]),A=(0,l.useCallback)(e=>{(e.key===`Enter`||e.key===` `)&&(e.preventDefault(),e.stopPropagation(),n())},[n]);return t?(0,c.createPortal)((0,u.jsxs)(`div`,{ref:r,className:`kai-voh-modal-backdrop atlantean-veil`,role:`dialog`,"aria-modal":`true`,"aria-labelledby":`kaivoh-title`,"data-view":_,children:[(0,u.jsx)(`div`,{className:`atlantean-stars`,"aria-hidden":`true`}),(0,u.jsx)(`div`,{className:`atlantean-halo atlantean-halo--1`,"aria-hidden":`true`}),(0,u.jsx)(`div`,{className:`atlantean-halo atlantean-halo--2`,"aria-hidden":`true`}),(0,u.jsxs)(`div`,{className:`kai-voh-container kai-pulse-border glass-omni`,role:`document`,children:[(0,u.jsx)(`div`,{className:`breath-ring breath-ring--outer`,"aria-hidden":`true`}),(0,u.jsx)(`div`,{className:`breath-ring breath-ring--inner`,"aria-hidden":`true`}),(0,u.jsx)(`div`,{className:`phi-grid`,"aria-hidden":`true`}),(0,u.jsx)(y,{className:`phi-spiral phi-spiral--tl`}),(0,u.jsx)(y,{className:`phi-spiral phi-spiral--br`}),(0,u.jsxs)(s,{children:[_!==`realms`&&(0,u.jsx)(`button`,{ref:i,type:`button`,className:`kai-voh-close auric-btn`,"aria-label":`Close portal`,onPointerDown:k,onKeyDown:A,children:(0,u.jsx)(e,{size:22,"aria-hidden":`true`})}),_!==`realms`&&(0,u.jsx)(`div`,{className:`voh-top-orb`,"aria-hidden":`true`,children:(0,u.jsx)(b,{})}),(0,u.jsxs)(`div`,{className:`kai-voh-tabbar`,role:`tablist`,"aria-label":`Kai portal views`,children:[(0,u.jsxs)(`button`,{type:`button`,role:`tab`,"aria-selected":_===`voh`,className:`kai-voh-tab auric-tab ${_===`voh`?`active`:``}`,onClick:()=>D(`voh`),children:[(0,u.jsx)(`span`,{className:`tab-glyph`,"aria-hidden":`true`,children:`ðŸœ‚`}),` `,`Voh`]}),(0,u.jsxs)(`button`,{type:`button`,role:`tab`,"aria-selected":_===`realms`,className:`kai-voh-tab auric-tab ${_===`realms`?`active`:``}`,onClick:()=>D(`realms`),children:[(0,u.jsx)(`span`,{className:`tab-glyph`,"aria-hidden":`true`,children:`âšš`}),` `,`Realms`]}),(0,u.jsx)(`div`,{className:`breath-meter`,"aria-hidden":`true`,children:(0,u.jsx)(`div`,{className:`breath-meter__dot`})}),(0,u.jsx)(x,{className:`sigil-auth-pill--tabbar`})]}),(0,u.jsxs)(`div`,{className:`kai-voh-body`,ref:a,children:[(0,u.jsx)(`h2`,{id:`kaivoh-title`,className:`sr-only`,children:`Kai Portal`}),(0,u.jsxs)(d,{children:[(0,u.jsx)(`section`,{className:`portal-pane portal-pane--voh`,style:{display:_===`voh`?`block`:`none`},"aria-hidden":_!==`voh`,children:(0,u.jsx)(l.Suspense,{fallback:(0,u.jsxs)(`div`,{className:`kai-voh-center`,children:[(0,u.jsx)(`div`,{className:`kai-voh-spinner`}),(0,u.jsx)(`div`,{children:`Summoning Vohâ€¦`})]}),children:(0,u.jsx)(p,{})})}),(0,u.jsx)(`section`,{className:`portal-pane portal-pane--realms`,style:{display:_===`realms`?`block`:`none`},"aria-hidden":_!==`realms`,children:T?(0,u.jsx)(l.Suspense,{fallback:(0,u.jsxs)(`div`,{className:`kai-voh-center`,children:[(0,u.jsx)(`div`,{className:`kai-voh-spinner`}),(0,u.jsx)(`div`,{children:`Opening Kai Realmsâ€¦`})]}),children:(0,u.jsx)(m,{onClose:()=>D(`voh`)})}):null})]})]})]})]})]}),document.body):null}export{T as default};